
⏰ Timestamps
00:00 - Intro
00:41 - Demo
13:14 - Instructions
14:13 - Where to watch everything live
14:43 - How to setup a Nextjs 15 Application
17:08 - Authentication in Nextjs 15 application
20:33 - Prisma Setup
21:50 - Neon Database Setup
23:13 - How to create Prisma Schemas
26:04 - Custom Clerk Authentication Components without watermark
01:05:20 - Prodigies University Student Results $1000 in 2 weeks
01:23:02 - Landing Figma mockups
01:28:48 - How to setup Shadcn UI in Nextjs 15 application with dark mode
01:30:09 - How to build a landing page in nextjs 
01:35:22 - Cloudways headless Wordpress CMS for blogposts in Nextjs Application
02:20:10 - Routing in Nextjs15 
02:22:05 - How to create Breadcrumbs in nextjs 
02:26:05 - Billing Settings Page
02:29:38 - How to build a responsive Sidebar in React
02:48:29 - File uploads in nextjs 15 application using Upload care
03:25:02 - Custom theme components with Shadcn UI
03:48:30 - Domain settings page
04:04:00 - Code snippet to embed chatbots into websites
04:08:31 - Bot customization options
04:13:18 -  improve performance in Nextjs by dynamically importing components
04:17:26 - How the chatbot worked under the hood (Prodigies University clips)
04:18:08 - Server Side Rendering And Client Side Rendering
04:20:40 - How to train an openAI Bot
04:54:22 - How to build real time chats in Nextjs (Conversation Page)
05:30:07 - How to create an AI chatbot in Nextjs (chatbot)
05:41:01 - How to stream a component from one domain to another in Nextjs
05:43:45 - Building the chatbot window
05:59:08 - Email Notifications using nodemailer in nextjs application
06:00:59 - How to get your Gmail APP password 
06:07:39 - How to connect OpenAI in your nextjs project
06:08:32 - Open AI prompt engineering
06:29:16 - How to get OpenAI key
06:41:54 - Testing the bot responses
06:45:05 - How to build a Portal Page for customers in nextjs
06:48:27 - How to build a Calendar booking page in nextjs
06:56:14 - Portal Steps
07:21:46 - Appointments page
⚠️ Email Marketing: https://www.loom.com/share/48c61e7982...
07:30:28 - How to use stripe connect in nextjs14 application to sell our customers products
07:44:40 - Stripe Quick Link PDF Guide with all the links you need
07:45:54 - Stripe Api keys
07:48:10 - How to Skip stripe connect onboarding process in test mode
07:52:50 - Alternative method to integrate stripe connect into your  nextjs application
07:58:29 - Products page to add products
08:10:50 - Customer Checkout Page to purchase products from on the portal
08:38:33 - Build a Dashboard in Nextjs15
08:56:27 - How to build real time apps in nextjs using Pusher
09:04:48 - How to get a job in 2024 in web development 
09:05:07 - Bonus Training (Sales)
09:06:12 - Completed sales framework 
09:07:33 - Unlimited courses and mentorship in PU

-----------------------------------------------------------------------------------------

real transcription 









Imagine an intelligence that can influence your lifestyle. Code that can emulate human abilities. And with the power of AI, all of this is now possible. And As a web developer, having this power at our fingertips means we can finally build the future. Corinna AI is everything a business owner ever asked for.

Corinna is a smart AI chatbot that acts like a sales representative. And what better way for me to show you the power of Corina than by demonstrating the application itself. Our landing page has a minimal design and shows our users the power of Corina AI. Our platform offers 3 payment options to our users, Standard, Ultimate, and Plus, and each option has a bunch of different features. You will also learn the power of SEO through optimized blog posts on your website.

These blog posts are gonna help your platform rank higher on Google. They can create an account by clicking on the free trial button on the top right corner. The user is then navigated to a custom onboarding form that's gonna help our business understand the users that use our platform. And here is something that I have never seen on YouTube before. We are using custom login pages with clerk authentication without the watermark.

This is something that nobody really speaks about, but it is so easy to incorporate into your application. With the help of these custom pages, you can build any onboarding flow you need. Once the user creates an account on Corina AI, they are redirected to their dashboard. In the dashboard, they can see important metrics like their potential clients, the pipeline value, appointments, the total sales that they have made including their plan usage. Our platform users can also keep track of the income each domain generates.

Our users can create domains to host a chatbot within their website. As you can see here, I have 4 domains and all 4 domains can have a chatbot embedded into the website. To create a domain, the user can click on the plus icon and a beautiful component shows up at the bottom. Once the domain is created, the domain will show up in the sidebar. Upon clicking the domain, the user is redirected into the domain settings page.

And here is the coolest part of this entire application. All the user has to do is copy this piece of code by clicking on the copy icon and when they paste it into their website, they get access to a chatbot that is powered by AI. But let me tell you, this chatbot is no ordinary chatbot. Carina AI is a smart sales representative. The bot is trained with a prompt that teaches it some of the best sales techniques to get clients to book calls on our users' calendars.

And it just keeps getting better. Our users can feed custom questions into the chatbot and the AI will try to get those specific questions answered in a human-like conversation. And this can help better filter out the leads even further. So for example, I'm going to send a question to the chatbot. And as you can see, the chatbot starts to type and then addresses the question.

And just like how every sales representative knows, the most important asset of any business is your customer's emails. And that's exactly what Corina AI tries to do the moment it starts a conversation with a website visitor. As you can see, it requested the user for their email address. And when the user enters the email address, the bot is smart enough to know exactly who they are speaking with. So for example, if this customer ever reached out in the past, the AI knows exactly who they are.

Now as you can see here, the bot starts to ask a specific question. These are the questions the business owner wanted the chatbot to ask. And this information could be really helpful to the business owner, especially when they're sending out email marketing. Now I know I mentioned email marketing, but that is a surprise. So just keep watching and I promise you this is going to be the best video you have ever watched on YouTube.

Now to demonstrate the chatbot capabilities, I'm going to go ahead and start up a new conversation. The chatbot again requires my email, So I'm going to go ahead and send an email. And now I'm going to send another message saying I want to learn more about your services. The chatbot is then going to look at the questions that the business owner wanted to ask the customer and is going to try to attempt to get the answers. And I'm using this domain right now.

And if you look at the filter questions, the business owner wanted to make sure that the customer is ready to move forward if the price is affordable, and also make sure that they are ready to invest in themselves. So I'm going to respond yes. And here is another amazing feature in Corina AI. Corina AI knows exactly when to give the user a portal link. And with the help of some prompt engineering, it analyzes the conversation and decides whether to send the customer to a calendar booking page inside our user's portal or to send them to the payment form which we built using custom Stripe components.

And let's go ahead and see what the chatbot does. And there you go, this link is going to take the user to a portal page. But this is why Corina AI is amazing. In some situations where the customer did not answer all of the questions, the bot can send the customer to a form with pre-filled answers. And if any questions were left unanswered, the user can then go ahead and answer those questions and proceed through the flow.

And in the situation where they did answer all the questions, when the user clicks the link, it takes them directly to the bookings page. The user can also go back and edit their responses. In the bookings page, the user can pick the date here and they can also pick a time slot. And when they click on book now, the user is redirected to a thank you page. Now let's take a look at an example of what it looks like to get a payment link.

So I started a normal conversation with the chatbot and without even answering any of the questions, I just told it to give me the link directly. And in the end of the conversation, the chatbot sent me a link to go ahead and proceed to pay. And when I clicked this link, it took me to the details page. And the reason is because I haven't answered any of the questions. So I went ahead and answered the questions.

And now when I hit next, there you go. A custom Stripe checkout page using custom form elements. So once I put my credit card details and click on pay, it redirects me to the thank you page once the payment is successful. Now for 1 of the most amazing features in Corina AI. Sometimes conversations can get out of hand.

And when it does, Corina AI is smart enough to know when it should send an email notification notifying the business owner that 1 of their customers needs assistance. So as you can see, I kept annoying the chatbot and I said, I want to speak to your manager and I don't like you. And eventually it gave up and said, let me connect you with the live support agent and immediately turned this chatbot to real time mode. And this brings us to the next feature in Corina AI. Back inside the dashboard, the business owner can access all conversations under the conversations tab.

And if they click on the chat room, they can directly communicate with the customer. And now I sent a message here as the business owner and the customer got the message in real time. And if I send another message here, it also shows on the chatbots. Now let's say for example, a customer showed up saying I want a refund. The business owner will get an email that looks something like this and the business owner can go into the dashboard and might also want to ask for the receipt to make sure the transaction actually happened.

The customer can actually send files and images into the chatbots. So I'm going to go ahead and send an image just like this and there you go. How amazing is this? And of course, the business owner can also see the image within their dashboard. And once the conversation is done, the business owner can switch off real-time mode.

Now let's go back to our platform. Pro and Ultimate Plan members can also customize the bot's appearance. The user can click on this icon and then they can upload a new bot icon. And once they hit save, the icon will actually change. You can also change the greeting message.

And if you refresh the page, you will now see the new bot icon. And the new message. And not to forget, you can also unlock a bonus add-on for this project inside Prodigy's University, which teaches you how to set custom themes for the bots including changing the color for the bot window and the text messages. Inside the settings page, there is a bot training section. Inside this section, the business owner can set bot training questions as well as help desk questions.

Help desk questions can be accessed through the help desk tab and these questions are like FAQ questions. To create a help desk question, go ahead and put the question in here and then go ahead and put the answer in here and then click on create and there you go. The same thing applies to the bot questions. And here is an amazing feature in Corina AI. Business owners can create products and then sell these products on the payment page.

And in order to sell these products, they first have to integrate their own Stripe account into our application. They can do that inside the integrations tab. The integrations tab is where the business owner can connect all of their third-party applications inside Corina AI. The business owner can connect their Stripe account by clicking on the connect button. The user is then prompted to click on connect to Stripe, which will then take them into their Stripe onboarding flow.

And just like that, their Stripe account is now connected. Now going back to the products page, I can now click on add product, I can set a name for the product, upload a picture and also set the price for this product and then click on create product. And just like that, the product will now show up under my products tab. Under The settings tab, the business owner can change their billing settings, they can also change the interface theme and can also reset their password. The business owner can also upgrade their plan by clicking on the upgrade plan button and a beautiful modal shows up with all the 3 available plans.

Since they are already on the standard plan, this is selected by default. And now if they click on the ultimate plan, a beautiful form shows up right here. And after filling in credit card information and clicking on the pay button, the UI changes to indicate that the user now has a paid plan. The business owner can check all their appointments under the Appointments tab. On the left side, all the appointments are listed throughout the month.

And on the right side, you can see all the appointments that are due today. And here is a really nice feature to have inside Corina AI. The business owner can also do email marketing under the email marketing tab. On the left side, all of the leads that were captured through the chatbot will show up along with the domain through which they came through. The business owner can view the customer's responses by clicking on the view button.

And as you can see, we have the question along with the answer. The business owner can analyze the responses that the customer gave and can add a customer to an existing campaign. To create a campaign, the user can click on the create campaign button, enter the campaign name and then click on create campaign. As you can see, there are 0 customers added to this new email campaign. To add customers to an email campaign, the business owner can click on the campaign they want and then select the customers that should be placed within this email campaign and then they can add them to the campaign.

And as you can see, it shows 4 customers have been added. On the top right corner, you can also see the total credit that this business owner has in terms of email marketing. This is determined by the plan that they have. The business owner can then set the email template that is to be sent with the email campaign. So as you can see, This is the email template that I just created and I'm going to go ahead and click on save.

And now when I click on send, there we go, this email campaign is now sent. And if you notice at the top right corner, the email credits have also changed. And As you can see, I have received the email as well. And to add finishing touches to our application, our application is completely responsive with a sidebar that can grow and shrink. And I'm sure you're thinking, this is 1 of the best videos on YouTube, but wait till you see the next video.

The next video is unlike anything on the internet. Even I don't know how I'm going to build such an application. So go ahead and click the subscribe button so that you can see that video when it comes out. My goal here is very simple. I want to give you so much free value that even paid courses can't make up to it.

And I'm going to do that today by giving you this entire course completely for free. And as you all know, we started the action driven content series, which means you only get better if you take action. So for you to truly benefit from this opportunity, go get your laptop, sit with us and build this amazing application right from start to finish. And if you think this is an amazing project, I can't wait for you to see what we have next. So go ahead and subscribe because when that video comes out, you can be the first person to watch that video.

And today's cup of coffee is sponsored by Sarthik, Avishak, Siva, Alvaro, Speed C, Frank, and Martin. Guys, thank you so much for giving back to the developer community. This way we can give you much more free value. And also if you guys get stuck at any point in the application, there's a link to the Discord in the description. The entire Prodigy's community helps each other.

There's more than 5, 000 people in that community. And if you want to see the next project being built from start to finish in live deep dive calls And you want to learn about SAS how to start your agency for 0 dollars Every single thing is in prodigies university We hop on live deep dive mentorship calls every Friday and on Monday and Wednesday you get mentorship calls directly with my team and the entire community. So go ahead and click the link in the description and I'll see you in there. And with that being said, let's jump straight right into the video. All right guys, I hope you're excited for this super fun project.

So go ahead, create a folder in here and we're going to rename this to Corinna-AI. Okay. Go ahead and drag this into your Visual Studio code and it's going to open it up for you like this. Next, open your terminal because we are going to install Next.js. Now go ahead and type in the command bunx create-next-app at latest and put a space and hit the period sign.

Again, you don't have to use bun. I am using bun because it's insanely fast and I'm on a Mac computer. Okay. If you're on Windows, you can just use NPM. So go ahead and hit enter and then for TypeScript hit yes.

Yes for ESLint. Yes for Tailwind. Yes for source. Yes for app. No for the import alias and that's going to install for you.

See that is so fast, right? That's why I like Bun. Now if your structure looks like this, good job. Okay, so go into your source folder and we're just going to create some structure for our application, just a little bit, not too much. That way we can, you know, go through a process and we, you know, we're not going all over the page.

So let's go ahead and do that. So first thing is we're going to need actions. So I'm going to create a folder for that. And then the next is we're going to have some constants here. So let's go ahead and put that as well.

After constants, I'm going to say context and then next comes hooks because we're going to need a bunch of hooks in our application. So it's good to create a folder for that. And then finally icons and let me rename this to icons and then I'm also going to have the lib folder and finally the schemas. This is all we need for now if we need more we will improve do whatever we need to do okay for now this is enough and then we're going to say bun run dev And that's going to give us a link and we can click on that. That's going to take us to local host and you should see this screen.

Great job. Next, make sure you click out of your folder structure. And then you're just going to say dots ENV. You're going to create an environment file and then guys there's a link in the description. Scroll down, click on that github link that's going to take you right here.

We need this because we're going to copy the environment variables. So click on the .env file or the .env.example file. Okay and you're going to get access to a bunch of variables. Just go ahead and paste those in here. And as we go, we're gonna slowly populate these variables.

The first feature that we're gonna be working on in our application is authentication. And we are going to be using Clark to make this happen because Clark is 1 of the best tools out there for authentication. So scroll to the description. There's going to be a link. It's going to take you exactly to this page.

Make sure you log in. And then all you have to do is click on create application. And in here, we're going to call this Corinna-AI. And then scroll down here. You're going to see Google.

Make sure you turn this off. Okay. And then when you come to this email make sure this is turned on because we are going to be creating custom auth pages for our authentication flow that means we're not gonna be using this component anymore and I have never seen this. Nobody has ever spoken about this feature in clerk authentication. I think this is amazing because you can have your own auth pages.

You don't have to have their components and you're not going to have the branding anymore. So it is your application, your branding. Okay, so go ahead and do that. And then finally click on create application and that's going to spin that up for you. Awesome.

Now make sure Next.js is clicked and you're going to find this, please don't copy it and just paste it right away because we need a specific version of clerk. Okay? So go ahead and open up your terminal, make sure you have quit your terminal if you need to and all you're going to do is you're going to say bun add and you're going to say at clerk slash next.js but you're going to say at and you're going to paste this number which is version 4.29.12 and go ahead and hit enter. Now just to confirm, go into your package.json which is right here and just look at the version number and make sure that the exact same version that we just put in here. Awesome.

Now the next step is go ahead and reveal this .env.local variable and just copy all of this stuff right here and you're going to go in here into your .env file and you're just going to paste that in here. Okay now as you can see they have updated a you know a couple of things but this is what I've been using so all you have to do now is you need to go into your root directory inside source and you're going to say middleware.typescript and go ahead and type this out with me So you're going to import auth middleware from clerk next like this. And then finally, you're going to export default auth middleware. And you're going to invoke this and inside that you're going to say public routes. And you're going to set it to an array.

Okay. These are all the routes that are publicly accessible. And the first thing is we need the, you know, the root. So we're going to put that in here. And then we're going to say, flash auth, and we're going to put this bracket like this, and we're going to say, dots and a star.

And then finally, we're just going to say, portal. It's fine for now, we're just going to set this up so we don't have to ever come back to this okay. So make sure you say portal with the dot and a star as well and finally ignore routes and this is going to be set to an array again with slash chat bot and finally just say export const config equal to an object. And you can go ahead and copy this 1 line. It's just basically a regex expression.

Just go to GitHub, click on it, just copy and paste that here, okay? Now, if you read the documentation, It literally gives you exactly what you need. So I'm just going to copy this and I'm going to go into my root layout.tsx, which is inside my app folder inside this click on layout.tsx. I'm going to go ahead and import this from here. And then it says I need to wrap everything in this.

I'm just going to say clerk provider and push everything else inside this provider. And that's it. How amazing is that you literally have a whole dedicated team of developers who are maintaining user authentication and all you had to do was that. That's pretty much it. Okay, so let's move on now.

Alright guys, so the next thing we're going to need is Prisma. So go ahead open up a terminal and you're going to say bun I Prisma and hit enter and then bun x Prisma in it. And that's going to open up some stuff for you and you should see something like this in your .env file, okay? And they're also going to give you a database URL. So if you see all the stuff, nice.

And also make sure you see a Prisma folder here with a schema, okay? Next thing we're going to need is Prisma Client. So go ahead and say buni at Prisma slash client and hit enter. Awesome, And now we should have Prisma installed. So let's go ahead and create the Prisma client for our application.

So head over to the Libs folder and inside that we're just going to say Prisma.typescript. And go ahead and import Prisma Client which comes from Prisma Client. And then we're going to say declare global and var Prisma, which is going to be Prisma Client or undefined. Okay. And now for this, go ahead and export const clients equal to global this dot Prisma.

So If this exists, then use that or we're going to create a new Prisma client, just like this and go ahead and invoke it. And finally, we want to say if process.env.nodeEnvironment, so we're making sure we're not in production, so not equal to production, then we're going to say global this dot Prisma will be equal to clients. Now that we have Prisma set up, we're going to need a database to keep track of our data. And today we're going to be using Neon Tech. Now Neon Tech is a serverless Postgres database, which means that with just a click of a button, you can set up Postgres in the cloud.

And guys, they have made it so easy for developers because all you need really is just the URL. That's it. That URL points to a database and that database will automatically scale up and down based on your application workload. How amazing is that? And check this out guys, they have a generous free tier.

That means you can get set up completely for free. Okay, so we need to support them. So go ahead, scroll to the description. You're gonna find a link. Click on that link and it's going to take you to this page and make sure you sign up and then once you're done, click on start for free and then in here, I'm just going to call my project YouTube videos and then in here for the database name, I'm going to call this Corinna-AI and Then scroll down here and click on create project.

And that's it. That's literally all you needed. Now you can copy this string by clicking on this copy button and you want to go into your dot environment variables and you're going to replace this URL with a new URL. Now go ahead, open up your folder structure, click on Prisma, and then click on the schema file. And now I want you to go into the GitHub, and you're going to go into the same file in here, and you're going to copy all of these schemas.

And don't worry, we're going to quickly look at it. So copy it and paste it in here. I don't want you to sit for 1 hour trying to type everything, okay? So it's basically a user mode. What is this stuff?

What is this entire file? Well, it's very simple. It's like creating the skeleton for the data, okay? Imagine a table that has columns, right? We have columns like name, ID, type, that kind of stuff.

This is just a code representation of that table. Okay, that's literally it guys. So we have the user model right here, and then we have the domain right here. Then we also have the chat bots, we have billings, we have help desk which is a type of question or it's more like FAQ basically and then we have filtered questions. Now what is this?

Filtered questions is basically the questions we're going to take and feed the AI with. So the business owner is going to enter all these questions in here and the AI is going to use these questions To run the entire sales, you know call or whatever. It's not a sales call. It's more like a sales conversation Okay, so finally we have customer responses it's just basically a text and all that kind of stuff. And then we have the customer itself, so who are they, the email, and we have chat rooms.

So this is how we kind of establish that two-way connection, okay? And then we have a chat message, which is kind of like the bubble, you'll see, and we have 3 plans, Standard, Pro, and Ultimate, and the role is Owner or Customer. Okay, very straightforward stuff, guys. This is literally English. Like, read this.

ID, full name, string, clerk ID, string, unique. It's just English. And for example, if you don't know what this is you see a user has a bunch of domains right and that's why it's an array of the model type domain and if you go down here this is what a domain is very straightforward okay I hope that makes sense now let's move on now go ahead and open up your terminal make sure you quit the terminal and you're going to say bun X Prisma generates okay awesome It looks like all our migration schemas and all that kind of stuff was created. And now we're going to say BunX Prisma DB Push. So if everything was successful, We're not going to see an error, so let's take a look.

Alright, there we go guys. Great job. Now another cool feature of Prisma is you can say Prisma or BunX Prisma Studio. And if you hit enter, it's going to spin up sort of like a way you can communicate with the database, but using Prisma. How cool is this?

Now, if you try to access, for example, let's say something like this, let's see what happens. It takes us to this page, but remember, we are creating custom flows in Clark authentication. So how do we make this possible? Well, the first thing we need to do is we need to create a redirect or we need to tell clerk where is the sign up and sign in page located. And clearly we don't have that.

That's why it's sending us to that default component. So let's go ahead and set that up. So inside this app folder, you're going to create an auth folder and inside that a sign-in. And inside the sign-in, we want a page.tsx. And you're going to do the same thing for sign-up.

So we're going to say sign-up and we're going to say page.tsx in here as well. Okay and now we're going to scroll down to the .env file and you're going to have 2 variables in here and they're going to look like this. Okay it's going to say next public clerk sign-in and sign-up but we need to change this endpoint or this route. So we're going to say auth slash sign in and auth slash sign up. Okay.

You'll find this when you copy paste this file. Don't worry about it. Now you want to go into your sign up component. Actually, let's go ahead and first create our layout. So inside the auth folder, you're going to create a page called layout.tsx and inside the layout.tsx, I'm just going to return a component like this that says layout and inside the props here, I'm going to say children And we're going to set that to react.reactNode.

And then let's go ahead and also destructure this so we can get access to children. Let's change this to an async component. And then we're going to say const user equal to 08 current user, which comes from clerk next.js. And go ahead and invoke that just like this. We're going to say if there's a user, then we're going to redirect them to the root page.

So go ahead and import redirect, which comes from next navigation and send them to the root page like this. Now let's go back into the signup component And we're going to return a component in here as well like this. I'm just going to call this sign up like this. Okay. And now let's go back into the layout component and I'm going to try to access the auth slash sign dash up.

All right. There we go. So now we see the layout kind of wrapping everything up. Okay. So go ahead remove this and we're going to set a class name of height of screen flex with a full and justify center.

And inside this we're going to have a very simple div that has an image inside it. So go ahead and import the image and this div is going to have the following class name and this image is going to have the source which we're going to get to in just a second. The alt is going to be logo and sizes of 100 vertical width and the style is with 20% height of auto and then with 0 height and 0. Okay and then inside this we're going to render all the children. So now go ahead and go to the GitHub repository and inside the public folder, okay?

In the public folder, you're going to find something in here called images, okay? Go ahead, download this folder, download the images folder, and you're going to put it into your public folder. So essentially, you're just creating public slash images and then you're just going to move all these images into there. Okay? So go ahead, pause this video, do that and then let's continue.

Alright guys, so you might have this problem where the icon you post in here is actually not showing, right? And it would probably show like an error or something like that. And clerk will actually show you why that is happening. So as you can see here, it's showing that the images slash logo.png is being redirected because there's no signed in user. So we need to add that entire folder to our routes, to our public routes.

So go in here and just say slash images and then do the same thing in here and then you'll be able to access that. Okay now go back into your signup layout.tsx this page right here and we're just going to continue right after this. We're going to create a div in here and the div is going to have the following class name and guys go ahead pause this and type okay there's no point in me reading and typing everything out. I don't know why people want me to type the things that I literally written on the screen okay. Pause the video and read it and type it out.

Okay? All right. And after this we're going to say H2 and this H2 is going to have the following class name. And inside this all we're going to do is we're going to put a title in here and that title is, Hi, I'm your AI powered sales assistant, Corinna. And of course you're not going to see it right now because we are on a different screen size, right?

But if you increase it, you will of course see it. And after the H2, we're going to put a paragraph in here and we're going to create some custom styling, guys. We're going to get to this. Don't worry about it. I'm going to show you what to do.

But this is going to say, Corina is capable of capturing lead information without a form. And this is what it will look like. Alright, awesome. And it also says something that has never been done before, exactly like this video. Okay, moving on now.

After the paragraph tag, we're going to have another image here, which is going to have images app-ui.png. We're going to set this 1 to app image. And then we're just going to set loading to lazy, sizes of 30. And we're going to set the following class name, width, and height. And if you refresh the page, you're going to see it right here.

OK, great job. Now the next thing we're going to need is ShadZNUI. So go ahead, open up a tab and look up ShadZNUI and I'm going to click on the installation guide and then click on Next.js and they're going to give you the code right here. So what I'm going to do is I'm going to copy this and click on BUN. And now we're going to get in here and then you're going to open your terminal.

We're going to quit this. Let's go ahead and paste that command and that's about it and hit enter. Now click on default, click on Slate and then for CSS variable hit yes and then that should spin up your project. Now to make sure that everything was successfully put into your project, first thing is you have to find a tailwind config.ts right and it has to have all these animations inside it. And then you should also find a components folder in here and inside this components folder all the components you install is going to get placed right in there.

Now the next thing you're going to do is you're going to go into the github repository, click on the source folder, go into app and then you're going to find the globals.css and guys just copy all of this, we just spent like hours creating a really good style sheet. So go ahead and just copy everything from this file and then go into yourglobals.css and just replace everything in here. And now if you do bunrun dev and spin up your project, you should see something different. Alright, great job. It's already looking great.

So let's move on. Now the next thing we're going to do is inside the sign up page, we're going to have our sign up components. This way we can show our custom sign up flow for Clark. So go ahead and remove everything in here and we're going to create a div and inside this div we're going to create another div with the following class names and we're going to create a custom component called signup form provider okay and this is a component we're going to create in just a second. So inside your components folder you're going to create forms like this and inside that go ahead and create a sign dash up component and everything sign up related is basically gonna go in here okay so go ahead and create a file and we're gonna call it form dash provider dot t sx and inside this I'm just gonna return a component and change it to the same as well.

And inside this form provider, we're going to say children and the children are going to have a react node type. Okay, so react.react node and go ahead and destructure it from here as well. And now head into the context folder, we're going to create another component in here. And this is basically like the auth context to store everything. OK, and we're going to call it use auth context.

So go ahead and say use auth context dot TSX. And in here, we're going to do the following. So first thing we're going to do is we're going to import react and use state because we need these things for our auth context. Then we're going to create a type called initial values prop, but the current step set to a number, right? It's a type and then the set current step, which is a dispatch.

And then we need to also set up the initial values. I'm sure you guys know because we went across this in great detail in all the past projects. So if you haven't watched the past videos, I suggest you watch Plura. Plura is an amazing project that absolutely blew up my channel because it offered so much value and people got jobs literally putting that project on their portfolio. So go ahead take a look at that if you want to look at everything more in detail but you don't have to this has a bunch of features that are you know focused more on the application and the business logic right.

If you want to learn about the you know the context API and stuff like that. I explained a lot in those projects. And the next thing we need is we're going to just create the context in here. And then finally, we need to destructure our provider. So I'm just going to destructure this like this.

And then now we need to create the components. So this component is called AuthContextProvider. So I'm just going to say export const and this is equal to a function like this and this function is going to get access to children and this is going to again be of type children which is React.reactNode and the first thing we need is a state. So I'm going to say current step and set current step because we're going to change this so that we can change the step that they are on the auth flow. Okay and then const values equal to an object here with the current step and we're also going to get the set current step.

This way we can send this into the provider and then we can change it from there. We get access to these properties. So we're going to return the provider like this and the value is going to be equal to the values and then in here we're going to say the children like this. And then finally we need a hook to actually use this right. So I'm just going to say use AuthContextHook at the bottom and that's pretty much it.

And now let's go back into our component which is the signup form and in here I'm simply going to remove this and I'm going to say AuthContextProvider and now inside this I'm going to provide the form provider, okay? Now actually for all of this you're going to need some more components so let's go ahead and grab that. So here's what I'm going to do. I'm going to open up the terminal. I'm just going to quit this and I'm going to paste the following command.

And of course I'm not using npm so I'm just going to change this to BunnX, okay? Shadzian UI at latest, add, dash dash all, okay? So let's go ahead and hit enter, and this is just going to save us so much time, guys. It's going to install everything. I don't suggest you do this in production.

The reason is because it's going to increase the size of the bundle and all that kind of stuff. But you should be fine, okay? I think Next.js has some code splitting and all that stuff, but you should be okay. But if you do this, it's faster. Now this might take longer time for you because you haven't used Bun in the past.

If you're using NPM, it's going to take some time. But since I used Bun, it's insanely fast. Okay? Now in here, I'm going to get the form provider and the form provider is going to take the following props. So what I'll do here is I'm actually going to create a hook.

So go into your hooks folder and you're going to call this, and you're going to create a folder in here actually and we're going to call it sign-up. And inside this we're going to say use-sign sign-up.typescript. And I'm going to say export const use-signupform like this. And this is a hook that is going to do the following. So first thing is we're gonna get the toast.

We're gonna use toast in here, literally. Okay, toast equal to use toast like this. And we're going to also create a state loading and set loading equal to use use state like this. And I'm also gonna just spin up my server again. So button run dev and let's refresh this real quick.

And this is actually gonna scream at me guys. I'm just gonna comment this out for now so we can kind of work with it. All of this. So just comment for now and then we'll get back to that. Okay So it looks like there's a lot more screaming happening.

So I'm just going to go back into the signup page.tsx and first import this component and then go into that component. And I'm just going to comment this stuff in here. And what is this saying? It needs some children in here. So okay, maybe we can just hide everything.

Okay, whatever. And now let's go continue with the signup hook, okay? So what do we need this hook for? So this hook is everything to do with clerk authentication, okay? So everything related to the signup, whether it's loading, the loading states, and you know, after the OTP, all that kind of stuff is in here.

So that's what we're writing here. And I'm also going to change this to boolean, and I'm going to set this to false, so it's easier to... I just want some types in there. And then we're going to say const sign up equal to use sign up. And this actually comes from clerk slash next.js and we also need isLoaded and setActive so go ahead and destructure those as well and then let's get router equal to use router which comes from nextNavigation and now we're going to use useFormHook and this is basically from react hook forms and we're gonna kind of use that with Zod to get some validation So const methods equal to use form and invoke that and in here we're gonna basically pass in all our types Okay, our schema.

So what we're gonna do is we're gonna go into schemas in here. We're gonna say auth.schema like this, .typescripts. And in here, we're gonna do the following. So we're gonna create first the user registration prop. That's what we need.

So export type user registration props, just like this. And let's go back to our component. Now in here we're going to import this like this and we're going to set the resolver to ZodResolver and we need to also import ZodResolver. It's going to scream for some reason. So go up top and you're going to manually import Zod resolver from hookforms resolvers slash Zod.

Okay and now go ahead and call this in here. We're going to invoke it and we're going to pass in our user registration prop. Oh sorry guys we have to put the schema not the prop in here. So let's go ahead and create another Zod resolve as schema. So go in here and go back into the same odd schema file right here and we're going to create that.

So go ahead use the github repository it's going to save you a bunch of time okay and this is what we're going to need. So we're going to say export const user registration schema which is of Zod type so go ahead and import that from Zod and this is equal to Z so basically the object Z object and that is going to create the following schema. So the first 1, the type here is z.string with minimum of 1 and we're just going to pass in full name, email, the confirmation email, confirm email, the password and confirm password. And then we also need the OTP So everything is in 1 single schema. Okay.

And as you can see in here, we can also have some finer, you know, like refinements on them, right? So right here we have password.refine, which means every time it's going to fire this And if this fails, it's going to say password should contain only alphabets and numbers. And you can do that for whatever you want, but some of these schemas already have stuff inbuilt into it, like as you can see here, message, incorrect email format, and you can do a bunch of really cool stuff with Zod, but this is how you can set some finer refinements on your schema. And now let's go back into our components and we just need to pass in that schema in here. So I'm going to go ahead and import the schema from our file and that should solve that error.

And We're also going to set a default value for 1 of the types in here. So this is actually the onboarding form, right? So we need to know who's using our platform. So we're going to set that to owner just by default, and then we're going to set the mode to onChange. Now the next function in here is basically responsible for generating an OTP, okay?

One-time password. So I'm going to put this in here and this is exactly what it looks like. So we're going to create an async function that takes in the email, password and on next and if isLoaded. And what is this? This is basically from up here.

Okay, so I see this error. I actually put it outside the brackets. You want to put it inside this hook, okay? So I just put it in there. And basically, we're checking if it is loaded.

If it's not loading, then we're just going to return. And we're going to try the following. So it's a try-catch statement in here because we're making an API request. So we're gonna say await signup.create. We're passing in the email and the password and we're gonna await for this response here.

Okay and we are sending the email code type. That means we need some sort of a code that is sent to the customer's email. Okay, so we're going to prepare this verification process and start it here basically. And then what is this onNext? This onNext is going to help us move to the next step, basically the next stage.

So that's why we have this function in here. And then finally we're just throwing up a toast if something happened wrong or there was some error. And finally we're gonna need a handle submit function and this is what the handle submit does, okay? Don't worry about it, don't get overwhelmed, I'm gonna explain. So we're gonna get from these methods basically and let's see where that what's coming from.

Okay it's coming from use form. So methods.handle submit, it's a function that we can attach. So we're just going to get that, invoke it in there, and then we're going to pass in an async callback function. Okay, so that has the values and the values are going to be of this type. So all of these.

And we're going to check if his loading is true if it's not that we're going to return and then we're going to make the following request here. So we're going to first set is loading to true here. Then we're going to await signup.attempt this email address verification and we're going to pass in the value.otp. So the OTP number that we got, we're going to pass it in here. And if the complete signup status was not complete, something went wrong, we're just going to show that message.

And if not, if it was completed, then we're going to check to make sure that signup.createdUserID is not equal to true. And if that's the case, we're just going to return. And then finally we're going to register right here. So onCompleteUserRegistration is a function that we're going to create right now. So go into your actions, your actions folder right here.

We're going to create an auth folder and Inside that we're going to create an index.ts file and inside this we're going to create that action. And what does that action look like? Very simple, it's an async function of course. So up top, because this is a server action, we have to use a use server like this and this is going to need the following. So we're going to need the full name, the clerk ID and the type, okay?

And this is all we're gonna do in here. We're gonna say await client, which actually comes from Prisma clients, which we created in our lib folder. So go ahead and import that. And we're gonna say user.create. So we're gonna try to create this user in here with the following data with their full name, their clerk ID, a type, with the subscription set to, you know, nothing in here.

And we're going to also retrieve their full name, ID and the type. And then finally, if registered, good, just return 200. If not, return 400. Very simple. And now go ahead and import the server action and that should solve that error for you.

And now here we're going to check if the registered status is 200 and the user is registered in here. So we got some data back, if that's the case. Then we're going to set active in here. We're going to set the session to complete sign up dot create session ID. Okay, we're going to pass in this ID into that session so it remembers what's happening.

Then finally, we're going to set loading to true here and we're going to send them to the dashboard. So just to basically show that we're loading something Or I think we can change this to false, guys. It's supposed to be false here. Sorry about that. And then if register status is 400, so something went wrong, just show a toast message.

And then finally catch any other errors that we haven't caught in here. All right, awesome. Now that we have completed that, we can go ahead and import that useSignUp hook and then we can use it in here. So let's go back to our sign up form provider and we're gonna go ahead and import this again. So let's go ahead and uncomment everything and import your form provider.

Okay, and in here we're gonna pass in the methods and these methods are basically going to come in from that hook Okay, so let me make sure I also exported all that stuff. Alright guys, so we did not export my bad So just scroll to the bottom inside the use signup hook right here and in here is simply going to return everything okay. So we're going to say return methods the handle submit on generate OTP and loading and let's go back here and now we just have to use this hook in here. So we're going to say const methods handle submit loading and we're going to destructure it from use signup form. Go ahead and import that.

Alright awesome and now this is going to need the children so I'm going to go ahead and create that right now. Okay so we're going to need a form component like this and inside that form we're going to have a div and that div is going to have a special component called Loader that we're going to get to in just a second. So go into components and you're going to create a folder in here and just call this Loader and inside that create a file, call it index.tsx. And in here all we're going to do is we're going to just render a spinner component and the spinner is going to come from another component that we have. So inside components I'm just gonna say spinner.tsx and inside that an index.tsx as well.

Sorry this has to, this is the folder guys so go ahead and remove that and just have the index.tsx and hit yes for this. And go into github and just copy it okay it's just an svg that has a really cool animation it just turns around that's pretty much it okay so go copy that and paste it in here so go ahead and also import the loader but make sure you import it from the right folder and also verify your servers up and running. Okay, let's go ahead and refresh. Okay, looks good so far. And now remember, we need to go back into our page.

So let's go back in there and we need to import this provider. Okay, this component is imported and now I'm going to create a div with the following class names. I'm going to say flex flex dash column. I'm gonna say gap dash 3 and inside this I'm going to create another component and this component is called registration form step and I'm also going to quickly comment this out and I'm gonna create this component in just a second. So open your folder structure and let's go into components and go into the signup folder in here and we're going to create registration-step.tsx and in here go ahead and return a component and I'm just going to change the name to this.

So this is basically the form guys, the registration form, the sign up form. So what we need here first is React Hook forms, right? So I'm going to do the following. I'm going to import use form context and we're going to destructure a couple things from that. So we're going to get register, the form state to get all the errors and we also need set value.

And the next thing is we need to see which step we are on, right? So we're gonna get that from our hook that we just created, right? The use auth context hook and then we're gonna destructure the current step. After this, we're gonna create a state to store our OTP. I'm just going to import use state from React, just like this.

And then after this, I'm also going to have the type of the owner or whoever is trying to access our application, whether it is a student or an owner. Remember, we're trying to track some data, right? So let's create a state for that too called onUserType and we're going to set it to either 1 of the following which is owner or student and by default we're going to just have it set to owner. And then finally here we're going to set value so we're going to call this right here this 1 and we're going to set it to OTP basically like a default value. Now how are we going to render out the components?

Also guys I looked into this I don't think this is the default value I think there's something use form set okay field values all right I guess it's just the OTP just as a field value So I guess we're just setting that value. Okay, I think that's pretty much it. Alright, so after this, we need some way to show which step the user is on, right, or which step they are after submitting the form. So how do we do that? Well, we're going to do that through a switch statement.

So go ahead and create a switch just like this and inside this we're going to have the following case. So we're going to have case 1, case 2 and case 3. Okay, so there are 3 steps the user can basically be in and that's what we're going to render out here. So based on these steps we're going to return a specific component. So the first 1 is a type selection form, which is the form that the user would select to show whether they are an owner of a business or they're just a student trying to learn about the software.

And that component is gonna be like this. So we're gonna say return and it's called type selection form, okay? So go ahead, open up your folder structure and we're gonna create this form inside our forms folder So inside the signup folder go ahead and create a new file and call it type dash Selection dash form dot tsx and in here. I'm just gonna return a component and I'm gonna set this to the following name Okay, there we go. Just like that.

And now this component is going to take a bunch of props. I'm going to import the first 1 which is register, which comes from use form register, which comes from react hook forms. And also we need field values, which is a type here. So I'm just going to pass that in there as well and then the user type we only have owner and student so I'm going to pass both of this for now and then after that we're going to need the set state which is a set user type which is a react dispatch and I'm just going to pass in the following types in here as well And now go ahead and destructure all the values from here and now we can basically use it inside the component. So I see there is an error here, so let's go ahead and import this component first, okay?

And I think use auth context, there's 1 more error somewhere. So let's go ahead and try to solve that error. Okay, so this is a hook but we forgot to use use state inside that So I'm gonna go back into that component and go all the way to the top. Sorry guys, not use state It's use client. Sorry, so you have to change that to use client and let's see if that solves our problem.

Okay, and we also need to use Client in all the components that are client components, okay? So let's go ahead and do that as well. So inside Use Sign Up, I also put Use Client up top. And inside our form provider, since we're using a hook in here, and this is inside our sign up right in here, I'm going to say Use Client in here as well. Okay, awesome, and I think that solved our problem so let's go back into the form now.

So before we go in there I also want to import this. So go into the auth slash signup and I'm going to uncomment this component and import it so we can see something. Okay let's go back into this component and let's see. Okay so this also needs use clients. I'm gonna say use client up top and alright there we go nice and now you can click on the type selection form this component and we can continue this component in here.

So first thing is we're going to have an H2 tag. So I'm just going to create a React fragment and inside that I'm going to say H2 with the following class name and say, create an account. And after that, we're going to create a paragraph that says, tell us about yourself, What do you do? Let's tailor your experience. Okay, and we're going to need another component in here.

And this component is called user-type-card. So we're just creating a global component so that we can make use of it. Okay, inside this. Alright, so let's go ahead and import, create a component in here. And we're just going to call this user type card and make sure, I think we need to also convert this to a client component.

I'm going to say use client up top and this is going to have a bunch of props. Let's go ahead and import those props in here. So we're going to need the value, title, text and then we also need register to register this component, because it's a part of a form, right? We're creating our own custom components, so that's why we need this stuff. And then finally, we need a register, so I'm going to import this from React Hook Forms and this 1 as well.

And then we need the user, which is of 1 of these types. And then finally the React Dispatch function in here which can set that value. And finally, you guys know the drill, go ahead and kind of import all this stuff in here. Just like that. Awesome.

And now I'm going to go back into my component so I can import this new user type card. So in here I'm going to say user type card, import it and now I can pass in all the values that I need. And the first 1 I'm going to pass in is actually this which is register set to the register in here, the set user type, the user type, value, the title and the text. So this is the first 1 we want to show. So I'm going to go back into this component now so I can just render out everything we just created.

Okay, so the first thing we're going to need is the labels. I'm going to say label in here and I'm going to also import this and make sure you import it from components, okay? Not the Radix folder, so import it like that. And inside this we're going to need the Card component and the Card component is going to have the following class name. So we're going to import CN, I'm going to import this like this, and then we're going to say with full cursor pointer, user type equal value and border orange.

Now the reason why we don't see our colors here is because we haven't created these custom colors, right? So go into the GitHub repository and go into your Tailwind file. You're going to find a file in there. Just copy that. So it's basically in here, okay?

So let me see if I can show you. So let's go into that file, okay? So it's inside the root folder and Tailwind config, and you're gonna copy everything in here, just copy it, okay? All, I mean, really all we need is just this right here, but we're just gonna go ahead and copy everything from here. So go down, scroll all the way up, copy this, and replace whatever you have.

And that should solve your problem here, okay? Great job. And now this card is gonna have the card content as a first component, with flex justified between and padding of 2. And then we're gonna have a div inside this component here and this div will also have another card inside this that says username with another CN in here so go ahead pause this and just type all these styling stuff and here we're gonna create another component called it's not a component but this 1 comes from another library. And this is basically an icon that comes with ShadZN UI.

It comes through Lucid React. So I'm going to go ahead and import this from Lucid React, just like that. And there you go. Awesome. So all we're doing here is if the user type is equal to the value that was selected, then we're setting the text to orange or we're setting it to gray.

Same thing here as well. So the CN is basically going to help us dynamically create styles. And now scroll down here after this card component, you're just going to say div and you're going to put in the card description like this. I'm just going to import this component and then we're going to pass in the title and the text. All right awesome and what I'm going to do here guys, I'm just going to copy this from here right just copy this and I'm also going to replace this so that also shows as orange.

Okay I guess this looks nicer right or maybe not. I don't know let me change this 1 so I'm going to take this out and I'm just going to say text dash black. Let's just see what this does. Okay I think this 1 looks slightly better so What I'll do is I'll keep this this way or maybe it's just okay I think it's it's not that good so what I'm going to do is I'm just going to remove this and just set it to text this color right here and I'm going to remove this 1 as well and just set it to the same color okay alright this 1 looks slightly better Maybe you can change 1 of them. Guys, come on, you know how to do CSS, okay?

Just change whatever you want. All right, let's move on. So scroll down after this 1, right here. We're gonna create another div, and this div is gonna have 1 more div in here. That's gonna have the following class name.

So the class name is gonna be CN, and we're just gonna pass this. And we're basically doing the same thing here but what is this? Well this is basically this icon here that shows up it's not really an icon just an indicating that this is the option the user just selected. Okay so this was bothering me still okay so I went up here and I just changed this to text gray 400. Alright, please don't pick on me.

So yeah, just do that. Just change it to text gray 400. That looks so much better. Guy, I was going crazy. And maybe for this background peach, I might change this to the text orange as well.

Let's just see what this looks like. Sorry, not text orange, but border. Or maybe, let's see. Okay, just BG orange. Okay, that looks better as well and then finally we're gonna need an input component right to keep track of this stuff so after this div guys right here gonna go into this div right you're gonna hit enter and you're gonna say input Let's go ahead and first just import that component as well.

We're going to pass in, we're going to destructure all the props that come from register. We're going to put it in here and then we're going to say onChange is set the user type to that specific value. So that's how this value changes here and that's how everything changes. Okay, then we're going to pass in the value, ID, class name and type. And we are done.

So now if you expand this, there you go, looks awesome. And on this, it also looks great. Now let's go back into our component and we just need to duplicate this and create another option. So what I'm going to do here is first I'm going to close this, create a closing tag, and I'm going to create another option here. So if I click through this, all right, great, everything's working perfectly.

And maybe I might want to also turn this off. So let's go back into that component. So I see here, okay, change this to transparent. All right, that's better. So this is now a custom component guys.

It is literally a custom component that we wired up with React Hook Form. So if you're ever confused and you don't know how to create a custom component, I'm not talking about just an input, but this is something that we built by ourselves, right? This is exactly how to do that. So now that we have this done, we also have to show an indicator at the bottom that shows which step the user is on, right? So let's go ahead and create that as well.

So go back into sign up page.tsx, and I'm just going to change this to a closed component and I'm going to create another component in here and this component is called button handler. Okay, and we're going to create this in just a second. So open up your folder structure and scroll to sign up which is inside your components folder so right in here and we're going to create this component it's called button-handlers.tsx and in here just go ahead and return a component like this and just rename it. So since this is going to change we also need this to be a client component so go ahead and say use client and since this is screaming at me I'm going to go ahead and also import this component just like this. And now I can go back in here.

Okay, awesome. Now the first thing I need is to see which step I'm on, right? So we're going to get that from the hook here. So we're going to say useAuthContextHook and we're going to get the current step and the setCurrentStep as well. And then we also need a form context because we're going to keep track of all this stuff.

So let's go in here and we're going to say form state, get field state and get values. And then we also need to use the use sign up form to get the OTP. So we're going to do this in here. And let's also import this. And then we're just going to get a bunch of field states in here.

So I'm gonna say isDirty, isName, isEmail and isPassword. Okay so we're just gonna destructure this right here and we're just gonna invoke this and pass in name of the fields basically. Alright just a quick correction guys sorry this is not the indicator at the bottom. This is just a submit button, okay? So we need all this data to basically verify that the user has entered everything before we save it.

So that's why we're creating this button handler here, okay? It's not the highlight bar at the bottom. So first thing is we're gonna say if the current step is number 3, then we have to show this button right here. So I'm gonna import the button component and we also have a link in here. So I'm gonna import this link as well and this is what it looks like.

So since we are not on the third page, right, we're not gonna see this component. So let's go ahead and render out what we're going to see by default, which is this option right here. So I'm going to remove this and I'm going to say return in udiv with the following class names and it's just a button that's going to have full width and We're going to have an on click in here, which is basically going to change the step that we're on. And then we're going to have continue inside it. And then we're just going to say if they already have an account, here's the link to sign in.

Okay, and the href is pointing towards this 1 right here, this route. And finally, if we are on step 2, this is what we have to return, which is a button like this that has type submit with full and we're just dynamically passing in something in here, okay? So we're just checking to make sure that all the variables, all the information that we need, which is the name, email and password exist. Okay and if it does only then are we passing the on click handler on this button. Alright that's literally what we're doing here.

So if this fails this will not kind of use the spread operator and put this object onto this. I hope that makes sense and again we're just rendering this already have an account, you can sign in in here. Okay, now I'm going to go back into my sign up component and I'm going to create that highlight bar now. Alright, so after this component, I'm going to say highlight bar like this and I'm going to go ahead and create this component. So open up your folder structure, scroll down to components, and go into the signup folder.

And in here we're going to say highlight-bar.tsx and go ahead and just return a component and just rename the component. And now this is going to scream at me of course. I'm going to go back and also import this component like this. Now we're going to change this to use client and the reason why we're doing this is because we are going to need a hook in here so we can get the current step, right? That's how we can change the color of the step the user is on.

So that's why we need to make this a client component. So I'm going to go ahead and import the use auth context token here and then I'm going to return all the components that we need. Okay so in here I'm going to return this div right here and I'm also going to import CN. Okay all right and that's pretty much it. So we're saying if the current step is 1 then make this orange or just make this platinum and the same thing for the second and the third as well.

So if I hit continue here, as you can see, now the color changes. How awesome is that? So now that we have created the step 1, we also have to create step 2 and step 3, right? So go into the registration form step and we just have to complete all the other cases as well. So for this 1, I'm going to return a detail form and we're going to create this component.

So what we're going to do is we're actually going to dynamically import this form just for performance. So let's go up here and I'm gonna say const detail form like this is equal to dynamic import and then we're gonna import a Component dynamically so only when this component is needed. It's brought into the front end. Okay, so that's very performant So I'm gonna Go ahead and import that like this. And in here, inside the signup, I'm just going to create another route like this, and I'm going to call this account details form dot tsx.

So go ahead and return a component like this, and we're going to call this account details form. And this is going to take the following props. So the first thing is it's going to need register, so I'm going to pass that in and also import these values just like this. And the next thing is it's also going to need the errors. So I'm going to pass in all the errors which come from React Hook forms, and this is a type here so make sure you import that as well.

And this component is going to be a React fragment that's going to have an H2 tag just like this and let's see if we can go to the next page. Okay, and we're going to have this in here and then after this we're going to return a paragraph tag that says enter your email and password and after this we're going to create a really cool component. This component is called Form Generator. So all you have to do is you have to pass in this component like this. And based on the different type of form elements you have, it's going to dynamically generate a form for you.

So this way we don't have to create hundreds of forms because last time we had to build a lot of forms. So this kind of saves us some time. So go into the GitHub, okay? So in the GitHub, you're going to find a Constance folder and inside the Constance folder, you're going to find a file in here that's called forms.typescript. So go ahead and create this file in here and you can copy everything if you like, but I'm just going to copy it 1 by 1.

And we're going to say user registration form and we're going to pass in these props. And to create these props, we're going to say type user registration props is going to have an ID, a type, input type, options, labels, the placeholder and the name. So we need all of these things. And as you can see, this literally does everything. So we have confirm password, the name, the type of it, everything is in here.

So it's going to dynamically render that component. So let's go ahead and import this from our constants folder and now let's build this component. So inside the forms component inside components, you're going to create another folder and we're going to call this folder form-generator and inside this just say index.tsx. And in this component we're basically going to have a basic switch statement that's going to look at the input type and based on the input type it's going to render an input field, a select field, text area or whatever you want. If any radio button you can expand on that but this is what we're going to be building.

So the first thing we need here is we're going to return a component like this and we're going to call it Form Generator. And now this is going to take some props. So we need the type which is text, email or password. The input type is select input and text area. We're going to say options in here with the label placeholder and the register is going to be use form register.

So go ahead and import that as well and then errors here we're going to import from field errors and we're going to pass in field values and then we're going to have lines and form. And in here go ahead and destructure all these values as well. Awesome, just like that. And now I'm just going to create the switch statement and give the following cases. So first thing is we have inputs and since this is showing an error here, I'm just going to say input type like this.

Okay, something is wrong here. I think it's because of my default. Okay, I think it's because of this. All right, that should solve that. And also maybe because, oh, okay, I forgot to put this for default.

All right, there we go. So the first thing is we're going to need the input for the standard input. So I'm going to import the label from our components folder. And I'm also going to import the input component. And then we finally need the error message component.

And this error message component actually comes from hook forms error message, which I think we're gonna need here is your next step of action This will cause a behavioral change. This is so far been the best community I've ever joined I've recently got 3 clients after 1 month. We're gonna literally go from start to finish as much as possible. We're gonna try to give you as much value as you need. I got 3 job offers.

3. I really see the value. And this is something very different from a lot of people. What ended up happening was I got over 7 to 10 messages. When you're in this course, I have the feeling that you're my colleague and we're working together on a project and this is really interesting.

Today we're focusing on the back end side. So here's the algorithm that runs everything. This First statement is the most important part of the call. This determines whether you close on the call or they go home, think, dream, sleep on it and then come back to you. When you start to question everything around you, your brain will literally create solutions.

Pull back and restate again. Go back. Let's go. This is the upward challenge. Yesterday I made like 7K.

You run a SaaS company. Selling the website, but making the subscription fee. That's right, G. Good point, G. Good point, G.

Thank you so much, WebProtegies. I closed a thousand dollar deal. Something that you can not get in textbooks. Just join the program, it will transform your life too. Yeah, so go ahead and open up your terminal because we're going to need to install this package.

Okay, I thought forms from a ShadZion UI would actually install this for us, but it didn't do that. So go ahead, quit the terminal. We're going to say bun add and go ahead and paste this. Okay, I'm going to restart this here. I'm going to say bun add and paste it like this.

Okay, Now go ahead and hit enter and there you go. Now we just finished rendering the input so we also have to render for select components and text area, okay? So let's also go ahead and do that. So after this label guys, right here we're gonna do the following. We're gonna say case select and we're gonna return a label like this and we're going to have the HTML4 set to select dash label and we're going to pass in the if label exists, we're going to pass it in here and then we're going to say select component like this.

We're going to put select elements, we're going to say form equal the form that we get and then we're going to pass in an ID and we're going to use the spread operator to register this element and then after that we're going to check the options here, right? So if options exist, right, .lend, if that exists then we're going to map over it and for each option we're going to render out an option element. And then finally, we're also returning an error message for this as well. Okay, very simple. And after this, let's finally do the text area.

So I'm going to go ahead and say the following. We're going to say text area for the case. We're going to return a label. We're going to put the component. We're going to put the error message.

Okay, it's the same pattern guys. You see we have label, elements, and the error message. So the exact same thing. So if you want to build another component like a checkbox, take it up as a challenge and see if you can build that checkbox component. Okay, but for now we're just going to skip over that and we're just going to say default and we're going to return a React Fragment right here.

Okay, now that we're done with this, let's go back into our form, the account details form and let's go ahead and import this form generator component. So these 2 variables are also needed to be passed in as props. So I'm just going to go ahead and destructure them from here and now I can pass them down. Now let's also do bunrun dev and let's see what our application looks like. So now when I go to the next page, Okay, so it seems to be some sort of error.

It says register is not a function. So let's see what's going on. Okay, there's a register step that has some sort of error here. Maybe it's something to do with this. Alright, let me figure it out guys.

Just give me a second. Ah, okay, right here. So inside this component, inside the registration step, it looks like we actually did not pass in any of those props. So go ahead and say errors equal to errors like this. And we also have to pass in register.

So I'm going to say register equal register. Nice. And now we can also just make this a closing tag. Alright, awesome. So now if we hit continue, there we go.

How awesome does that look? So it also, it already looks like it knows my email. Alright, not creepy at all. Okay, and for case number 3, we're going to return the OTP form. Okay, So the OTP form, I'm just going to write it like this, which is OTP return OTP form, and we're going to go ahead and build this component.

So inside this signup section, you're going to create another file in here, you're going to say OTP form, like this, and we're going to say .tsx, and inside this just go ahead and return a component from here. I'm going to say tsrefce and I'm just going to change that name. And we're also going to dynamically import this OTP form. Okay so inside our registration component in here we're going to say const OTP form equal dynamic import and we're going to import this OTP form from there. So at the bottom here it looks like it's throwing some errors and that's because you know this is not taking anything.

Let me see what we got to fix here. Yeah so there are some props that we need right. The first 1 is set OTP which is just a dispatch and then we also need the on OTP. And I'm also going to quickly destructure it from here, and I'm going to remove this and return a React fragment. Now inside this code, we're going to return an H2 tag.

Let me see if I can actually see that. Okay, so I'm just going to put my data in here and I also have to put this in here and that should solve the problem but it looks like something's wrong. Let's see. Okay, I just need to change that. All right, there we go.

And I'm just going to say, prodigies testing like this. Okay, let's hit continue and let's just see what happens. Okay, nothing happens. I think that's because we haven't done any submission. Alright, let me see you guys what's happening.

Okay, so I'm going to try to debug this on camera so you guys can see how I'm doing it. So when I hit continue, right, I just try to place an alert message inside the on generate OTP action right here and I realize that nothing's happening so something is failing here and it's an error and the other thing that I realized is we have a toast message so if there is an error happening the toast message should show So go ahead take a second just see if you can you know guess because we have done this in every single project for a toast to show for the toast component what do I need? Go ahead pause this video and give it a shot. Okay hopefully you got it right and if you didn't no problem this is exactly what you need to do. So you're going to go into your root layout file which is in here and for a Toast message to work you actually have to have some sort of a Toast component in here.

Okay so that's why we're not seeing any error. So I'm going to go ahead and just import toaster in here. So inside the body tag after the children component, I'm going to say toaster and I'm going to import it from sonar or actually I'm going to import the 1 from ui toaster. I think that one's what we are using here and now let's see if this works. Let's see the error that's happening.

So I'm just going to say Prodigy's testing. Okay and I'm gonna hit continue. So password has been found in an online data breach. Oh god that's horrible. Alright so I'm gonna try a new password and let's see.

Before we hit enter, I just want to also make sure we have something running in here, right? So I'm going to look at my components. Okay, so we have registration form set up. I have something called OTP form, which comes from here. And this has nothing.

So what I'm going to do is I think since everything is working, I'm just going to go ahead and continue this component. So after the H2, we're going to have a paragraph right here and after the paragraph, I'm going to have a div and inside that, I'm going to have the OTP input form. So this OTP input is a new component in ShadZee and UI. So I'm just going to import that. Okay, I think we actually kind of made this like a custom component.

So here's what I'm going to do guys. I'm actually going to create a custom version of this, okay? So inside your components folder, let's expand this a little bit so you guys can see. I'm going to create a component in here and I'm going to call this OTP and inside that I'm going to create an index.tsx file and I'm going to return a component like this and rename the name. And this component is going to take in 2 props.

The first 1 is the OTP which is a string and then it's also going to need a dispatch function. And let's go ahead and quickly destructure all the values that we need. And let's go ahead and remove this. And we're going to return an input OTP component. And this comes from UI input OTP.

And this is going to need a bunch of input slots. So we need to create that in here. So very simple in here, just go ahead and say div flex gap 3 and we're going to create a div for each of these and we're going to say input OTP slot, which comes from UI input OTP and that's it. Okay, so this component is pretty much set. We also have to make sure we import it.

So I'm going to go ahead and import this component like this. Oops, sorry guys. This actually comes from component OTP. Alright, and that's about it. So now if I hit continue, the next page, fingers crossed, should have the OTP component.

Okay, so go ahead, hit continue. Okay, so I see the message here. Awesome, there we go. So I should receive an email now and then with the help of that OTP, I should be able to sign in. Okay, so I'm gonna go ahead and paste this in here and if I hit the create account, well let's see what happens because I know we already have the handler set so let's just give it a shot.

Awesome! We see 404, that's because we haven't created the dashboard page. So great job guys, we already have our auth sorted out and this is why clerk is so powerful. Like with just a few changes here and there, we were able to create a full authentication system. How amazing is that?

So if you're not signed in and you refresh the page, you're going to see this error. The default export is not a React component in the page auth slash sign in. So I'd like for you to take this up as a challenge. Go ahead, pause this video and try to guess. Why am I seeing this error?

And if you don't know how to do it, I'm going to show you exactly how to do it. Okay, hopefully you got the answer. If not, this is the answer. So if you notice inside your auth folder, you have a sign up and sign in component, right? You have a folder in here, but if you look at the sign up page.tsx, you're going to see a default exported component, right?

This is a function here and it's being exported, okay? But if you look at the sign in routes, you're going to notice there's nothing in there. And that's why you're seeing this error. So the reason why I'm bringing this up as a challenge is someone in the Discord brought this up as a question. And I was really embarrassed for that person.

But guys, this is basic react. OK, I don't have all the time in the world to sit and explain all these things. If you want to learn more, you can sign up to Prodigy's University and I will help you learn. I will help you understand every single thing from start to finish. Okay, every Friday.

In fact, we have 3 weekly calls and on Friday, I'm going to break down the entire architecture of the application in detail all the way from design, the Figma, the mock-ups, my ideation process, all the way to react and in that place, in that situation, it's the perfect opportunity to bring up questions like this, Okay? But if you're trying to do research on your own but you don't know the answer to this very simple question, this is all you have to do. Copy it, paste it, that's all you have to do. Okay? You don't have to bring it to the discord and ping people.

If you did not research, see, if you did not research it, don't ask in the Discord. Okay? This is something that I want you to learn. It's a, you have to make this as a habit. Okay?

It's part of learning. You have to do your research first. Okay? But if you want to learn from me and my expert team and you want to get the right guidance, the exact answer so that you don't have to research and you can literally ask questions 24-7, then join Prodigy's University. It's extremely affordable.

Okay, let's move on. So inside this component, all I'm going to do is I'm just going to paste this in here and we're going to need, so this is a div here, another div inside it, and we're going to have a special component which is a sign-in form provider. So let's go ahead and import this. Alright guys, sorry about that. We also have to create the sign-in form provider first, right?

So go ahead and scroll to your components and inside your components you're going to find forms and inside that create a folder called sign-in. And inside that folder, I'm going to create a form-provider.tsx. And inside this, I'm going to say use clients up top. And then I'm just going to return a component. And this is going to be renamed to sign in form provider.

Now this is going to accept 1 prop and that is a children prop. And I'm also going to destructure it from here. And we're going to need a hook in here. So what we're going to do is let's go into our hooks folder. And inside the hooks folder, we're going to create another folder in here.

We're going to call it sign-in and inside this use-sign-in.typescript. And this is pretty much exactly the same as the other provider we built in here. Right. It's pretty much the same. So go ahead and build this out.

I'm just going to paste this in here but you can go into github and copy it if you'd like. Okay but this is literally the same thing guys. Let me break it down for you. Okay so we have the use sign-in hook in here okay from clerk and that's going to give us a bunch of properties that we need. We're also going to have a loading state, we're going to use router, we have toast, and this is from use form so we're just getting some methods from that, and we set the mode to on change, okay?

And we have a handle submits and this handle submit basically gets access to the values. If you know if we're not loading then we return here and here we're just going to say set loading to true. And then we're going to finally create this await statement here because we're going to make an API request. We're going to say sign in dot create pass in the identifier and the password. Okay.

And the identifier here is basically our email. And then if the status is completed, then we're going to wait. We're going to say, oh, wait, set active. And then we're going to just show a toast message. And this set active, if you're wondering where it's coming from, it's just part of clerk.

Okay. So just copy this. It's part of clerk. It's part of the API. Okay.

That's how you set the session. And then after that, we're just gonna push the user to the dashboard page. And finally, you guys know the drill. If there's an error, just show this error message, set loading to false, and you just wanna, you know, probably show a toast with the description. Now the next thing we're gonna need is we're gonna need 2 schemas here.

So let's go ahead and create this. So inside your schemas folder, inside ought schema, not Prisma schema, okay, this is inside your root folder, right? Inside this we're going to create that form schema. So I'm going to scroll to the bottom, it's a very simple schema. We're just going to say user log in schema is equal to user log in props.

And this user log in props is pretty much like this, which is email and password and it's z.object. This is how you create a Zod schema, right? Remember? So you have to say email with string and email and you want to say the messages, you do not enter a valid email. And the password is going to be of type string with minimum character of 8 and max of 64 and just passing some values in here to show some error messages.

Now let's go back and now this error should be resolved. Okay, great job. Now we also need to import this. I'm going to close this here and inside our sign-in form provider we're going to need a hook in here. Okay so remember that provider we just created right that's going to also give us access to a hook so let's go ahead and import that hook.

Awesome now let's remove this here and we're going to say authContextProvider like this and inside this authContextProvider we're going to say formProvider and this formProvider comes from React Forms. I'm just going to import that and all our methods have to be passed into this. Okay, using the spread operator and then let's say form and this is going to have an on submit function which comes from here right remember the use sign in form that we created this handle submit right here essentially just exporting it at the bottom so we can reuse that for our sign in okay and then inside this We're just going to have a div and we're going to say loader like this from components loader and we're just going to pass in the children components inside this loader. Okay, nice. Now go ahead and hit X here and now you can import the sign-in form provider.

Great job. Now that we have this provider, we also need to create our login form, right? So let's go ahead and do that. So scroll down to components and you're going to find the sign-in in here, right? Inside your form, go ahead and say login-form.tsx and essentially we're just looping over our constants that we're going to create in just a second and we're just showing something.

So first thing is make this use client and I'm just going to create a component in here and I'm going to call this login form like this and the first thing we need here is a hook. So that's why I said use client and this hook is called use form context. So go ahead and import that from react hook forms. And this is going to be a react fragment. So we already completed the signup form.

So go ahead and take this up as a second challenge. So pause this video and try to create the different properties that you would need in here, right? So go into your constant file. Essentially, you'd have to go into your constant file and I don't know if I go there, I don't have the answers in there, but I would like for you to try, okay? So go in there and create the user login form, you know, the value in there, a variable, And then you're essentially just going to map over that and return the form generator component.

Very similar to the signup page, okay? So go ahead, pause this video, give it a shot. And if you don't know how to do it, don't worry. I'm going to show you exactly how to do it. Okay, great job.

Hopefully you got it right, but let's continue. You first need to put a heading here, right? Of course, and I'm also going to put a paragraph that says you will receive a one-time password and then we're just going to put the user login form like this because we're going to loop over this variable, right? And we're also going to create this in just a second, but first let me just import the form generator. And now I'm going to go into my constants file.

So if you didn't do this, this is exactly what you need to do. Okay. For some of you that don't see these errors because you copied the whole constant file from the GitHub, good job. Okay. That way you don't have to build it and waste your time.

But very simple. It's user login form and user registration props. It's an array of them. And it's just this object here with ID 1 inputs, enter your email name and a type and same thing for password. And now let's go back and quickly import this and that should solve our errors.

Great job. Now I'm going to go back into the sign in page because you know I need to import the login form and I'm going to import that form in here and that should solve my errors. Great job guys. So now if I click on create 1 it should take me to the create page. Alright and if I want to sign in it should take me to the sign in page.

So check it out guys, this is the design for our landing page. How amazing does this look? And by the way, if you missed last week's deep dive session in Prodigy's University, we broke down every single thing, not just the architecture and the code, We went above and beyond. We showed you how to create beautiful mockups exactly like this. This is literally every single page in Corina AI inside Figma.

We showed you how to build flows, how to build components, and check this out guys, we also built a little component library in here. And we also taught you some good UI UX principles like atomic design and atomic structure. And we also showed you how to build prototypes between component variants. So for example, you can do something like this. With the knowledge you get from all this stuff, you can use this to create interactive mockups or MVPs and you can use this to convince all your employers and maybe your partners or whoever you want.

Guys, this is the future of education where you see everything in real time. You get the opportunity to ask questions from some of the best in the field, which no course on earth would give you. So go ahead and join, the link is in the description because this Friday we're gonna break down the next project. We're gonna start all the way from scratch in live deep dive calls. We're gonna give you access to the premium code base and this is by the way this is the code base that we don't share on YouTube because it has code comments and guides and all that kind of stuff.

Every single thing you need and we also have weekly hangouts like we chill and just have coffee. How awesome is that? And there's also 1 mentorship session with me where I teach you some stuff like how to get clients, how to start your agency literally for 0 dollars. I'll teach you the sales strategies, how to get clients, how to close them, every single thing you need, guys. So go ahead.

The link is in the description. Click on that join and I'll see you in there. All right, check this out. You are gonna be impressed. So with the way we built these designs, we can convert this component here into a React component in probably 15 seconds.

Okay, so let's go. So first thing you wanna do is open a plugin here and just say Figma to React. You're gonna find builder.io, click on that. We're gonna say generate code. Boom, the code is done and go ahead and hit generate code again and you're set.

That's it. Now I'm going to go ahead and copy this code here. Going to go into our components folder and say navbar, create an index.tsx and in here I'm going to paste this code. All right I think I already crossed 15 seconds but I gave it a shot. Okay, and now I need to change the source of course, so let's go ahead and get that link.

So I'm going to remove everything in here and I'm just going to say backslash images slash logo dot png. And by the way guys, if you have a bunch of stuff in your homepage, you can kind of remove that. Actually, it's fine. Let's just continue. Okay.

We'll get to that in just a second. So yeah, this is just a component we created in index.tsx and I'm just going to call this navbar. So navbar, just like this. And also I'm just going to export default nav bar. So next thing is I don't like this image so I'm going to use the next image like this, the component.

Now this is going to scream for some stuff. So since I already have this here, I'm just going to go in there and copy that. So I'm going to go into app, into sign up, I think it's inside layout. Okay, so it's inside layout.tsx and I'm just going to copy this image component. Now go back in here and just replace this.

Okay, so now I just navigated back to localhost 3000 and now I'm just going to import this component. So go into your layout.tsx the 1 in the root. Okay, just wanted to make sure we have all the stuff here. Yeah, go into page.tsx because this is gonna be the main landing page and in here I'm just gonna import the navbar. Okay and I see something crazy in here, but that's fine.

Let's see if we can change it. Well, 15 seconds. What do you expect? Okay, so I see Karina AI here. So maybe I just don't need this.

Okay, that sort of fixes it, I guess. And we'll change this to 24 pixels, or that's too small. Let's just make it 100. Okay, that's much better. And I don't like this being bold, so I'm just going to change that as well.

So in this div here, I'm just going to say font-normal, okay, and that should fix that for you. So also, very quick thing, this is not semantic, okay? So this has to be a UL tag like this and you have to change each of these to an LI and you guys, I think you guys know we have done this a million times. So I'm just going to change this to LI tag in here and this will have to be a link tag. Okay, the 1 that comes from Next.js here.

Next link just like this And you can put it inside that. But for now, we're not gonna have all these links. It's a waste of time. So I'm just gonna keep it like this. Okay, so for some reason this disappeared and I don't know why.

So I'm just gonna remove this and say button from UI button. And I'm just gonna say sign up. Or if you look at the mockup it says free trial. So I'm just going to say free trial and inside the class names I'm going to pass in BG-orange and that should be good to go. Yeah.

And you can also, you know, set some padding. Let's probably set something in here. So I just set it to padding X of 8. And now what we're going to do here is for this we're just going to set hidden and MD set to flex and I'm going to remove this and there we go we have a nav bar that works. Well sort of but it's 15 seconds so we're done with that.

It's way past 15 seconds all right. So now if you look at the Figma mockups, you're going to see that the font we used here is something else. So I want this font in Next.js. So we did this a million times, pause this video and try to guess how do you change the font in Next.js. Okay, Hopefully you got it right.

If not, no problem. This is what you have to do. So go into your root layout.tsx page and you're going to notice they have the fonts and all that kind of stuff in here. We just need to change it here. So first thing I'm going to do is I don't want this font anymore.

It's ugly. So I'm going to use plus whatever this is sans. This is my favorite font now and we're going to change this here to the following And of course, you're going to see some weird error here. So just change this as well So we're going to change it to this variable dot class name jakarta. Guess that's how you pronounce it I don't know, But there you go.

The font looks so nice. I love this font. Okay, so the next thing I want is theming. I want some dark and light mode, whatever that is. So how do I do that?

Well, this is exactly what we need to do. So go into Shadsy and UI. I'm going to quit my server. I'm going to copy the bun command here because I'm using bun. I'm going to paste it and hit enter.

Now it's giving me the code, so I'm going to copy this and it's saying put it in components, but it doesn't matter. You can put it wherever you want. So maybe you can put it in context, I guess. So I think a folder called provider would be better, but just for this video, I'm just going to do this for now. So I'm just going to say theme-provider.tsx.

And I'm just going to paste the code they asked me to paste. It's very simple. It's just a provider, guys. It wraps your entire application in a provider, and then your entire app gets access to some properties, which we call the value. And then with the help of that value, we see whether it's dark mode or light mode and under the hood Tailwind does all the magic.

Okay, and now go into your layout page because you see right here, they're saying you got to wrap your components in it. So root layout page and then in here, we're gonna say the following. So you're gonna say theme provider and I'm just going to import it from the context slash theme provider and I'm also going to remove this toaster because I'm going to put the toaster inside the theme provider and I put double children so remove this as well and let's say bun run dev and spin up the browser. Awesome. Great job so far guys.

Alright guys, so the first thing we need is a section for all of this stuff so that we can put these components inside that section, okay? So I'm going to go into my code, into the page.tsx and right below the nav bar, I'm going to say section like this. And this section is going to have a div tag just to make sure to use the same styling and inside this div the first thing we're going to have is this little widget component or more like a chip component I think so I'm just going to say span and set text to orange okay So if you don't know how to get this background, we're going to say background orange divided by 20. So it's kind of like the opacity. And then the next thing we need is the image.

So the image is inside images slash Corina AI logo dot PNG and we're going to set it to object contain with a max width of large. So this way when you extend it, it's just going to be this size. So you can change as you like. I'm just putting this in here just for now. And after this, we're going to put a paragraph to essentially create this part.

And then we need a button that says start for free. And now for This image here, so this little, I guess the phone image, it's basically a frame, guys. So I used a plugin here. If you don't know what, I mean, how to make this work, there's a plugin called a little bit mockup, okay? You use this plugin, it essentially gives you a phone and you get to select a bunch of different options.

And I selected the iPhone and I dragged our chat bot, which is a frame, and just simply put it inside here, okay? So if you're ever having doubts on how to create things like this, you can essentially just use this plugin to make this work. So after this button, we're gonna put an image and that phone will be there inside your images folder as well. So this is how we can render that image out. All right, done.

Very simple landing page. The next section is the pricing cards, which is very important. So let's go ahead and build that out. So For the pricing card, I'm going to say section, and inside the section, I'm going to have an H2. So if you look at what that looks like, it just says choose what fits you right.

And I'm going to have a paragraph right after this H2 that just shows some stuff here, and maybe I'll just remove this break and set the max width to probably large. Let's see what this does. Okay, that's much better. And next we have to render out all the pricing cards. I'm gonna create a div in here and inside this div, I'm going to render out a new component, or I mean, we can just build it out in here.

We don't have to create component, But I would encourage you do that but for now I'm just going to loop over the pricing cards Just map over them and then return a component for it So if you don't have this here already go ahead and go to your constants folder and go into landing page type script So if you don't have this make sure you create a landing page.typescript, because I just pasted it in here. And essentially, go into the GitHub and copy this code, okay? Because I just pasted it in here. And essentially, go into the GitHub and copy this code. You want to sit and type this, you'll be here until the end of 2026, okay?

So that's why I just copied it and pasted it in here. Just copy this, you're going to need this. It just has the title, description, the price, everything for each and every plan and all we have to do is just loop over the data. So I'm going to say pricing card.map. So let me just solve this error real quick.

Okay, pricing cards.map and inside this I have to return a JSX element. So I'm going to return the card component and we're going to pass in the key and the key is going to be the card dot. Okay, oops, I also had to import that. So we're going to say card dot and maybe just put the title and this card is going to have a class name but this class name is going to be CLSX and we're gonna say if the card.title is unlimited because if you look in here we have the unlimited, starter and plus plan. So if it's equal to unlimited you can just you know show some special type of border and I'm just gonna call it border primary so a different color.

So first thing we need is the header. So I'm going to say card header, it's a new component. So let's go ahead and import this stuff. And all of this comes from ShadZion UI. And because we installed all our components, we don't have to go back and forth into ShadZion to make this work.

So that's it. Because we were looping or iterating over the pricing cards, we just have to do it once and we're going to show all the cards in the page. So we have the header with the title and the description. Great, you can already see it form right here. It looks great already.

Finally, the card content. So after the header, I want to say card content like this, and I'm going to import this component as well. It's just going to have the card price and the duration, so per month because as a subscription. And after the content, we're going to create the footer. So I'm going to just say card footer like this and go ahead and import the card footer.

And this card footer is first going to have a div okay and this div is all the features so essentially all these things right and if you go into the pricing cards you can actually see all of this in here so you see it's an array with a bunch of features right so let's go back in here and as you can see we're looping over the pricing cards dot find where the title is equal to the card title. So we're just getting that and then we're getting the features and we're looping over that and just rendering them out here. Or actually, sorry, we don't even have to do this. We can just say card dot features and that will also render the same result. And after this div, I'm just going to have a link here and you can change this to dashboard like this and This is gonna be a challenge for you Not right now later But what I'm gonna do is I went up here and I just said work in progress flag and I said challenge to set up Billing card this way I remember okay So if you are pausing on something or you're just leaving something where it is, make sure to put a flag like this.

Okay? We do this all the time and it really helps debug, you know, down the line. So when we come to this point and you need to, you know, figure out how to do this, I'll put a link in the description. Once you're done with this video, you can take a look at that challenge. It's basically our last video where we showed you how to do that.

Okay. But awesome. Let's proceed now. As we all know, the driving source for any SaaS is revenue. And as entrepreneurs, We need to do everything in our path to increase conversions on our platform.

And today we're going to be using a blazing fast cloud hosting platform that's going to help us accomplish this. Cloudways is a managed cloud hosting platform for WordPress websites and applications, and they make managing these services a total breeze. So how it works is Cloudways is kind of like the person in between the servers on Google, Amazon, Digital Ocean, Linode, and Vulture. And they simplify the entire process from start to finish, while also providing you with a ton of amazing features. They set up everything for you within your dashboard so that you can control your project with just 1 single click.

All you have to do is click on add server in the dashboard, select the type of application, let's say WordPress, set the project name and the details, select the type of server you would like, and if needed, set the server size and you're done. 1 of the standout features of Cloudways is the Cloudflare Enterprise CDN. This advanced content delivery network is specifically designed for enterprise users, delivering exceptional performance improvements compared to traditional CDNs. By leveraging a reserved network, the Cloudflare Enterprise CDN ensures faster global content delivery, reduced latency, quick loading times, and substantial bandwidth cost savings. They also offer 24-7 live chat assistance by a growing team of highly trained experts.

You can also add premium support as an add-on, and with this, you and your team can directly call and speak to a senior support engineer at any time. You can troubleshoot application-level issues, including plugin or theme troubleshooting, investigating any server errors, or optimizing performance right from the dashboard. You also get a free SSL installation with just a single click. This SSL service ensures that your website is equipped with a trusted certificate fulfilling all HTTPS requirements without any additional costs. In collaboration with their technology partner, Malcare, Cloudways provides bot protection for your WordPress website.

This feature safeguards your site from malicious traffic in bots, brute force login attacks, DDoS attacks, and many more. And here's a really cool feature. As your WordPress website or application grows, you need to expand on resources. And Cloudways enables seamless vertical scaling of your servers with just a single click. Cloudways also allows you to create staging environments or backups with their application and server cloning capabilities.

With just 1 click, you can clone entire servers or make copies of individual sites completely with their files and the databases and also get a new staging URL. This is great because you can reuse logic for different WordPress sites and you don't have to write hundreds of lines of code. So if you already have a WordPress site hosted on a different provider, Cloudways offers a free WordPress migrator plugin. And even better, Cloudways is completely free to get started today. And when you're ready to get access to such amazing features, you can use this code at checkout to get $20 worth of credits of free hosting.

Alright guys, I hope you're excited. So go ahead, scroll to the description. You're going to find a link called Cloudways. Click on that link and it's going to take you to this exact page. And then once you're here, go ahead and click on the start free trial.

And then it's going to ask you to log in, create an account, all that kind of stuff. Do that and then come back to this video. Awesome. So I already went ahead and created an account. I've already used this before so I know where everything is but you might land on this page and if you're in here, no problem.

I'm going to show you what to do or for some of you you might be inside this page Okay, so what you want to do first is go ahead scroll down here and click on my projects Okay, we got a first create a project so that we can have the server and all that kind of stuff inside it Okay So go ahead and click on add project and I'm just going to give it a name for now. I'm just going to call it Karina and then scroll down here and click on create project. Awesome. Now we have our new project in here. Great job.

So now go back into the nav bar and click on my servers and inside this, we have to spin up a server and that application and that entire thing is going to be within a project as well, right? So scroll up top, click on add server and here I'm going to click on WordPress and then go ahead and set the name. So I'm just going to say Corina for this as well and the server name just going to put Corina as well. And you see the project to select is the Corrina. So from the dropdown, select the new project that we just created.

And then finally, just leave this at what it is, Digital Ocean, that's fine, Vulture is okay too. I'm just gonna keep it on Digital Ocean. You don't have to mess with these settings. Everything is pretty much good to go. And go ahead and hit launch now.

Awesome. Now it is doing a bunch of stuff under the hood. So it's going to take some time because it's spinning up a server and then, you know, all that kind of stuff. So let's just give it a couple of minutes and then we'll get back to this okay. Alright so it looks like our project is done so go ahead and click on the server it's gonna take you into this page and now if you click this icon here you should see your application okay the 1 that we just created.

So if you see this great job. Alright now what you're gonna do is you're gonna open up a new tab and you're going to look up the following. So we're going to say Headless WordPress CMS Cloud Waze React. Click on this link right here and it's going to take you to this blog post. You see how they are using blog posts themselves, right?

So if you scroll down, you're going to find this thing right here that says, enable the REST API. Okay? So we need to download this plugin and then we're going to import it into our application. So go ahead, click on it. It's going to take you to a GitHub repository, click on this and click on download zip.

Okay, so now let's go back into our application right in here and you're going to find this admin panel link right here, okay? Go ahead and click on this admin panel. And then you want to paste it. Go back to your application dashboard and you're going to copy this password. Okay, they're going to give you a password.

Copy this and then go back in here, paste it and hit login. Awesome. So if your page looks like this, then you are at the right page. Okay so click on the the plugin drop down and you want to click on add new plugin. It's going to take you to this page and we're gonna click on the upload plugin and then go ahead and upload the new plugin that we just downloaded.

Okay I just dragged and dropped that in here and I'm gonna click on install now. Awesome. So the plugin is installed successfully. Go ahead and click on the activate plugin and it should take you to this page. Great job guys.

And if you have any confusion guys, you can go back to that blog post and you can read through this to kind of understand what's going on. Okay, it's going to help you. But I mean, you don't need anything. You have my guidance here, so you should be fine. Okay, but if you have any questions, remember the discord is open to show up in there will help you out.

Okay, so what's next? Now we're going to find the plugins in here right we need 1 more plugin so the plugin we just installed is going to help us create a rest api endpoint so that we can call the API endpoint and get all the data. But now we need to also create, we also need to use another plugin called custom post types. And this plugin is gonna help us get all the post data. So essentially what we're doing is we're using WordPress as the headless CMS for application.

Okay, this way we can pull all of the blog posts into our React application. And you can use any front end you want, of course. We're using Next.js and React in here. But if you're using Vue.js or literally whatever, it's the same exact process. Okay, so going back into our dashboard here, you're going to click on the plugins and you're going to find add new plugin.

Click on that and you're going to look for custom posts type and hit enter and it's going to show you this plugin right here. Go ahead and click on install now and then click on activate. Awesome. So now you should have both the plugins. Great job.

And don't forget, you also have to refresh because it's telling you, right? The plugin is activated, make sure you refresh. So click on refresh now and there you go. Now we're going to find a bunch of newer tools and sidebar options here called CPTUI. And now we can do a bunch of stuff in here.

So go ahead and click on the CPTUI and it's going to take you to this page and we have to fill in all the info here. Not every single thing, just a couple. Okay, So just follow through with me and you'll be fine. So you can call this literally whatever you want, but I'm just going to say test posts for now. Okay, I'm going to use singular here, so just actually, okay, it's fine.

We can keep it as test posts because this 1 is a plural label, and then I'm going to call it test posts in here too. And then this 1 is gonna be test post. So yeah, you can call it whatever you want, but I'm just gonna call it like this for now. Now you wanna go ahead and scroll all the way down, all the way to the end, right here. And you're gonna click on author and make sure it is checked and then go ahead and click on add post type.

And there you go. Now you should have something in here called test posts. If you don't see this, something went wrong, go ahead, pause this video, rewind a little bit, watch that section 1 more time, create that again, and then you should be fine. So now click on test posts, and it's gonna take you to this page. And now we can click on add new post and now we can create our new post.

How awesome is this? So you see how easy this is. All we have to do is create a post in here and it kind of looks like a UI, right? It has a user interface and then automatically on our react application, everything will just, you know, sort of populate on the front end automatically. So you can close this and just go ahead and give it a title and a description.

And now we need to populate all these blog posts. So you might see something like this. So I'm just going to paste something in here. Guys, please follow the exact same format. Okay, listen carefully and follow from start to finish.

After you're done and you see everything render out and you're happy with the results, do whatever you want. I don't care. Okay, for now, just follow through with me because I'm going to teach you a bunch of stuff. Okay. So what we're going to do is we're going to fill all these blog posts with information.

So the first thing is where do you find the images for these blog posts? Go in here. You're going to find the public folder right inside that you're going to need to create a blog images folder. Now you can use your own images but I already did it for you so don't suffer. Just go to github and go to the public folder and you are going to find the blog images folder.

Okay go ahead and download it from there. We're not going to need it here but it's just easier for you to kind of access everything in 1 place, right? So if you downloaded everything, then you're set, you don't have to do anything. I just put it in here because it's easier for me, and that way I can see what I'm using. So you can drag that folder and you can put it in here if you'd like.

Okay, now quickly stop what you're doing, just lay back for a second, just grab a cup of coffee, I don't know, and just pay attention. I'm going to explain what is SEO, why it is so important, and how you can really make a lot of money just with SEO as a Service, okay. So what is SEO in very very simple terms? Okay, this is not the in-depth answer but SEO stands for search engine optimization. And it is the process of optimizing a website to improve its ranking.

When you look up, it's you know, when you look up some search results on Google, right? That is literally what is search engine optimization. And now what is the goal? Let's understand the goal. Why are we doing SEO?

Well, the goal of SEO is to help search engines index your page, okay? Exactly like how Google uses a search engine to kind of index your website and show it, you know, where it should be in the search results, right? That's why we need SEO. So for example, if I just opened up a new tab and I looked up Cloudways and I hit enter, what shows Cloudways up top here? And this is the sponsored link, but let's just look at this right here, right?

This is an ad, but if you scroll down, you'll see organic search results, right? How is this showing up all the way up top? Well, that's because of the power of SEO. So I promise you with this skill alone, you can make a lot of money. So just pay attention.

Hopefully, I can give you some training. So 1 of the best ways to improve SEO for a website is through blog posts. Okay. And I'm going to explain exactly why. So first search engines like Google love fresh content.

Okay. They really like relevant content that is up to date and help solve problems for website visitors. So by constantly publishing high quality blog posts, you are essentially sending the search engine like, hey, listen to me because I have an active website with good information that users are actively looking for. Now 1, how does it help you as, you know, the website owner? First, it shows some authority for your site because people show up and they read everything and they see, okay, who made these blog posts?

And then they see, okay, Cloudways made these blog posts. So they understand that Cloudways is very reputable. So that automatically gives you a higher rank, right? So SEO is directly related to the ranking that a website can attain. So that's why it is important to run blog posts inside your website.

Now there's more. I'm going to explain exactly what. Point Number 2, it also helps Google because think about it. If people are looking up information and finding exactly what they want on the internet without, you know, wasting time. Let's say, for example, if you were trying to look for cloudways right now and you were trying to look for cloudways, let's just search for something like server size.

Okay, you're going to find a bunch of stuff, right? But what if nothing showed up? What if the incorrect information showed up? You're going to probably look for a couple of minutes, but then you're going to get tired and you're going to change the search result and search for something else. And sometimes you're going to give up and then hop off Google.

This is really bad, right? We want to retain attention as much as possible. This way we can show advertisements for users and hopefully help convert. Okay? I hope all this is making sense, but this is basically what's how SEO benefits the search engine as well.

And most importantly, it gives you the information you need at the exact time you want it. So the next thing is it helps you target the long-tail keywords. So what are these long-tail keywords? Well, think about it as specific detailed search queries that users will look up for, and these queries tend to have a lower competition, it helps you rank higher. Because you're the only person who's providing the solution to the problem, right?

So this will help your content rank higher because you're gonna use blog posts and you're gonna have long tail keywords within it, which means you're going to rank, right? Everyone's going to know what you are talking about. And when they search for, you know, these detailed search queries with their problems, it actually shows everything on the page because you are the only person who is providing the solution to problems that a lot of people are facing. Then there's also internal linking or what we like to call on-page SEO. So when you have links within your blog posts that link to your website, it helps the search engine understand the relationship between your content and your website.

Like how is everything related? What is the navigation? All that kind of stuff. And it also helps drive traffic. So for example, if you have a blog post that solves a problem and let's say your platform is actually providing the solution, you can talk about the problem and then provide the solution and tell, hey, click on this link and it's going to take you here.

And then you can sign up for free, get started, and then hopefully that solves your problem. So it also helps in that call to action. If you want to think about it that way. And then not to forget, like high quality blog content can also go viral sometimes specifically on social media and stuff like that, and it helps you drive more traffic and you know, you have the potential to get more backlinks that point to your website. And backlinks are basically, let's imagine, you know, apple.com mentioned Cloudways.

So when you get that backlink from an authoritative website, you start ranking really high, okay? So that's why if you look up Cloudways, it shows up. Now you might think, well I think it shows up Cloudways because Cloudways is the same name you're looking up. That's not the answer, okay? The only reason why they rank so high is because they have so much traffic and they have so much authority in the field.

I would like for you to maybe try that sometime in your free time. Try to create a website, buy a domain name and then host the website. And then you'll realize that you're not going to find it. Even if you look up your website, you will not find it. Now, if I look up Web Prodigies, I'm going to find my website instantly, right?

The reason is because we have authority. Everyone knows who Web Prodigies is. So Google basically understood how to rank my content. So with Cloudways, we also get the Cloudflare Enterprise CDN feature, all that kind of caching stuff. It really improves performance.

It helps SEO as well. And if you have a question, right, as to how all this data gets ranked, well, that's more of what happens under the hood. But if you think about it this way, if something is server side generated, if a script or something like a structure is given to the website before it's actually sent. That way the search engine knows what the content of the website is. That's why everyone is using Next.js.

Okay. Everyone moved away from reacts. Why? Because when the code shows up, when the DOM renders, right, there's nothing on the DOM, The React has to install or basically, I don't know, I don't want to use too complex terminology here, but the JavaScript file for React basically has to get served to the front end, okay? And that JavaScript file will then run and then all the components will mount onto the DOM.

So the search engine will not know what is on the DOM. That's why people stopped using React or Vanilla React, right? Next.js serves everything. And in Next.js, you can also do React-based stuff, of course, because it is React, okay? So I hope this training kind of helped you understand, you know, how SEO works and why we need cloudways to accomplish, you know, a very good authority in the field and all that kind of stuff.

All right. Oh, not to forget 1 more very, very important thing. Let's say, for example, you're using another third party provider. Let's say you're using Cloudways, right? Remember I spoke about backlinks.

So since everything comes through their domain, it comes through their platform, you essentially carry on their authority, okay? So if Cloudways gives you a website or something like that, right? If you're hosting your website through their service, their authority gets passed down into your website as well. So you automatically rank higher. All right, I guess that's enough for now.

So let's proceed, okay? So that's why we're doing all this stuff. So if you want all the content of this, I put everything in the Discord, just show up in the Discord, grab it, everyone's gonna give it to you, they're gonna keep circling it around, I know. So just grab it from there, just give me, just add me or whatever in the Discord and I'll give it over to you, okay? So here where it says type this, right, I'm gonna click on it, I'm gonna paste a piece of text and then I'm going to hit enter and create the next texture.

So this is going to show you how you can essentially render out different sections as well. Okay, great. I finished that and now I want to insert an image. So I'm going to hit the backslash basically and it's going to show me something like this. I'll click on image and then I'm going to upload an image in here.

So you can use 1 of these images. Okay, alright, nice. And then I'm gonna paste another piece of text right below and then let's go ahead and expand this. Okay, and if you don't see the sidebar just click on the settings right here and it's gonna show you something. You want to go to the test post, scroll down and you want to, you know, click on the featured image and we're going to have a featured image for this.

So for now, I'm just going to have this image, okay? All right, awesome, done. Now go ahead and click on publish and you should be set. And you can also view this post. I'm just going to click this just to see.

All right, looks great. So go ahead, take this up as a challenge. Follow the exact framework, right? We have the title, we have this here, this, and then we have an image and this finally at the bottom. And don't forget to set your featured image as well for each blog post.

Okay, create 5 more blog posts, pause this video, take that up as a challenge, do that and if you don't know how to do it, it's fine, I'll help you in the Discord, but that's pretty much it, okay? Just create those blog posts and then let's continue. Alright guys, hopefully you went ahead and created the other 5 blog posts, If not, just reach out in the discord. We'll all help each other. There's more than 5, 000 people in there.

They'll be more than happy to help you. Okay, so what's next? Go ahead and search up Postman and you're gonna find a link. Go ahead and install it for your computer. Once you're done installing and logging in and all that kind of stuff, you want to go in here and you want to click on create new collection.

Okay, now why do we need postman? Well, we want to first test our API endpoint to make sure that everything is working correctly, right? This is something we do in production as well. All right, it's very important to know how to use postman. So please follow this step by step.

I'm going to help you understand why we need it and why it's so powerful. So it's a free tool, of course, but you can come in here and first create a collection. And I'm going to rename this to Karina production, but I've already done it. So I'm not going to save this. I'm just going to delete this right here.

Okay, but you just go ahead and create that and save it. You can hit save right here. All right. And once you're done, each collection can have endpoints within it. Okay, so right now, let's say I have Corina product, right?

There's something in here. So if I want to create an endpoint then all I would do is click on New right here, and that's going to give me a bunch of options and I can click on HTTP request okay, and now you can select whatever method you want So let's say if it's a get request you put that you put the URL you put the headers authorization whatever you need okay so what I did is I already did it here production right and I created an HTTP request and I set it to get okay and now please please follow through just follow exactly what I'm saying don't make any spelling errors here okay so what you can do is you see this link here, right, if you don't see this link, I think it is the same link if you go back into your dashboard. Let me take a look. Okay, so it is the same link, so basically if you go back to your application, right, Let's say if this is your server view, if you click here, click on the application, you're going to see the application here and you want to log in to the admin panel, right?

But before that, you see this link here, right? Go ahead and copy this link. Now inside Postman, paste that link and set this to a get request. After that, you want to put a backslash and you want to say wp-json and then put another backslash, say wp and then version 2, so v2 here with a backslash again, backslash and here, this is basically what we created inside our dashboard. So you remember this name test posts, right?

This is exactly what you want. So use this name test posts put that in here. Alright, and now if you hit send you should get an API request and if it looks like this it's because it's an HTML format So you can change that to JSON, and now you'll get all the JSON data for all your blog posts. Great job, guys. So you see how powerful this is.

You can literally create something from here itself, right? You can create a blog post from here. And this is very useful, especially in production projects, right? Because this way you don't have to run through the website and then go into the application login and do all that stuff instead you can just hit the endpoint directly from here and you can put all the details so if cloudways requires you to put any details in here such as headers you can create key value pairs pass them in here but for now we don't need this for the CMS to work. But if you're using other features with Cloudways and you're trying to make API requests, then you can make use of these.

Okay. All right. Awesome. Now that we know all our data is coming back successfully, we can proceed with building out the SEO optimized pages. Alright, so you want to go to your page.tsx, okay, the root page.tsx.

You're going to scroll all the way up top and in here we're going to say const posts like this And this is going to be of a specific type and that type is as follows. So it's going to be this array with this object which is ID, title, image, content and the created at or it's going to be undefined and it's going to be an API call, right? We have to basically fetch the blog post in here. So for that we're going to say await on get blog posts and invoke this. Okay and we're going to get to this in just a second.

So go ahead open up your folder structure. You want to go inside actions and you want to create another folder in here called landing and inside that you want to create index.tsx. Okay and don't worry about everything else we're just gonna do this for now I was just working something else but that should be fine and in here what we're gonna do is first say use server and we are going to need a package to make this work so go ahead quit the terminal do this and we're gonna say bun add axios and hit enter and then we also need 1 more. So I'm going to say bun add HTML dash react dash parser. Okay, and hit enter for that as well.

All right. Awesome. And in here we're going to export a function like this. It's an arrow function. And why is it creating 2 brackets for me?

Okay, it's called onGetBlogPosts, okay? And I'm also going to go ahead and import this so it doesn't scream all the time. And alright, so this is a wait, this has to change to async and yeah, this is okay, it's just screaming because of TypeScript so we'll go ahead and fix that. So in here, go ahead and create a try-catch block and inside this we're going to say const post array and this is gonna be of the following type. So it's gonna be an array of this specific object type.

Okay the same thing ID, title, image, content and created at and this has to be equal to a default array in the beginning. And then we're going to say const posts. So remember the way we're spelling this, OK? It's hosts, all right? Plural.

Equal to await Axios. So go ahead and say Axios. OK, we have to import it first. So I'm going to scroll up top, and I'm going to say import Axios from Axios and in here I'm going to now call Axios.getRequest because remember we were actually doing a getRequest here, right? So that's why we're going to say getRequest in here and now we need to put this URL.

So I'm going to copy this URL, I'm going to go back here and I'm going to paste it in here. Okay. And if you want to be a little more creative, which is what I would suggest you do, is go into your environment variables. Maybe I will create this for you. I think, okay, I'll actually create it for you guys.

So you will have this variable. But for now, I'm just going to manually type it out. Okay. So I just called it Cloudways posts URL and I just put the link in there, okay? And then we're gonna have 1 more but we'll get to that.

Let's first just finish this 1 here. So I'm gonna say process.env. I'm gonna go back and get that name real quick. Okay, Let's go back and I'm just going to say cloudways posts URL and this is going to scream because you can only pass in a string Right. So what I'll do is I'll just put this variable in here So I'll say const URL or posts URL equal to this string right here And then if there is no posts URL just return And then here I can pass in the post URL.

Okay, awesome. Now, if you try to examine the payload, the images, which is the featured images, it's a different format, okay? So we have to get that as well. So let's go ahead and do that. Okay, so featured images come to a different end point.

Sorry, I forgot to mention that. So what I'm gonna do is I'm gonna go back in here, go into the .env file, and at the bottom, I'm going to create another variable. Don't worry, you should have this for yourself, like it will be there, but this is basically the featured images. So I'm just gonna say featured images like this and I'm gonna put the new URL in here. So all you have to do is copy this URL, okay?

The exact same URL, paste it in here, but you're gonna change this to media and go ahead and copy this URL again because we're gonna need it. And now go back into Postman because remember we need to first test and see if we're actually getting the data, right? So we have to, you know, call this endpoint on cloudways to get the media files. So what we're gonna do is go back in here, take it up as a challenge, create a new endpoint and paste that URL and hit get. Okay, hit save or fire, whatever it is.

And then, you know, we'll go from there. Okay. So pause this, take it up as a challenge. And if you don't know how to do it, I'm going to show you exactly how to do it. All right.

It's awesome. Hopefully you got it right. If you didn't, no problem. This is exactly what you have to do. So go up here click on new, I'm going to click on HTTP request, I'm going to paste the URL in here and I mean it should work right now if you hit get.

Yep there you go so change this to JSON and you should get a bunch of data back okay. So these are all the featured images and stuff like that. So now what we need to do is I'm also going to show you how you can save it. So go ahead, save here and I'm just going to call this featured images. So now whenever you're making requests to cloudways, you actually know what this data means.

So you see this one's a little weird, right? It's saying new request doesn't give you any information. So I'm just going to say blog posts from cloudways. Okay and hit enter and save here again. Alright awesome there we go.

So this is how you can test all the endpoints and the data that's coming back from cloudways and you're naming them pretty well so you can actually read off it. Okay so go back to your code, copy this because we're going to need it. We're going to go back in here and we're gonna say const featured underscore images or just featured Sorry images like this equal to process dot env dot and you want to paste that variable we just created and after this We're just gonna say let I equal to 0. It's a very simple while loop. So we're just going to loop over them and get all the featured images.

So in here say while, and the condition here is I is less than the posts.data.lin. Okay. And now I'm going to say const image equal await axios.get, and I'm going to put this new url in here. Okay, we forgot to do the check. So I'm gonna copy this line, paste it in here and replace this.

All right, awesome. So now what are we gonna do in here? Very simple. We're gonna say if the image exists, we're gonna push this object into the array. Okay, so we're gonna say const post equal to this and we're just destructuring all these values.

Alright, so we're saying ID is gonna be you know this right here, same thing for this as well. Sorry guys, we're not destructuring it, we're basically just capturing all the values and just storing it inside each property. And that's it. And now we're going to push it to this array. Great job.

So yeah, just as a quick side note, you see how we have code comments here. If you join Prodigy's University and you get access to the next project, right, you get access to a premium code base. And in that premium code base, we have all the code comments for every single, you know, line of code that we wrote, right? This 1 that you're getting access to is because this is what we're building right now, but in Prodigy's University guys, if you join, the code you're going to get is basically the premium code base. What I use, me and my team, and what we use to actually create the code.

Okay? So that might be very helpful for someone who wants access to, you know, even more help. Now, after this purple bracket, all the way at the bottom, we're going to say, if the post data exists, then return the post data. If not, we're going to console.log, just print the error message. And you guys know, you can return whatever you want, really.

Now, I'm going to go back into my page and I should see everything work. Nice! Now inside the page.tsx, okay same page by the way, I'm just gonna scroll, so in case you do not know where we were, that's where we were, okay? So scroll to the bottom and after this div I'm gonna create another section and give it the following class names and inside this I'm gonna say posts if this exists, oops sorry inside this if posts exist then I'm going to render out posts dot map And for each of these posts, I'm going to do something. Okay, so I'm going to render out a card component.

Okay, so I'm going to change this to a regular parentheses and in here I'm going to return a link component. All right, just like this. And this is going to have an href, right? What is this href? Well, This href is actually going to be a dynamic route.

Okay, we're going to create a dynamic route called blogs and inside that route, we're going to basically render out, you know, the content. But for now, I'm just going to call this slash blogs slash, and then you want to put this so you can, you know, the dollar sign and the curly brackets. And in here you're going to say post.id. After source we also need the key, don't forget. So I'm going to also give it this key here.

So key equal to post.id. Okay, I made a spelling error here. So in here first you need to get the post, right? So say post, and here also say post. Alright, not posts, it's post, okay?

And in here we're going to create a card component and I'm going to go ahead and give it the following class names. So go ahead, pause the screen and type it all out. And now you want to go back into your .env file right here. And at the bottom you're going to do the following. So you should have this Cloudways uploads URL in here, right?

So you can just say URL like this. And in here what you're going to do is you're going to copy everything from this URL up to the .com, okay? Copy that, paste it in here and you're going to essentially do the following. So you're going to put another backslash here, and you're going to say wp-content-uploads and put a backslash here. Do not forget this backslash.

Okay, now I'm also going to copy this variable right here. I'm going to go back into the code, and inside this card, I'm going to create another image component and this image is gonna have a source and this source is gonna be the following. Put the back ticks and you want to say process.env and put that variable and then you want to say backslash. Actually sorry we already have the backslash so we just have to say dollar sign and you're going to say post dot image all right awesome and now this is also going to need an all tags I'm just going to say post featured image like this and then just say fill and that's pretty much it and I'm actually going to put this inside a... Okay so create a div here and say class relative with a full aspect of video okay and inside this we're just gonna move this entire image and also I realized we weren't looking at the screen so let's do bunrun dev here and let's refresh the browser.

Alright so I refresh the browser but I'm not seeing any data. Now of course, something is failing somewhere, and if I look at the, you know, the server-side errors, I can actually see something in here. It says type error cannot read properties of undefined. So we have some sort of error inside our API call. So let's go back to the server action, which is inside here.

So if you were in this page, just click on this, it should take you in here. And okay, so let's see here. Ah, okay, here's where we're messing up. So put this in a back tick, okay? So line 21, where we're doing the featured images, do this.

And in here, you want to again put this in the dollar sign and the curly brackets and you want to say process.env and then dot featured image. Sorry, actually, Sorry guys, my bad. Just put featured images in there and then you want to put a slash also I'm gonna go into the featured images and just take a look if we have a backslash at the end So we have featured images. Okay, no backslash here So I'm just gonna go back and I'm gonna put the backslash and I'm gonna put dollar sign curly brackets posts dot data dot at I so not dot dot just at I and Dot featured and this is gonna be underscore media. Okay, now, let's see what this does.

Okay, so something is wrong here Let me fix this real quick. Okay, what is this saying? All right, very simple. Just read it, guys. So whenever you see an error, just read what is being shown, okay?

Sometimes I know it's a little weird. They don't give you the exact issue, but Next.js does a good job with this. So if you just read it, right? It's saying the host name, this host name right here, so I'm gonna copy this host name, is not configured under images in your next config.js. We have done this a hundred times.

So go ahead, pause this video, try to guess why are you seeing this error and Hopefully you can solve it. If not, I'm going to show you exactly how to do it. Okay? Alright. Awesome.

Hopefully you got it right. If you didn't, no problem guys. I'm going to show you exactly what to do. So go into your next config.mjs. Okay, you're going to see a file in here.

So if you remember in all our past projects, we had to add the host name of any external URL or external third party library that we're using. We have to add their domain to verify, right? So that's what we need to do in here. So inside this object, you're gonna first say React strict mode, and we're just gonna set this to false actually. And then in here we're gonna set images which is an object.

We're gonna have remote patterns which is an array, okay? And inside remote patterns we're gonna, you know, pass in the new domain. So the protocol is HTTPS which is gonna be in a string, sorry. And after this, you're going to have the host name. So pass the host name, which is exactly what we just copied.

And that should be it. Let me go ahead and try to see. Okay, so if I refresh the page, of course I have to do bunrun dev, And I'm going to refresh and let's just give this a second. All right. Great job, guys.

As you can see, it's showing everything in here. And of course, if you click this, it's going to take you to that specific blog post. But we don't have that page set up. Right. So let's go ahead and fix this up and make it look all nice.

So you want to go back to the page. You want to scroll all the way to the bottom and after this div you're going to do the following. So you're going to say div and you're going to pass the following class name and then we're going to have the card description component so go ahead and import that and then we're going to have some functions in here. Okay we're going to create this in just a second don't worry about it and then we're going to have the card title which is post.title and this parse remember we installed the HTML to parse plugin, right? I'm sorry, not plugin, we installed another dependency.

So we're gonna use a function that comes from there. So first, let's scroll up top and you're gonna say import parse from HTML React parser. Okay, so that should solve this problem here for you. And then I'm gonna go into the libs folder and you're gonna find a utools file, right? Inside this utools file, you can also go to the GitHub.

Please copy this from there, okay? There's no point in you sitting and typing it out, but it's basically just, you know, to get the month name. Alright, so just put this in here so that way we can just sort of get a number for it. And I'm sure you can also pass this into the date API and do a bunch of stuff, but I don't have time for that. Just go there, copy paste it here, okay?

And now let's also import this and awesome there we go alright and 1 more thing I want to change here is this right here this section was lg so I'm going to change it to medium okay and yeah that should do it so we also I also want to fix this because this is bothering me a lot. So I'm going to fix this as well. Okay, so go up here and you see we have this section right here, right? That says choose what fits best for you. Copy this section, scroll down and above this section you can just paste this section right here and we just have to change the variables up.

Okay, yeah, that shouldn't be too bad. Alright, and I know this might need some space, so margin top of 10. I think that should be enough space. Maybe needs more. Yeah, so just set something, okay?

So I'm gonna put something like 28. That should be good. Yep, there we go. And I'm going to go into our Figma design and I'm just going to copy this from here and I'm going to paste this as the title here and also the description for the paragraph. So just remove this and paste that right there.

Alright now go back into the folder structure. I'm going to shrink everything in here and inside the app folder I'm going to create a new route called blogs like this and inside that I'm going to create a dynamic ID. So go ahead and do that as well just like this and you're going to set this to ID and it should be a folder. Okay And inside that we're going to set a page.tsx. And in this page.tsx I'm going to say const post page equal to an async function.

So this is going to be an async arrow function. And it's basically just a component, right? So you could just use a snippet here actually. So I'm going to say post page like this and this is going to take a params so I'm just going to get access to params from here. So first let me do it in here.

So params like this and this params is going to have the following. It's going to have id which is a string and now I can destructure this from here. Next I'm gonna say const post equal to await on get blog post not the blog posts but we're using a another function okay another server action and for now I'm just gonna pass in params.id and let's go back into our actions folder which is in here and let's go to landing page go into index.typescript and we're going to create that action right here. So go ahead and say export const on get blog post like this equal to async arrow function okay and in here we're going to create a try catch. And inside this try catch, we're going to say const post equal await axios.get.

And I'm going to scroll up top here because I know we already did it here. So you see post URL. So I'm going to copy this, paste this above, right? So we're going to say const post URL. I'll change this to post URL as well.

All right, awesome. And in here, we have to make an API request to this endpoint. So I'm going to say post URL like this. And after this, I'm going to plug in the ID that we get. Okay so in here we're going to get an ID which is of type string and in here I'm going to put dollar sign and I'm going to say ID and then if the post dot data exists so we got some response then we're gonna say const author equal to await axios dot get invoke that and now we have to pass in a new endpoints in here.

So of course you're gonna have that variable for you already set inside your ENV file, but I'm just gonna do it for now. So go up here and just copy this URL, this exact URL, paste it in here, but you're gonna remove the test posts and you're going to say users. Okay and that should be it. Yeah that's good enough. You can also use the backslash if you'd like.

I actually prefer to use the backslash in here just because it I mean I'm using it everywhere but yeah I know I forgot about this but this is fine just put backslash in here. Okay And now we're going to go back to that page, and in here we're going to import that. So I'm just going to do the same thing here. So I'm going to say const author URL equal to process.env. Let's go back real quick.

And, oh sorry, I forgot to change this URL as well. So I'm going to change this to users and I'm going to copy this, go back into my file. I'm going to paste it in here. And if there is no author URL, I'm just going to return like this. And in here, I'm going to go ahead and paste this URL.

So I'm going to say author URL like this and then slash, sorry no slash because we already put that inside our environment file, right? Right there. So what we're going to do here is we're going to do this right here and we're going to say post.data.author like this. Awesome. Oh sorry guys, this is post, not posts.

Nice. And then here we're going to say if author.data, then we're going to return an object. And this object is going to have id, which is post.data.id. And then title, which is post.data.title.rendered. And then the content is going to be post.data.content.rendered again.

And then the created at, which is new date, post.data.date, and then author is author.data.name. Okay? Awesome. And then after this, you can just do console.log error for now. So I'm going to copy this and I'm going to import this from here.

So I'm going to import it like this on get blog post and then I'm going to change this to an async component. So now if I click on something I'm going to see page. Well I should see. Yep, awesome. So I see post page but nothing's working but you see here we're getting the ID, right?

So Cloudways will need this ID so that we can get that blog post to show. So in here I'm going to change this to div like this and inside this div I'm going to create another div and I'm going to set the following class name and inside this I'm going to create a card description. I'm just using this component here because it's pretty much already done, the design is done for me. So that's why I'm using this component, okay? And inside this, I'm going to say the following.

I'm going to do get month name and I'm going to invoke this and I'm going to say post exist, so if this exists, and we're going to get created at dot get month, invoke that, and in here we're going to put the exclamation, and after this guys we're going to do this and just give a space in here, okay? Oh Sorry, this is after the purple bracket. So after this 1, just give a space. And finally here, I'm going to say post.created, created at dot get name, sorry, get date, and you want to invoke that. And after this, we're going to pass in that post date.

So we're going to say post dot created at dot get full year and invoke that as well. Okay, so something seems wrong. Interesting. Okay, let me go ahead and fix this guys. Okay, I think I know where we made this error guys.

So if you look at this, just read this, right? Let me show you how to debug. So read this, cloud ways is literally showing you the error, right? Sorry, the server is actually showing you the error So you see it's saying this is the host name. That's good But if you scroll up here, you're gonna see something else.

So it says no route found. Okay, so 404 So what does that mean? So let's look at what okay. There we go. So you see test post 13.

That's incorrect, right? So that's happening right here. So if we put slash, let's see what happens. All right, awesome. There we go.

And now let's go back into our page.tsx and let's complete this. So I'm going to say h2 and I'm going to set the class name to text 6xl and then font-bold and inside this I'm just going to render out the post title. So I'm going to say post.title and there you go, looks amazing. And after this we also have to render the content, right? This is why we needed the parser tool because it can parse everything for us.

So I'm going to say parse and I'm going to first import it actually. So I'm going to say import HTML React parse and I'm going to invoke parse here and inside this I'm going to pass post dot content. Sorry this will be singular. Alright So here's what I'm going to do, go ahead open up your globals.css file which is in the root app folder, okay? And let's scroll down all the way to the bottom and in here we're going to say .parsed-container and you know why I realize this is messed up?

Because I forgot to add it, okay? So just add this class name, alright? If you realize in here we actually had this class name in here but we didn't give the class any styling so we're going to go back in here and we're going to select this use a selector and we're going to say width of 100% and I'm just going to set this to important and after this I'm going to say border dash radius and set this to 20 pixel and that should solve the problem. There you go guys. Great job.

It looks amazing. So go ahead and open up the app folder and you're going to create another folder in here and this folder is a route group called dashboard and inside this dashboard we're gonna have all the folders or all the routes that are going to you know kind of make up our application so we're gonna have the appointments, conversations, integrations, all that kind of stuff okay so first thing I'm gonna do is I'm gonna create a folder in here called settings and inside that settings folder, I'm going to create a page called page.tsx and inside that I'm just going to return a component like this. So I realized that when we tried to build the nav bar, okay, let's just go into the nav bar right here inside components and we have a button here free trial you see this is a button but it's not doing anything so what we're going to do is we're going to change this to a link component from next link and we're going to say href cool 2 we're going to say slash dashboard like this So now when you click this button it's going to take you to the you know login page or the sign up flow.

But also 1 more thing we need to do let's see if we just set padding to 2. Okay I just set px to 4 and padding y of 2 and I'm going to say rounded small just like that and then text dash white. Nice. So now when you click on this it's going to take you into that page. Okay so I went ahead and signed up and I was able to access the settings page.

Okay so as you can see it's rendering out a page in here. So inside this page we're basically going to return a React fragment and it's going to have a NavBar. But this NavBar is a little different, so I'm just going to call it Infobar. This might sound better. And you're going to go into components, and in here you're going to create the Infobar component like this.

And inside that you can say index.tsx. And in here I'm just going to return a component first and change it to info bar and let's also go ahead and import this component so we don't see any errors. Okay and I'm gonna go back into this now. So the first thing I'm gonna have in here is a div so I'm gonna render out a div with the following class names. And inside this, I'm going to create a breadcrumb component.

Okay. And this is, I know there's a new shazian component called breadcrumb, if I'm not wrong, you can probably use that, but I'm just going to do this for now. So inside the info bar, go ahead and say bread-prom.tsx and I'm going to return a component here. And this component is going to be a client component. So let's change this.

Now we're going to need another state provider. Okay. We're going to need a hook and that hook is going to give us access to a bunch of stuff. But since we're having set up the chatbot and all that kind of stuff like the real-time setup and things like that, we're actually not going to do that. So first what I'll do here is I'll say work in progress, set up, use sidebar, hook for real-time chats and chatbot stuff.

So if you don't know what this is guys, of course, I've showed you all the designs inside Prodigy's University, but it's basically the nav bar. It's like an info bar up top and it's going to have some breadcrumbs like the title, right? It's going to have a title saying settings, dashboard and stuff like that. And we're also going to have a support icon and a bunch of stuff, right? But this is also going to give the business owner or the user some information like is the chatbot in real time and it's going to have a bunch of things in there.

So that's why we need to create this hook, okay? This hook basically creates the real time setup and then tells us if the chatbot is in real time. So for now, we're just gonna keep this aside and we'll get to this in just a second. So inside here, I'm just gonna first return a div and this div is gonna have another div inside it and this div will have a H2 tag with the page. So for now, because we don't know what this is exactly, because it comes from this hook, because the use sidebar hook is going to give us all this valid information, right?

So for now, I'm just going to set it to setting, or I'll just put something like title, okay? And then after this div, we're going to have a paragraph tag in here. And this paragraph tag is going to do the following. So it's just going to look at if it's a settings page or the dashboard appointments. So you see how we're kind of having some global architecture here.

That way we can reuse this breadcrumb component for the entire sidebar, right? So that's why this page, which comes from this hook, is very important. But we don't have to set it up right now because it's not really needed. So what we'll do is we'll remove everything and we'll just return a string in here. Okay so just put whatever you want I'm just gonna put this for now and of course like usual let's also set our work in progress flags to set up the description and the switch component.

And now I know you may not know what the switch component is, but in here inside this header section right, we're going to see if the user is on the conversation page and if there's some sort of chat room available. And if that's the case, then we're going to render out a switch component so that the user can turn on the real time, so the live chat mode. Okay, but yeah, as usual, I'm just going to put a work in progress flag in here and mention that in here as well. So now I'm going to go back into our component and import the breadcrumb component. Awesome.

And now we should see everything render out perfectly. Now after the breadcrumb component, I'm going to have another div in here and this div will have another div inside it and we're going to render out the card components. And this card component is going to have the following class names. So we're going to say rounded XL flex gap 3 padding y of 3 padding x of 4 and text ghost. And then this is basically going to have a couple icons.

So the first 1 I need is the trash icon and then the star icon. So you see that up top looks awesome. Okay. And after the div we're going to render out an avatar. So I'm just gonna paste this in here, use the github.

Okay the github is gonna be your best friend today. So basically these are the components I'm just gonna import it. So we need avatar, avatar fallback, and the avatar image and this comes from you know ShadZion UI. Another component we need in here is just another icon called Headphones, so I'm just going to import that as well. Okay, there we go, and of course you can change the name as you like.

I'm just having the image, I'm just going to keep the ShadZine image just to save some time. Okay, So now I'm going to go to the previous page in here and I'm going to have the following. So I'm going to create a div. Please pause the screen and type this out. Okay, it's pointless for me to read it out and someone actually pointed it in the comment section.

They're like, please don't read the classes. So you guys can just pause and then do it yourself. Okay, and then after this, we're going to have the billing settings page. So let's go ahead and render that as well. So we're going to say billing settings and this is going to be of course a custom component.

So let's go ahead and create that in just a second. So go into your settings component inside this inside this folder and since we don't have it, I'm just going to create settings like this and inside that I'm going to create billing-settings.tsx and in here I'm going to return a component and just change the name. Now let's go back and just import this component so it doesn't scream anymore and we should be good to go. So what do we do inside this page? Well, very straightforward.

We have to fetch the user's subscription plan, right? At least for this component. So we're going to first fetch the plan details and based on the plan details, we're going to render out some data. Okay, very, very straightforward. So I'd like for you to pause and just think what is our next step.

I don't expect you to code but just stop for a second, pause this video and think. Okay, so if we need to get some data, what is the first step of action? Okay, awesome. Well, hopefully the word action gave you a hint. We need to create a server action so that we can get subscription plan information.

Okay, so I'm going to say const plan equal 08 on get subscription plan like this and I'm just going to invoke this and of course we don't have it for now so let's also go ahead and create that action but we need to also change this to an async component because we're using 08. So now go into your folder structure, you're gonna find the actions folder and inside the actions folder create another folder in here called settings and inside that we're gonna create an index.typescript file and then in here we're gonna type out that action. So we're gonna say export const onGetSubscriptionPlan equal to an async function. So I'm just going to say async in here and we're going to have a try catch. So I'm just going to say try catch and inside this the first thing we're going to do is we're going to say const user equal await current user which comes from clerk next.js and then if there's no user go ahead and return just like that Okay, and next thing is let's go ahead and make that call right so we're gonna say const plan equal 08 clients dot user dot find unique and in here We're gonna say where clerk ID is equal to user dot ID and what else do we need?

Well we need to select some additional data. So let's go ahead and say subscription select and we also want the plan information so set it to true and then after this we're going to say if the plan exists then return the plan dot subscription dot plan information okay and finally we're inside the catch we're just going to say console dot log error so we can see any error that took place. Nice, now let's go back and let's import this. Awesome, and that should solve your error here. So now that we have made this call here because this is a server-side component.

And again guys, I'm not going to go ahead and start explaining server-side components because we don't have time, okay? But if you want to learn everything in detail, just join Prodigy's University. We'll sit every Friday and we'll help you out, okay? So in here, now that I have all this data stored in here, we're gonna start rendering out the component. So the first thing we're gonna do is we're gonna render out a div.

And this div is gonna have the following class names. And inside that, I'm gonna have another div, and we're gonna create a component called section components, okay? And this is a custom component, of course, so let's go ahead and pass in some props. So the label for now is going to be Billings Settings and the reason why we're creating this component is because we can reuse it, right? So it's going to have 2 props, I'm just going to pass it in for now, you can just pause the screen and kind of type it out and Also let's go ahead and create the section components.

So inside components create a folder called section-label and inside that create an index.tsx. And this is the most simplest component ever. So I'm just going to create a component like this. It's props as label and message of course. Go ahead and destructure everything.

Return a div with a paragraph with the styling with the label and the message. And I'm going to go back here and import this component from the current folder. Alright guys, so very sorry, it looks like, well, we need to actually have a sidebar, right? That's probably what we should have started with. But now you know how to create a route and how to create a page so I guess that's not a waste of time we can always come back to this but we're just going to make a quick detour and we're going to go and first create the sidebar okay the sidebar is very important because we're going to understand the layouts of everything So how everything is kind of structured.

So go into your dashboard page right in here. And inside the dashboard page, we're going to create a file here called layout.tsx. And we're just going to return a component here. And I'm going to call this owner layouts. And this is going to, of course, give us the children props.

I'm just going to destructure this from here as well. And now we need to create a server action in here. We're going to fetch information for the user. Okay, so I'm going to say cons authenticated like this equal to 08 on login user. And I'm going to invoke this and let's go ahead and create this in just a second.

And also let's make this async before we do that. So I'm going to go into my actions folder and inside auth I'm going to create, I'm sorry I already have the index page right, so inside here I'm going to create this action. So I'm going to say export const on login user equal async function, async arrow function. I'm just going to use the snippet here and we're not taking any params. I'm just going to remove that.

We're going to say const user equal await current user and go ahead and invoke that. And If there's no user, we're just going to redirect the user to the sign-in page. And this redirect actually comes from Clerc, so I'm going to say redirect to sign-in and invoke this 1. So make sure the import is from Clerc slash Next.js, okay? Nothing else.

And else, this means the user data exists, we're going to use a try-catch block, I'm just going to use a snippet here. And here first I'm going to say authenticated equal to await client dot user dot find unique. Let's invoke this and we're going to say where our clerk id is equal to user dot id. And then we're going to get some information from them. We're going to get their full name.

We're going to set this to true. Then we need the ID set this to true as well. And finally we need the type set this to true. And after all of this, if the user is authenticated, const domains equal to await, get all account domains and we're going to get this in just a second. And then if that's successful, we're just going to return a status of 200 with the user and the domains.

Now for these domains, we can just go inside the settings folder and inside this, We're just going to export const on gets all. Let me actually copy paste this name. I don't want to make any spelling errors. And we're going to set this to an async arrow function. And this is going to do the same thing again.

We're just going to say const user equal current user. And if there's no user, go ahead and return. And then inside this, we're going to create a very simple try and catch and I'll show you what we're doing here Okay, so we're saying client dot user dot find unique where the same clerk ID, but we're gonna select the following We're just gonna get their ID, but we're also gonna get the domains. Okay, if you look at the Prisma schema, they are connected Right. Let me show you So if you look at Prisma schema right here, the user has a bunch of domains, right?

So that's exactly what we're trying to fetch here. We're saying also get the domains. And from that, I want you to select the name, icon, ID. We're also getting the customer. We want to select the chat room, select ID and life.

This is just for something else so just go ahead and put this in you, Nick. That's pretty much it, okay? And then finally you'll also just go ahead and return the domains in here and if there's an error, we're just going to print that out. Now let's go back and let's quickly port this server action And that's it. And here we can also return a status of 400.

I would actually encourage you guys to return some sort of status instead of just console logging. Okay, that's actually better. So yeah, maybe you can do that from now. So now going back to our component, our layout, I'm going to import this server action here and then I'm going to say if the user is not authenticated then return null. So great the user is authenticated that's why we're seeing the owner layout.

Okay now this component is going to need a provider and now this provider will not make sense right now but what it does is essentially we're going to store the chats you know the loading states chat room real time data some things that we're going to need for our sidebar, okay? That way we can show some data in here as well. So for now, we're gonna create it actually. So just push through this, It's all gonna make sense in the end, I promise you. And it's gonna kind of puzzle together as this masterpiece.

Okay, like this masterpiece. So just follow through and you should be good. So I'm gonna go into my folder structure, scroll to context. I'm gonna create another context in here called use chat dash context dot tsx. And in here, I'm first going to change this to a use client component.

And now I'm first going to create a type here called chat initial values props. And again, please feel free to copy paste this. Do not waste your time. OK, so I am going to, of course, copy paste this very straightforward. I'll explain.

We have a bunch of states. Okay. This is the props basically. So real time, this is a dispatch function. We have chat room, which is the string or undefined.

We have the set chat again, another dispatch. We have the chats, which is an array of these. Okay. The message, the role, which is assistant or user or null. Of course, it's going to be 1 of these, but the user is for someone who's sending the message and assistant is us.

Okay, and then we need the createdAt and scene, which is boolean. And then finally, we have a dispatch again, which can help us set this value here and append another value to the array. And then loading is a boolean and then we have a dispatch function right here. Next is the chat initial values, which is going to be this, these props, and we're just going to pass in all those initial values in here. Let's go ahead and create our context.

So chat context equal create context and import this from react, not VM, okay? From react. And now we're going to destructure the provider from this chat context. But someone had a question last time, which was, why do I have to do it this way? Why can't I just say the context?

So, like, chat context dot provider. Doesn't matter, okay? Do it as you like. This just makes a lot of sense to me so I'm just going to destructure it right here and then after that I'm going to export const chat provider go to an arrow function and this is going to have the children prop in here so I'm just going to say children prop and this is going to be set to children which is react.react node and inside this we're going to create a bunch of states okay so the first 1 is called chats I'm trying to use this use state snippet let's see if this works so chats okay it doesn't really work and we're going to set this 1 here to a capital C and this is gonna be chat initial values dot chats. And then I'm just gonna duplicate this and I'll get to this in just a second.

This 1 is loading and this 1 is gonna be set loading. And here we need the loading state and then this 1 is going to be set loading. And here we need the loading state. And then this 1 is going to be chat room. And here this will need to be a capital letter.

And then finally we have real time. So I'm going to say real time like this. And also here I'm going to say set real time. Okay, awesome. And then finally we're going to create an object here called values.

So const values equal to and this is just All these variables basically all these states that we just created We're just going to store it in here and the set loading as well. I don't know why that was showing an error. Okay, that was just the spelling. Sorry, my bad. And then go ahead and just return a provider right here.

So we're gonna say return provider with the values and the children. And then finally, let's go ahead and export a context here. Okay, so export use context, chat context, and return the state. Awesome, Now we can use this inside this component. So remove all the stuff.

I'm going to say chat provider import that and this is going to need a div or it's going to freak out and I'm going to set the following class names. Okay. Awesome. And this is going to have a sidebar component. Because remember, this is a layout.

And if you don't know how this works, let me explain real quick. So we have a layout here and we have a bunch of pages, right? A bunch of routes. Each of those routes will be wrapped inside this layout component. So whatever styling we set on the layout will actually, you know, apply to also all these components in here.

That way we can create some sort of a layout. Literally the name says it, layout. So I'm going to go back into my components folder in here and I'm going to create another folder in here called sidebar and this is going to have an index.tsx and we're going to set this to a client component and I'm just going to create I mean export a component and called it sidebar. This component is going to need all the domains right That's why we made that call in the first place. So the domains are going to be coming in through props, so they are of this type, which is null, undefined, or an array of these values.

And then go ahead and destructure domains from here. And again, we're going to need the use sidebar hook. So let's go ahead and just say const expand on expand page and on sign out. We're going to destructure that from use sidebar hook. So now we can actually create it because it's going to make more sense in here.

So inside the sidebar folder itself, you can create this in here because it's, you know, only native to this component. So I'm going to say use dash sidebar dot typescript. Actually, maybe we can put it inside the context folder so inside here you can say use dash sidebar dot typescript and maybe in the hooks it's fine I guess you guys can figure that out, make it look nice. But let's go ahead and create this component. So this is useSidebar.typescript and I'm going to return a component in here.

Oh sorry, I think we need to change this to TSX, my bad guys. And I'm going to return the component. All right, nice. And we're going to basically create a bunch of states. Okay, so we're going to create expand, set expand.

We're also going to create real time, set real time, loading, set loading. And we're going to do use router, path name, and use toast. And now we're also going to need access to the use chat context so that's why we I wanted to wait on this right so let's go ahead and say const chat room equal to use chat context go ahead and import that and now since we have this it's gonna make more sense okay we're basically getting access to all these states. So we need the chat room from here. So here I'm going to say onActivateRealTime, okay?

Because when real-time mode is activated, we want to essentially show some sort of post message, like success, right? So that's what we're going to do here. So I'm going to say onActivateRealTime, which is an async function. We're going to say const realtime equal await onToggleRealTime. And we're going to go into our actions folder in here, and we're going to create a folder in here called conversation.

Inside that, create an index.typescript. And I'm just going to say use server up top and also for the settings guys sorry I forgot to mention go up top and say use server in here as well and after this I'm just going to I'm going to render out that action so we're going to say on toggle real time is an async function that takes in the ID and the state, which is a boolean. And we're going to do a simple try-catch. We're going to say await client.chatroom.update where ID, the data, and we're going to select this. Then if the chatroom exists, Let's go ahead and return that data with the 200 response status response and we're going to send the message here Which is if chatroom.live then real-time mode is enabled or real-time mode is disabled So we can actually show some message right and if not, you can render an error but remember guys I told you you can return a status in here as well.

So going back to this component we can actually import the on toggle real-time action and what else. So okay so this is use state so if it's use state this has to be a use client component right So go ahead and do that as well. And now you might wonder, why are we not seeing anything? Well, the reason is because we're not returning the children elements, right, from the layout. So it's fine because we're still doing all the setup.

So don't worry about it. Just go through, push through this section, you'll be fine. So after this, we're also gonna create another function in here called onGetCurrentMode, which is an async function. We're going to say setLoading to true and then inside our conversation folder, inside index, we're going to create another action in here, which is called onGetConversationMode, which is an async function. And we're going to say client.chatroom.findunique where it's ID and we're going to select whichever is live and we're just going to return that as well and now we can actually import this so yeah we're just saying const mode equal await we're invoking that server action and we're passing in the boolean and if the mode exists we're going to set real-time to mode.live or and we're also setting the loading to false.

And then finally, we're going to need a use effect in here. And this use effect is going to say if chat room exists, then on get current mode. So we're going to fire this so we can get this data. And we're also, of course, you need to pass that as a dependency in here. At the bottom, we're gonna say const page equal path name dot split dot pop.

So we're essentially getting the dashboard from the URL, right, whichever page we're on, and we're extracting that. That way we can return that and use it in the section component, right, if you remember. So same thing here, so I'm going to say const sign out equal use clerk, let's go ahead and import this as well, and then we're going to have 2 functions in here, first 1 is onSignOut, onExpand, so onSignOut is going to say sign out, Okay, and this sign out comes from, oh sorry, from use clerk right here. And we're going to say router.push to backslash. And on expand, set expand to the opposite.

So this on expand will basically enable us to expand the nav bar and shrink it. Sorry, the sidebar. And then finally at the bottom here, let's remove this return statement because we're not returning JSX, but we're returning an element, an object here with all this stuff. Awesome. Now, let's finally go back to the component wherever we came from and import the use sidebar.

So if you don't know which page, it's the sidebar page. Okay, so I'm seeing some error here. I think it's because of the types. Just go ahead and remove the type for the use sidebar because we're not taking anything anyway and that should solve our problem. Okay, so now in here we're gonna return a div and this div is going to have the following styling.

So we're going to say class name equals cn and let's import that. This comes from Shadzian, okay? And then we're just going to pass in this color here, like this specific styling, and we're going to pass in a bunch of options. So if it's Expanded, right, if expanded is undefined, then we'll return this. If not, it will default to this.

So this is a ternary operator. Sorry guys, this is a ternary operator. This right here, this part is, but this part is a circuit. So a short circuit. The short circuit evaluation, I don't know if you guys know how it works, but basically if this is true, it'll basically render this because of the and and, and if not it'll render the other 1, okay?

Or return, not render. Okay, now inside the div, go ahead and say expand. So if this is true, we're going to return a custom component here or we're going to return this 1. Again guys, you can just use basic CSS to do this but this is just how I did it for now. So I'm just going to follow through with this.

So inside the sidebar folder, I'm going to say maximized-menu.tsx and inside this I'm just going to do the following. Actually, let's just start from scratch. We're going to need a bunch of stuff. So I'm going to return the Max menu like this. Okay, let me rename that.

And inside this, we're going to take a bunch of props. Okay, so the props are on expand, current, on sign out, and the domains. And of course, don't forget to destructure all these values from here. So I'm just gonna say the following, okay, nice. And remove this, and we're gonna return a div.

And this div is gonna have another div inside it with an image component from NextImage. We're gonna say images logo.png. We're just gonna pass in some values here so just pause this and just kind of run through this and this menu is just an icon so I'm gonna import it from Lucid React. Nice, there you go. And after this div I'm going to have another div in here.

So pause and feel free to copy the styling and we're going to have a div inside that with a paragraph saying menu and now we're going to need the sidebar menu options. Okay, so this is basically an array of objects that we're just going to loop over and then render an element out. So go into constants and create the menu.tsx or TypeScript, that's fine as well, and I'm just going to do the following. So for this first thing let's solve the types problem. So I'm going to scroll up top and I'm going to say type sidebar menu props is going to be an object here with label icon path okay and we're gonna say this is an array of all of these okay and inside the menu dot t sx file we're gonna have a type in here so let's go ahead and create that type and it's gonna have label icon and path okay this is basically the sidebar option so all of these sidebar props and the next thing you're gonna do is go into GitHub and inside the root folder.

So once you shrink app, let's shrink everything here. So if you go into source, you're going to find a icons folder. Okay, copy that icons folder from GitHub. And if you already created this because we were spinning up stuff, essentially you can just delete that and paste the new icons folder in here. So it's gonna be a bunch of SVG components that I already went ahead and created for you so that you don't have to suffer.

It's basically all the icons that we're going to need and that should be it. So yeah, go ahead and do that and then let's proceed. Awesome. Now, once you're done with that, you're going to do the following. So you're going to say export const so you can copy this from the GitHub as well.

It's just an object with the menu items, but we're just going to say const sidebar menu, which is going to be of this type, and it's going to be an array of different options. Okay, very straightforward. But these are the custom components that we just imported for the icons. So go ahead and import this. I'm going to just hit backspace and get some IntelliSense and just go ahead and import all of these.

Okay and then we're going to create another type here because we're going to need this too. This 1 is called tabs underscore menu underscore underscore props just like this and this is going to be equal to the label which is going to be a string. Oops okay this is all caps sorry my bad. So it's going to be label which is going to be a string. Oops.

Okay. This is all caps. Sorry, my bad. So it's going to be label, which is going to be a string. And then we also need the icon, which is optional, which is going to be JSX dot element.

And then after that, I'm going to paste the second object, go to the GitHub and copy the tabs menu constant. And you're just going to set it to this right here and you're going to pass these in here. And then I'm going to copy this 1 which is the help desk tabs menu so copy this 1 as well and then we have 1 more constant which is called appointment table header so copy that and email marketing headers as well. We're just gonna paste it for now because we're gonna need it, right? This is no point coming back and forth.

And then here we have 1 more component that I need to import, which is the help desk component, but this chat icon already exists. So let me go ahead and import this 1. Okay, so I just imported this component as well, and we should be all set. So now I can go back into the sidebar, the maximized component in here, maximized menu, and we just have to import all of this stuff. So I'm going to uncomment this right here and I'm also going to uncomment this and now we need to create a domain menu.

Okay, So open up the sidebar and inside here you're going to create another component called domain-menu.tsx. Create the component like this in here and rename this to domain menu. And this type is going to have following props. We're going to have minimum, which is boolean. The domains, which is going to be an array of these which is ID name and icon, it's going to be null or undefined.

And then here I'm just going to destructure these and now you're going to open up folder structure like this and you want to scroll down to where you find hooks and I'm probably going to put this in here guys because I know, okay yeah this is not a context, so I'm just going to create side bar like this and inside that use domain.typescript, okay? Okay, I misspelled this, sorry about that. And the reason why we need this is that component is gonna need all this stuff. So this hook is gonna be very important for us and I'll tell you why we actually need it and maybe you can you know maybe see its importance. So the use domain hook is a way to extract logic instead of having it in just 1 single component.

So for example let's say we need to create a component, like a form, that when the user hits submit, it actually goes and creates the domain, which is uploads an image, uploads some text, whatever you need to do the title and all that kind of stuff. It uploads it and then we get to show the response on the page. Right. But what if you want to reuse this logic in a different component? Are you going to sit and build everything out again?

Right? Even worse, let's say if you had some states with it, for example, you had a loading state, you wanted to get the domain name that was being sent, you wanted to get some path name and do some logic based on that. And you also wanted to, you know, see, you want to do a bunch of things in here. You also wanted to set a toast message. You see, you have to do everything in 1 component.

And now you can't reuse this. I mean, you can reuse the component, of course, but you might want to use this logic in a different component. So now we're going to face some problems. So that's why we need the use domain hook. It's going to be very helpful for us and very, you know, it's pretty much the same thing for all other hooks as well that we're going to be building.

But this 1 is the purpose of it is exactly what I just mentioned. Okay. And today guys, I'm going to be using this tool called Upload Care and you can take a look at it. I think we also use it in the last project and all of you absolutely loved it. So we're going to be using Upload Care again.

And guys, take a look at this. Their components are so much better. Like it's it looks modern, first of all, and looks professional. Right. And they have a bunch of really cool things like Dropbox connections and all that kind of stuff and you can use it for like almost any library you want and you can also customize every single thing you can have the minimal approach or the modal approach and you see just like that and I think you can change some states here okay they also have yeah last I think in that last video we set up a dark mode for this component and they have some really, really cool things that happen under the hood, which means the image gets cached to the CDN level really quickly once you upload.

And because of this, the image gets delivered much faster, right? So this way you don't have to focus on doing all the caching stuff, they do it for you. And also guys, I was able to get you a code so you could get a 50% discount on the Pro Plan for 6 months. Okay, so use this code WP50 at checkout and you can get this discount. Okay, so there's a link in the description, click on that link and it's going to take you to the exact same page that we need to land on.

Okay, so go down below, click on that link and it's going to take you here. Alright, awesome. If you clicked on the link in the description, it should take you into this page. If it didn't, then go do that right now so that way you get to this page and also make sure you log in and stuff like that. So if you're stuck somewhere, you just have to log in.

So now inside the Workspaces tab, it's going to take you right here, right? You're going to click on Create a Project and I'm just going to call this Corinna, like this Corinna AI, and I'm going to hit create and make sure this is selected. And that's it, we're done, we have our bucket ready. All we have to do is kind of connect everything together. So click on get started and it's going to give you the documentation.

So since we are using Next.js, just click on Next.js and it's telling us, okay, we need to use this library. So go ahead and quit the terminal and let's use this so I'm going to copy this and I'm going to say bun add paste this in here okay I'm seeing something weird so let me quit this 1 more time okay so I'm going to say bun add again and then paste this and hit enter. Okay there we go and it is installed successfully. Now it's telling us to insert the uploader into your page. Okay so let's go ahead and do that as well.

But right now I'm actually not going to use this. I'll get to this in just a second but we're gonna need all of this stuff for our hook, right? So that's why we needed this. So let's go ahead and set that up. But basically, if you wanted to use your component, you would just have to paste this inside a, you know, inside a component file, and then, you know, also provide the types if needed.

And that's it, you are ready to use. You can render images also through another component that they have and you're all set. By this component, the first thing we need to do is we need to create the upload client, right? So we're going to say const upload equal to new upload client and this upload client actually comes from the upload care component. I'm sorry, library that we just installed.

So let's go ahead and import that from up top. Now we can also invoke this. I'm going to say client like this and then invoke it. And then here we also need to provide for the upload client, we have to provide a API, sorry not an API key, we need to provide a key specifically and that key can be captured from here so go ahead click on this and you're going to find a public key. So copy this public key and inside your .anv file you're going to find something in here called Next Public Upload Care Public Key.

So go ahead and paste that key in here. And it also says that we need a secret key, so I'm just going to hit Add Secret Key. And this is 1 time thing only. Okay, So I'm going to show the key right here and I'm going to, I think this is a download button, so for now I'm just going to copy it and I'm going to set the secret key in here. Oh, I also just realized something.

They have a no-code integration right here. This is insane. So you could essentially have file uploads for Webflow, Shopify, and a bunch of other tools. Actually, I want to take a look at this. Alright, so I guess that's actually pretty useful.

That way you can use an external third party integration, and you get to save money and a bunch of other stuff too. And you can also kind of, you know, fire automations, do really whatever you'd like. And I think this is nice. Yep, awesome stuff. So now inside this upload client, go ahead and provide an object.

And this is going to have a property called public key. And I'm going to provide the process.env.next public upload care public key as a string. Now we're going to export const use domain which is equal to a function and here we're going to need use forms. I'm going to say const register sometimes I just can't spell guys sorry about that. We're going to say handle submit and I think the best way to do this is actually first to set it to Use Forms.

I'm gonna import Use Form from React Hook Forms, and let's set this to equal to, and in here we need to pass in some values, right? This way we can create some typescript stuff. We like to get some type IntelliSense. So that's what we're going to do in here. So this 1 is called Field Values and go ahead and copy this.

Or actually you don't have to copy it, I think you can just import it like this. So yeah, just remove this S and it's going to show you field values, so just import this. And then in here you're going to have a resolver inside an object, sorry, so create an object in here and say resolver is going to be the Zod resolver. And invoke that and we need to pass in our schema. So we're going to use a special schema called addDomainSchema, so I'm just going to provide that in here too.

So inside where we're invoking, just pass this in here and say addDomainSchema, and let's go ahead and create that in just a second. So open up your folder structure, go into schema, and you see we have auth already created. We're going to create 1 called settings.schema.typescript. And inside this we're going to do the following. So we're going to say export const add domain schema which is z.object and let's go ahead and also import z from Zod.

Okay, just like that. And this is going to be of type string with minimum 4 characters with this message, okay. And this refine property here gives you a lot more, you know, flexibility on what you would like, on what input you would like to have as in true value or a faulty value. So that's why I created this, it's basically just a way to tell if the domain is an actual domain. So yeah, make sure you put this, you can copy it from GitHub or you can just pause the screen and type it out.

And then another thing I need in here is image, so we have the domain and the image for the domain, and that's z.any, we're going to refine this to say files.at0.size is going to be less than or equal to the max upload size, which I'm just going to create right up here. So go ahead and say max upload size is 10, so 1024 into 1024 into 2, which is 2MB. And then here we're going to say accepted file types is image PNG, image JPEG, and image JP, sorry JPG and JPEG. Okay? So that's literally what we're passing in here too and we're making sure that the file is of 1 of these types.

So if you want to accept other files, you can pass it into this in here and then you can use that as well. Awesome. So now we're done with this, so let's go back to our component And let's import this. And now that we have done this, we can actually get more IntelliSense. So the next thing we need is the form state, and we're going to destructure this and only get errors from here.

And after this, we also have reset. So I'm going to get reset, and I think that's all we need. Yep. So after this, let's go ahead and also get the path name. So I'm going to say const path name equal to use path name like this and invoke it.

And then we also need toast. So I'm going to say const something like this, maybe toast equal to use toast. And this use toast should come from UI use toast. All right, nice. If you want, you can actually use the newer version of Shadzian's toast.

I think that one's actually better but I'm just a little lazy guys. I'm just gonna use this 1, okay. Then after that we're gonna have the loading component, sorry the loading state, which is the use state, so loading and set loading, which is going to be of course of type boolean. And then we're going to have isDomain in here, which is going to be string or undefined. And then we also need router, so I'm going to say const router equal use router, and I'm going to invoke that.

And useRouter comes from nextRouter. And then here we need a useEffect, so I'm going to invoke the useEffect. And you see why this is why we need this hook, right? Because we can reuse logic across different components, right? So if your interviewer ever asks you this question, why do you need a hook, you need to give this specific answer, okay?

Because you want to reuse lifecycle methods inside components, alright? That's the actual answer. Not I want to do use effects or I want to, you know, have components or have logic or states in different that's not the answer the answer is if you want to reuse life cycle methods in other components then you would need to have some sort of a hook okay it's the same thing for higher-order components but that's because you know we we transitioned from class-based components a very, very long time ago. But it's very important, okay? You have to know all of these things.

So if you want more assistance, you can join Prodigy's University. I'll put a link in the description. We're going to break down every single thing for you on live calls. It's going to be so much fun, so join if you need some help and we'll help you. And then after this, I need to pass in a dependency array with path name.

So go ahead and say path name right here, and inside this we have to set the is domain to the path name. So I'm just going to say set isDomain, invoke this, and I'm going to say path name like this, .split, and we're going to put a backslash, and we're going to say .pop. Okay, and go ahead and invoke that. Then, and then now we're going to create a handler. So I'm going to say const on add domain equal to handle submit, invoke this, and this handle submit should actually come from React Hook Forms.

Okay, right here, nice. And in here we need to pass in a callback function. So this callback function has to be an async function and gives us access to values and these values are going to be the field values that we just put in here, right? This 1 right here. So we're just going to say field values so that way it has all the types.

Now in here we're going to first set isLoading, so setLoading to true, and then we're going to say const upload equal to await upload import that. I'm sorry this is the wrong upload. So it's this upload right here so I'm just going to say okay there's a bunch of naming conventions so what I'm going to do here is I'm going to say uploaded equal to await upload dot upload file invoke this and say values dot image At 0. Okay. I think I'm making some typescript errors here somewhere guys.

You can take a look at the last project I don't think we have a lot of time because we have so much to do. So I would say just look at the last project and see how we did it, okay? Or just reach out and Discord and I'll help you there. And then next I'm going to say const domain equal await on integrate, which is going to be another function that we need to create. So it's called on integrate domain.

Now you want to go into your folder structure, scroll up to actions, and you're going to find settings, and inside the index file we're going to do something in here. So you're going to say export const onIntegrateDomain is equal to an async arrow function, and this is going to take domain which is of type string and then icon which is also of type string and inside this the first thing we need to do is await the current user and if there's no user then we want to return. Then let's go ahead and set a try catch block and inside this I'm going to fetch for the user information. So I'm going to say subscription equal client.user.findunique where you know this user and we're going to get the following. We're going to get their domains and why are we doing this?

Well we're trying to restrict their plan. Okay we want to make sure we can only give them so many. So this way you can actually, you know, give them a reason to upgrade on your SaaS platform. Everybody does this. This is literally what they do under the hood.

Okay. Then and then the next thing here is we have to check if their domain already exists. So we're going to say cons domain exists, and we're going to go and say user.find first, where this is the clerk ID, but we're going to find for where some of the domains match this name. And if the domains do not exist, I mean, if it does not exist, then we'll create the new domain for them under that account with a chat pod. So what we'll do in here is we'll say if domain does not exist, only then we're going to say we're going to create it.

But we're also going to take a look at the different options they have. So if they have a standard plan, so subscription.subscription plan, the standard and their total domains that they have, you know, created is less than 1. That means they can only have 1 domain, right? So if that's the case, Only then will we allow them to create a new domain. So if they have exceeded this plan, then we're going to do something else.

All right? And same thing for the pro plan, same thing for the ultimate plan as well. I think this is supposed to be called unlimited, but that is okay, no problem. And then here we're going to say const new domain equal await client.user.update where this clerk ID and we're going to say data is going to be set to the following domains we're going to create a new domain and we're going to pass in the name and the icon that we just wanted but the chat bot here is something we need to create so we can use it later on. So we're going to say chatbot and we're going to create and we're going to pass in a welcome message which is, hey there, have a question, text us here.

So you see you can actually tweak this if you'd like and kind of customize the bot even more. And then finally if the domain exists then we're going to return the following. We're going to just say status 200 and then domain successfully added. Okay I see some error here. Let me fix this guys.

Maybe it's the bracket. Okay I guess it was just a bracket. And after this blue bracket, so right above here, I'm going to say return, and we're going to set a status, or let me just copy this. We're just going to paste a status of 400, and the message is, you've reached the maximum amount of domains, so upgrade to proceed. So let me shrink this to make sure this is exactly what's happening.

So if this, then create, if not, you want to return 400. Alright, this looks good. And then after this bracket, so all the way at the bottom, we're going to say, you know, 400 error, domain already exists, and we can actually create another 1 for you. And then finally we can print the error, you can send another message, do whatever you want. Now let's go back to our component and now we can essentially import this action.

And then finally we're gonna say if domain exists, then inside this first we're gonna reset the values and then we're gonna set loading to false and then we're gonna send a toast message. The toast message is going to have the following title, which is if the status is 200, show success, if not show error, and then the description we're just going to put in here. So whatever is being returned. Then finally here we're just going to say router.refresh. Okay, so I made an error here.

You see I imported... Okay, what's wrong here? Alright, sorry guys. So I think NextRouter has to come from NextNavigation, So I'm just going to quickly update that right here. Yep, that's correct.

So the previous 1 was what we had in, you know, before the next, before this current version of Next.js. That 1 used to be the older 1, so this is the newer 1, okay? So make sure you change that. And here, finally, we're just going to return all the stuff that we just created. So I'm going to return the register, the onAddDomain, errors, landing, and the isDomain, alright?

That's it. So this is why we need hooks. So you see how we created other stuff as well, right? Pretty much the same idea. So I hope this makes sense.

So this kind of gives you an idea of how we can break down every single thing and then reuse it in other components or in other areas in our application. Let's go back to our domain menu, which is right here. So under the sidebar, domain menu, and we need to do the following. So I also see some errors here. Okay, this is fine.

I know we have to fix that error. Okay, I'm going to import. So from maximize component, go ahead and import the domain menu. And inside this, we can now do the logic in here. So go ahead and import the new hook that we just created.

So use domain and I'm also going to capture all these values to just destructure them. And now I'm going to have a div in here and this div is also going to have the following class names. So I'm going to import CN, then let's shrink this a little bit more so you guys can see. And I'm going to have another inside this, and in here I'm going to say if it's not minimum, and I mean if this is true, then I'm going to return a paragraph tag and show the domains. Okay, so we need to have some value in here as a truthy value, and then we can render this out.

So if they don't have any domains, then we're not going to show anything basically. And I'm actually, instead of using a modal, I want to use a better component here. Alright, give me a second guys. I want to use Shadzian's AppDrawer component. Okay, so I'm going to say AppDrawer, like this, and I'm also going to create that component.

So copy this name here and go into your components folder, which is in here, and inside that create a drawer component and create an index.tsx and I'm just going to return a component and paste that. And for the type, let's see what... Okay, so let me... Just give me a second guys. Okay, so we need onOpen.

So this is the first 1. And this is going to be a JSX element. And then we need the children, which is going to be react.reactNode. We need title, which is going to be a string. And we need description, which is going to be a string as well.

And I'm just going to go ahead and import all of these, sorry, destructure them. And the first thing I need here is a drawer component, which comes from UI drawer. And this is basically a provider, if you guys don't know what that actually is and how it works, okay? But I'm going to put that in here and inside this I'm going to have the trigger first. So drawer trigger and the trigger for this is going to be the onOpen and then we also need to have the drawer content.

So content like this and the content is going to be a div with the following class names. So I'm going to say container flex flex dash call items dash center gap dash 2 and padding bottom of 10. And in here I'm going to have the drawer title and the drawer title is going to be title just like this and we're going to have the drawer description and this drawer description is going to be of course the description and after this we're just going to return the children elements and that should be it so let's go back and try to import the drawer And it's going to scream at us and the reason is because we don't have any children elements, right? So I'm going to pass in the description first. This is going to be add in your domain address To integrate your chat bot and then we're gonna have a title here So title equal to add your business domain and inside the drawer I can actually first let me pass in the onOpen.

So onOpen is going to be equal to a div, and this div is going to have the following class name which is cursor pointer, then it's going to have text-grey-500, and then rounded-full, and then finally border-2. And inside this I'm going to pass in the plus icon from Lucid React, and inside the app drawer now I can pass in whatever I want. So I think we have the Loader component, right, from Loader files. So go ahead and import that just like this. And this is going to be an open component in here.

And I'm going to say loading equal to loading we just created up here. And this loading comes from the use domain, okay? And this is gonna need form components and it's gonna have an on submit and what do you call this? A class name, so I'm just gonna pass this in here. And the On submit, remember we had that on add domain so I'm just going to pass it in there.

And if you guys remember, we created a really, really cool component called Form Generator. That's what we're going to pass in here so it dynamically renders out a component. So I'm going to import the form generator component and I'm going to say input type is input, register domain, name is domain, errors, the placeholder which is mydomain.com just as an example, and then the text. And we're going to need an upload button here so I'm going to say upload button and this is a custom component that we're just going to create but we're going to pass in register, the label, and errors. So how this works is every time we upload something we're essentially just going to use this register which comes from React Hook Forms and We're just going to register that image on that component and that way we can show some stuff in there.

So go into your components folder right in here and I'm going to say upload-button like this and inside that I'm going to create an index.tsx file and in here go ahead and return a component and call upload-button like this. And let's also go ahead and import this component. And this is going to first need the following props. I'm going to say register, first and label. So also go ahead and import this.

So use form register and field errors and the field values itself. All from React took forms by the way. And then we're going to have a label called string. And here we can destructure these values. And this is going to be a React fragment.

So delete this and return a React fragment. I'm going to say div and set class name to flex gap-2, Tim's dash center. And in here I'm going to provide a label and the input field. So I'm going to say label like this and import the label from UI label and I'm going to say HTML for upload button and pass the following class names and we're going to create the input component. So we're just going to import the input component and we're going to use a spread operator for the register object and then we're going to pass in the class name, hidden, type is File and ID is Upload button.

And then here we're going to pass in an edit icon, which comes from Lucid React. And after that, also pass in the label that we wanted. And then after the label, I'm going to say paragraph recommended size is, you know, whatever here, and less than 2mb basically. And then finally, after all of this stuff, right here, we're going to render out an error message component. So import that from hookforms-errorMessage like this.

And that component is going to have all the errors passed in here, along with the name, which is image, and then we're going to render out this exact component, which is a paragraph tag with this red text here, and saying if message is equal to required, then you want to return this, or return this, the message itself. Now let's go back, and alright, there we go. And after the upload button, I'm going to have another button in here to submit the form, which is from UI button, and the type is button and class is with a full. We're going to say add domain right here. And go all the way to the bottom after the app door, after this closing div tag, and we're going to create another div with the following class names, and we're going to say if domains exist, then we're going to loop over the domains and return a link element, okay, from next link, And we're going to set it to slash settings slash domain name.

So exactly what that name is, that's what we're going to be using in here. Alright? And this is the key, this key is needed of course and we're going to pass in a specific class name to show what's being selected. And then this is an image to basically show the icon for that specific domain. So now since we have this, remember if we want to show images, we also have to allow that inside you know our next config file, right?

So let's go ahead and do that and also don't forget to use, I mean type this line which is a paragraph to show the domain name itself. Maybe span would be better, but that's fine. So yeah, there's a bunch of semantic stuff that we can improve. Guys, I'll help you with everything, either in the Discord or in Prodigy's University, but we don't have time to look into all of that. I'm trying to do as much as possible as fast as possible.

Okay, so here's what you're going to do. Go into your next config file right in here, and after this, right here, you're going to create another object. So I'm just going to put this like this, and inside this object the protocol is gonna be set to HTTPS and the endpoint which is the host name is gonna be ucarecdn.com. Now we should go back and refresh your browser because it's going to... All right, run run dev.

Sometimes it might quit, but usually it should spin that up, but make sure you refresh the browser. Okay, so now we created the maximized sidebar, but we also have to create the other stuff. So I'm going to go in here and I see max menu. So I'm going to import max menu first. So this should solve the first error.

Alright nice. And then we have the second error of course so we're going to go ahead and build that out as well. But I see something wrong in here which is the maximized menu component itself. So open up your sidebar and you can create another file in here called menuitem.tsx and maybe you can put a dash in here and in here go ahead and return a component and I'm just going to rename that. And now this is going to take the following props.

So we're going to have size, label, icon, path, current, and on sign out. And I'm also going to destructure these from here. And we're just going to have a switch case in here, okay? The switch case is going to check for max or min and it's going to return the sidebar accordingly. So guys, you don't have to do it this way.

I just thought, you know, actually I feel there's a better way to do this. The best way is just to use CSS and remove the labels. Just remove the labels and set everything to have transition and set a duration. That way it becomes responsive and it automatically shuts. Okay, this is probably not a great way to do it but it's fine just for now.

We're just learning, right? So for now, it's okay. But just put a switch statement in here and we're going to say if the case is max, sorry, if the case for size is first it is max, then we're going to do the following. And what we're going to do is we're going to return a link component. So the link component is going to look like this.

It is a link component. Go ahead and import from next link and we need CN as well. And we're going to pass in that onSignOut function and we're going to pass in the class names right in here. So depending on what's been selected, we're going to show a specific type of color, right? And then we're going to have the href, which is the path slash whatever path was passed in, and a hashtag like this.

Or if there's no path passed, that's what I meant. We're gonna pass the hashtag. And then just show the icon and the label. And then for minimum, so after this case right here, I'm gonna say minimum, exact same thing, just different styling, different stuff, and this is also the same, and we're just gonna pass in the icon right here. Because the maximum size is going to have icon and label, but this one's going to only have the icon.

And then by default, we're going to pass in return null. And I'm also going to remove this from here. All right, nice. And now go back to our component, which is the maximized menu, and import the menu item, and that should solve our first error. And now in here at the bottom, remember we commented this out, let's go ahead and uncomment that.

And we're going to have 2 errors because these are icons, so go ahead and import the logout icon and the smartphone icon and that's it. So now go back into the sidebar index.typescript, sorry, TSX, and import the minimum menu. Oh, actually we need to create that, guys, sorry about that. So go into your sidebar here, a sidebar here and say minimized-menu.tsx and I'm just going to paste what I just copied here and I'm just going to change some things real quick. So go into the GitHub and just copy this, okay?

It's the exact same thing, just different styling and a bunch of stuff. So I'm going to remove this and I'm just going to re-import these components real quick. So the first thing is the menu logo. All right, so go ahead and import that. And that should be inside your icons folder, okay?

Called menu logo, like this. And this is also going to need the menu items. So I'm going to go ahead and import the menu item. And we need the domain menu. So go ahead and import that as well.

And that should be it. Yep, awesome. So go back to your sidebar components and import the minimum menu. I'm going to go back into your route. So you see the dashboard route here, right?

This route group, click on it and click on layout.tsx. And here we need to render out the sidebar. So go ahead and render out sidebar like this and we need to pass in the domains which is going to come from this API Call right so we're going to say authenticated dot domain. Okay, so I see some errors here I think I know why this is happening. So let's go back into the next, I think this is the use router, sorry, the use sidebar hook.

I think because I don't have use client up top. Okay, so this should be use client, I think, so now it should be mounted. Or Is that the issue? Ah, okay, I see the problem, guys. Sorry, I was in the wrong file.

So I was looking at this sidebar use domain hook. It's actually the use sidebar hook because I didn't read this clearly. I mean, I did, but for some reason I was in the wrong file. So go into this file here and you're gonna see that use router is from the wrong package. So go down here again and re-import this from use navigation, and this should solve that error.

Alright, awesome. So now if you refresh the page, you see this really cool loading animation. How awesome does that look? And if you click this icon right here, your sidebar will grow and shrink. And now we can also click on this domains right here and you see this really really cool component shows up here and you can upload an image, whatever you like.

Okay, so now that we're done with this, we also have to go back into the layout file and we need to complete this layout.tsx. So after this sidebar, I'm going to create a simple div, right, inside this, actually inside this div, and it's with full height screen, so we can actually have stuff in here. And you see because we rendered out the children components, when I clicked on the, what do you call that, the settings page, right? It actually took me to this page and it's rendering out everything I need. Now going back to our settings page inside the dashboard, okay, the root page right here, we have to do a bunch of things in here.

First thing we need to do is remove this weird thing right here, so let's go into Billing Settings, and now we just need to complete some stuff in here. So inside this, I'm going to remove this and I'm going to have a card component. I'm going to import the card component like this. And don't worry, I'm going to explain in just a second. Let me just import this real quick.

Okay, so it's just a very simple card component right here that allows the user to click and add a plan. Okay, now first thing is we are not going to be setting up the subscription stuff right now. So for that reason, we don't need to build this 1 part yet. So what I'm going to do is I'm going to scroll up top and I'm going to say work in progress, add Stripe subscription form. Because we need to do a bunch of things like for Stripe Connect and stuff like that.

Alright, so now you want to go back into your components folder and click on InfoBar and you're going to click on the breadcrumb component. Because if you realize this is the settings page, but we see something else, that's because remember we did not set it up, right? We had a work in progress flag. So this basically helped me catch that. So this is super important.

So you wanna go in here and we're going to say const and we're going to destructure something from use sidebar hook. Go ahead and, sorry, invoke that and we just need to import all this stuff so you can just go ahead and import whatever you need and I think that's about it. And we're gonna go into this title and we're gonna set it to page. Oh, there's 1 more, page. I think we need 1 more from here on sign out in real time.

Okay, now we have all the variables that we need. Okay, so we're rendering page. So there you go. You see it renders out the page itself, so we didn't have to actually do anything. So it's dynamic.

And now after this h2 tag, we're gonna say if the page is equal to conversation, so if we're on this specific page, then we want to render something else, right? So we're going to render the chat room. Sorry, if the chat room exists, then we're going to render the following. So we're going to render a loader from this file. So I'm just going to import that and just render a loader like this.

And this is going to be an open tag. And inside here, I'm going to pass in loading equal to loading, like this. And the class name is going to be equal to padding of 0. Okay, so I see something weird here. What's going on?

Okay, let's go into this Loader component. And let's just take a quick look at this component here. Ah okay so we need to get a couple more things so I'm gonna say class name and no padding which is boolean and I'm also going to destructure these values from here and I'm just going to replace this and I'm going to set the CN function in here and say class name, so whatever was passed in, or we're going to pass in the styling, and for the spinner we're going to change that in just a second. So if I go into the spinner component, okay looks like we don't have any props in here. So I'm going to create a type here called SpinnerProps and this is going to be equal to the SpinnerProps so we can destructure this.

And all I really need to do here is change the first line, okay? So I'm going to change this to the following. So I'm going to say CN, import this, and we're just going to pass in the no padding, or we're going to pass in this right here. So now let's go back, go back to our component, which is the breadcrumb component, and inside the loader we have to pass in some stuff. So I'm going to pass in a switch component and this switch component comes from Shad C and UI so I'm just going to import it and that's pretty much it.

Right? Awesome. And we also have some class name here So just go ahead and put whatever you want. And for now, you're not going to know what this is because we haven't created the conversations page, right? Because this page is settings, so you won't see it.

But if it's a conversation page, then it's going to render out sort of like a switch component, It kind of looks like a check, right? And you can turn that off and turn it on to turn on a real-time mode. And now this paragraph here, I'm just going to remove this and we're going to say the following. So if it's a settings page, we're going to pass in this. If it's the dashboard, a different text.

So just pause the screen and type this out. Or if you already have the GitHub open, you can just copy it and paste it from there. Alright, and let's also go ahead and remove all the work in progress stuff. And that should be good. Nice.

Okay, now I'm going to go back into my settings page right here. We have the billing settings and I'm just going to make sure that I have all the components that I need in here. Okay, apart from the Stripe subscription form, I think everything else is set. Okay, nice. I'm going to close this and I'm going to go back to the layout.tsx.

And the next component I'm going to have in here is the dark mode toggle component. So I'm going to copy this name from here and I'm going to go into my sidebar and go into the components. Inside that go into settings and I'm going to create dark-mode.tsx and I'm going to return a component in here and also let's go ahead and import this component as well. And now in here we're going to first change this to a client component and we're going to create a hook and this hook is going to give us access to the theme. Okay so based on the theme that is being selected we can just change everything around.

So go back into hooks which is right here And you're going to create a settings folder and inside that say use-settings.typescript. And in here I'm going to export const an arrow function. And now I can go back there and I can import this. Alright, and of course I'm going to see this error here because we're not returning that, so let's go back into that component and let's proceed from here. So we're gonna do a bunch of stuff in here, just bear with me.

Okay, just proceed, you will be fine. It's just some repetitive stuff too, but there's gonna be some code in here, okay? So just follow through, we'll be good to go. So the first thing is I need to create the upload client, so the upload care client. So I'm going to say upload care client like this, and also import this, and this comes from this library, which is upload care slash upload client and I'm just gonna create a client right here and of course we need to pass in all this data.

Alright so go ahead and hit the plus icon and I'm just gonna say webprodegies.com in here and I'm gonna go ahead and upload an icon okay and I'm gonna go ahead and hit add domain. Awesome, it's actually uploading it right now and there we go. So if you quit, you should see the domain right here. How awesome is that guys? Okay, so 1 more thing I wanna do here is I realized that this wasn't centered because of this.

So I'm just gonna go ahead and fix that. Okay, so you should, let me just refresh this. So it's gonna, all right, there we go. And if you go into the sidebar and go into your menu item component, you should see something in here. Actually, I think we have to go inside the domain menu, guys.

Sorry about that. And let me see if this is where we can do this. And just scroll all the way down to this link because this is where we're like looping over all the domains and we're returning a link component with the image, right? So in here, we just have to set justify center and that should put it right in the center. All right, there we go.

Okay, and I'm also going to change the background to white. Just looks cooler. I mean, it doesn't really matter because we have a hover for whites, but maybe you could put it there or maybe we can put a border actually that might be better. Okay, Actually, I don't like the border either, so I'm just going to keep it like this, okay? So when you hover over it, it shows white, and then when you click on it, of course we're going to see 404 because we don't have that, you know, that domain and the settings page set, but that's it.

That works. I just wanted to make sure that that works. And if I try to create another domain, let's see what happens. Okay, so it says, error, you have reached the maximum number of domains. That's exactly what we want to hear.

Because we are on the standard plan, that means we can only have 1 domain in here. Now we can go back into the dark mode component and we can continue from where we left off. Okay so I'm going to uncomment this and go into the use theme provider and this is inside the use settings page because we're sorry use settings hook because we're gonna have multiple in here. So alright, and now let's just go ahead and create this. Okay, so this is actually a pretty easy hook, so it's not really too much.

So this upload client we actually don't need for now because we're going to have multiple hooks in here that we can actually use for the settings page and that's why you know I thought it was going to be a lot right now but we're good guys we're good okay so we're going to say const We're going to destructure this right here and we're going to set this equal to useTheme and this useTheme comes from nextTheme. Then go ahead and just extract all of this from here. So we need setTheme and we need the themes as well. And we're just going to return an object with both these properties. Okay nice and now we can go back and import that.

Okay awesome so I see something wrong here it's because this is theme and not themes. Let's see what I have in here. Theme like this and set this to theme as well. Okay that solved my error And now I'm going to remove this and I'm going to have a div in here and this div is going to have another div inside it with the following class names which is LG call-span-1. And inside this div I'm going to have our section component, okay?

So I'm going to say section like this and import my section component from section label and we're going to say interface theme and we're going to pass in a message saying select or customize your UI theme. Then after this div go ahead and create another div with the following class names and inside this we're going to create another div in here and this div is going to have the following class name as well so say CN and then pass this in here and theme is system or border orange and Then on click and we're going to set the theme to system. So this is a new component that we need to create but it's already done for you actually. All you have to do is go into the GitHub repository and you're going to find a folder. And that folder is called Themes placeholder.

And inside that you're going to find 3 components, they're just SVGs called Dark Mode, Light Mode, and System Mode. So I'm going to go ahead and import the System Mode component. And I want you to take this up as a challenge. There are 2 more in here, okay? The light mode and dark mode.

I want you to create 2 more right here, just literally, you don't, you just have to duplicate it. But I'm just saying, take it up as a challenge, create those 2, and have them render out side by side right here. And then when you click on it, of course, it's gonna change. So go ahead, pause this video and give it a shot. If you don't know how to do it, I'm gonna show you exactly how to do that.

Okay, awesome. Hopefully you got it right. If not, this is exactly what you need to do. So if you look in here, all I did was duplicated it and I rendered out a different component. But for the set theme, I changed it to light mode and I changed this to dark mode.

Okay, Now there is 1 challenge in this project. I have done this 500 million times. We have done light mode and dark mode every single time for every single project. So I want you to make this application light mode and dark mode compatible, okay? And it's, I mean, it's already pretty much, it already pretty much is, but there's 1 issue.

We ended up hard coding some of the colors, right? So I want you to just change only those colors. So for example, you need to change the title here and maybe a couple other things like the sidebar. So if I change it right now, you see, okay, it works, cool, it looks great, but something is a little weird, right? I think the sidebar stands out and it looks a little odd.

So you just have to go in there and change the colors and it's very, very simple. It is not hard, okay? So take it up as a challenge, spend some time, maybe spend like 30 minutes after this video, don't do it right now, after everything is done, okay? Because that's not the most important thing right now. All right?

And then all you have to do is try this out 1 more time and make sure everything works. And if it works, great job. All right? So let's proceed. Now I'm gonna close this folder and I'm gonna go back into my sidebar index.

Sorry, not sidebar. I'm gonna go back into my settings page. And in here, I'm gonna create another component called Change Password. This is very important because this is a custom component that helps the user change their password and it uses clerk and stuff like that so let's go ahead and do that. So I'm gonna copy this name I'm gonna go into my folder structure.

I'm gonna scroll down into the settings component right here which is inside components and I'm gonna create change-password.tsx and I'm gonna return a component here and just change the name to change password. And we need to create another hook inside our settings file. So I'm going to go into hooks, go into settings, go into use settings and in here I'm going to say export const use change password equal to an arrow function. And inside this arrow function I'm going to do the following. So I'm going to invoke use form but I'm going to destructure some values and I'm also going to go ahead and just import these.

So use form from React Hook Forms and ZodResolver. And now I'm going to need some schemas, right? So this schema right here is going to come from the Auth schema. So go into your schemas file, go into Auth schema. And right here I'm just going to create the change password props.

And if you go back, you can actually import that. All right, awesome. And now we also need a schema in here. So let's go ahead and grab that schema as well. And we're going to go into the auth schemas again, right in here, scroll to the bottom.

And I'm going to say the following. I'm just going to say ZodType change password. Okay, So change password schema is ZodType change password props and it's gonna be equal to Z dot object and I'm gonna get the password here, set it to a string with minimum characters of 8, max of 64, and just have messages for them. And then finally, they refine, pause the screen and type this out or copy it. Okay, copy it from GitHub, that's the best way.

That way you don't make any errors. And then we're also gonna have the confirm password in here and we're gonna set that to a Z of string. And finally, a refinement on that to make sure that the password and the confirm password match Okay, so schema dot password equal to schema dot confirm password And if this is true, then it will work If not, it's gonna say message passwords do not match and it's going to set a path to confirm password so this is the path that it uses to connect. So let's go back here and I'm also going to import this real quick. Alright looks great now I'm also going to need the toast I'm going to say use toast And change password is not defined.

Okay, let me go back and import that component so it stops yelling at me. Okay, right here, import this from the settings page.tsx, and I'm going to go back into this file. Okay, I see change password at the bottom. That's good to know. And now we can proceed here.

So I'm going to say const on change password equal to handle submit and I'm going to invoke this, sorry, I'm going to invoke handle submit and then pass in an arrow function. And this arrow function is going to be an async function. This async function is going to get access to values. And okay, so I think I know what problem we faced in the previous form schema. So you see here we passed in, for the last 1 we passed in field values.

I think some weird type. So that's why it did not work. So here we just have to pass in the props in here. So now if you go into values you will see the type. Alright?

So sorry guys, that was a mistake I made there, but I think apart from that everything else should be fine. So just change that if you need to, just put in the user login props and that should kind of fix that. And now we're going to create a try catch block and inside the try statement we're going to set loading to true and to do this of course I'm going to need a state so I'm going to create the state up here and we're going to import the state and we're going to set the loading to true. Then I'm going to say const update 08 on update password which we have to create. So open your folder structure, go up to actions, go into settings, go into index page, just scroll to the bottom somewhere and we're going to do the following.

So this is what we're going to do. We're going to say export const on update password equal async passwords, so it needs the password in here. We're going to first check for the user if there's no user return, right? And then we're going to say on, sorry, await clerk client and this clerk client comes from clerk next.js and we're going to pass in the user ID and the new password. Then if update, so we got some response basically, If that's true, then we're going to return status 200 and send a message saying password updated.

And then we'll just show an error if nothing worked. Okay, go back and just import this real quick. After the password is updated, we want to check. We want to make sure if the password is updated. If so, then go ahead and reset.

So reset the form, and we're going to set isLoading to false, and then I'm going to invoke the toast, and I'm going to pass something in here. I'm going to pass a title, saying success, and I'm going to pass the description, saying updated.message. And finally here, I'm going to console.log, and just print out the error, like this. Nice. So now that we have all of this stuff we have to return it, right?

So return register errors on change password and loading. Great job! And now if we go back here this should no longer throw some weird errors. Great job. And in here, now we need to first use that hook.

So I'm gonna import this hook called useChangePassword, and I would actually suggest you have a file for each and every single hook. Okay? I know this is gonna be a little annoying, but well, I mean, it doesn't really matter. You could have 1 file per section and inside that you could have all your hooks because I'm trying to think in a production environment, when you have multiple teams working on the project if you have too many files in there you're gonna have like hundred files right so yeah actually I think what we have is good because under use settings so let's say if 1 team on your project was working for you know the use settings page then they can get in here and they can kind of fix this, fix all, set up all their hooks in this 1 single page. That way it just looks so much cleaner and nicer.

Okay? So I think what we have is decent enough. Okay, so this needs to be a client component. So scroll up here and you're going to change this to use clients and that should fix your problem. Alright nice.

Now go ahead and create a div here and this div is going to have the following class names and inside this div we're going to create another div with a section element okay. So div with this class name and a section element like this. And this section is going to have the label set to change password and the message is going to be reset your password, okay? And now after this div we're going to create a form element And this form element is going to have the onSubmit and also the class name that I just set in here. And then inside this we're going to create another div like this with the following class name.

We're going to create that magical form generator component. And we're going to pass in the password and the placeholder as new password and 1 more down here for the confirm password and then we need a button down here so I'm going to import button and I'm also going to import the loader component and that should be that should be it so now we have that input form where the user can go in here and change their password as well. Okay, and I'm going to do 1 more thing guys. I actually don't like the fact that this just shows the standard plan and this. The user might want to also see what features they get access to, right?

So let's go ahead and do that. It should be very simple. So go back into the Billings page, which is under Dashboard Settings, Page.tsx, and then you see Billings Settings, click on that 1. And in here you see we're rendering the plan, and we're also rendering the text down here, right? But remember, we have the pricing cards already stored.

So what I'm gonna do is I'm just gonna, for now, I'm just gonna hide this stuff in here, and I'm gonna loop over the, I'm gonna find actually a pricing card, okay? So I'm gonna say pricing cards, just like this, dot find. And if we do find it, okay, what seems to be the issue here? I'll just remove this for now and we'll just put it somewhere else so that way I can just comment it out. I don't know why it's not commenting there.

So weird. And inside this, I'm going to get access to the card. And this card is going to have a bunch of stuff in here. It also has a title. So what I could do is I could render based on that.

So I'm going to go up here first. I just want to console.log the plan itself. And I also, I'm sorry, I want to, yeah, console.log the plan right after this. It's going to show on the server I think or, okay, we have some error here so I need to hide this first. Okay, it's showing on the client.

So let me go into the console. Let's go into console and let's see if we see anything in here. Oh actually sorry guys, it's showing right here. I totally missed that. So it is showing standard, so that's a good thing, and it's showing uppercase.

So we just have to make sure we get to convert that. So we're going to say pricing cards.find the card where card.title.toUpperCase, invoke it, is equal to the plan. Okay? And if this is the case, so also we have to do something in here. So what I'll do is I'll just remove this since this runs on the server, we can actually do it up top right in here, okay?

So I'm going to say the following, I'm going to say pricing cards dot find, so const, we can say plan features equal to pricing cards dot find. So this is going to return, you know, something in here or undefined. And I'm going to say if there is no plan features, then return. So we'll always have a plan feature in here. And let's also try to console dot log the plan features for now.

So we should see a bunch of stuff in the console. I'm just going to refresh the browser. Okay, so I see the problem. This is actually called standard, not starter. So what I'm going to do is go into pricing cards, I'm going to change this to standard like this and if I go back in here and if I refresh this let's just see what we see in here.

Okay so I see standard and now if I put this after this I should still see this print. Okay cool so it's working. Awesome So now if I just print out the plan features, I should see something in here. All right, there we go. So I see the plan features right here, standard.

All right, great job. So what I'll do here is I'll remove this console.log and now that we have the plan features I'm going to extract the features from it. Okay so in here we can change this to let or actually just change it to const and if this has anything we're gonna get the features from here and that should be it. So now in here we will have all the features printed out for us. Okay, there we go.

So now I'm just going to show, and also if you're wondering what is this huge error, it's because we're using something that's wrong inside the SVGs. So it's fine, it's not going to be a big problem, but there's something called fill path, so you have to go ahead and change all of that. But for now I'm just going to skip across it because it's not a blocker for us, right? Okay, so let's go down here and I'm just going to copy this actually, just give me a second guys, I just took this from the landing page and if I just loop over this, let me see what happens, okay? So if I say card, okay this is wrong, so I want to say plan features right here, so I'm going to say plan features like this dot map and let's return a check, okay?

And there you go. So now we also have some information that prints out and, you know, kind of tells us what's going on. Okay, so I like this icon better, so I'm just going to change this to Check Circle To. Oh, yeah, that looks so much better. And for class name, I can set text muted dash foreground like this, and it should look much better.

Alright, there we go. And for this right here, the gap, let's see if I increase this. Okay, that's going to increase the gap between these elements. So let me see, what do I have in here? Okay, so I'm going to wrap this in a div, so let's select all of this and move it in here, and I'm going to change this class name to flex and gap of 2, and flex column.

Alright, and that is so much better. And maybe you can change this to 5 pixels. Okay, 2 is better guys. Sorry, I think a lot about all this weird stuff. And then also give this a margin top of 4.

I'm gonna make it 2, I think that might be better. Alright, there we go. So it looks so much better now than just the title and the description, right? Great job. Now we're going to build the domain settings.

Now this page is super, super important, so you need to pay close attention to what I'm doing, okay? Please, please, I'm telling you this 1 more time, if you don't know what it looks like go look at the demo So you understand what the you know what the entire application looks like that way you have an idea of what you're building But don't worry. I got you from here. We're gonna break down everything so everything makes sense But this is the most important part of the entire application. So please pay attention.

Okay? So go ahead, open up your folder structure, go into the pages right here. So I'm going to just shrink everything. Source app and then you see dashboard. You see a settings page, right?

Inside the settings page, create a folder, it's a dynamic route called domain. And inside this, create another page.tsx. And I'm just going to return a component in here and just rename this component. And we're also going to get access to params, so I'm just going to get params from here and also destructure params from the props right here. And the next thing is I'm going to say const domain equal await on get current domain info and I'm going to invoke this and pass in params.domain.

Okay? Now of course we don't have this function, we don't have the server action, so we have to go ahead and create the server action. So copy this name, go into your actions folder, search for settings, and go into index.typescript, scroll to the bottom, and you're going to do the following. So you're going to say export const paste this and you want to say it's an arrow function and then you're going to change this to an async function as well. You're going to say domain is going to be string and the first thing is const user equal to await current user invoke that And now we have to say if there's no user go ahead and return.

And I'm gonna create a, okay what's wrong here? Okay that was just TypeScript acting crazy. So create a try catch block and inside this I'm gonna say const user domain equal to await client dot user dot find unique and invoke this and pass in an object where and I'm going to say the following so I'm going to say where the clerk id is user dot id and I need to select a bunch of stuff So this is exactly what I'm going to select. Please, please copy this from GitHub, paste it here. It's very straightforward but copy it so you don't make any spelling errors, okay?

So we're going to select the subscription and we also want to select a plan. So we're going to set true on that. And then we're going to also select the domains where the name of the domain contains the exact domain that we're passing in in here. Okay and then from that we also want to select the ID, name, icon, user ID and we also need the chat bot and for the chat bot we need the we need the ID, the welcome message, and the icon. Now this ID is super, super important.

With the help of this ID, we keep track of everything in our application. Everything related to the chatbot I meant. So our chatbots, so let's say our user has a chatbot, that chatbot is linked to an ID. Okay, it's very important. And yeah, just scroll down here and we're gonna say if the user domain exists, oops what is this, user domain exists, then I'm gonna return the user domain like this.

Awesome. And if not here, I'm just going to show some error here. I'm just going to say console.log so I can see what happened. And now let's go back and quickly import this server action. And this is await here.

So we have to change this to async. And I'm going to say if there are no domains, so the domain doesn't exist, the user doesn't have rights to access it or something like that, then I'm going to say redirect to dashboard. And this comes from next navigation. And in here, remove all the stuff and return a React Fragment. And inside the React Fragment, we're going to have a component in here.

And this component is the Info Bar. So go ahead and say Info Bar like this. So now if I try to go to 1 of these, Let's just see what happens. Okay, awesome, there we go. And after this, we have to have a div in here.

So go ahead, create a div. And first thing we're gonna have in here is something called settings form. Okay, and we have to create this component in just a second. So let's go ahead and do that. So this settings form component is going to be inside our settings folder.

So scroll down to forms, inside components, so we have forms in here, and then you're going to create a folder in here called settings, and inside this you're going to say form.tsx. And I'm just going to return a component and just change the title here. And for the types, I'm going to set it to the following. So I'm going to say ID name, the plan, the chatbot with the ID icon and welcome message or this is going to be null. And this is also going to be a client component.

So go up top and say use client and I'm going to import this component from here so it doesn't scream anymore and that should solve my error. And let's just go back into this component and now we can do whatever we want in here. I'm also going to destructure the values from this prop right here And we're going to need another hook inside this form. So go ahead open up your folder structure and you want to scroll to hooks and inside hooks click on the settings and go into your use settings hook in here. And then just scroll down to the bottom.

And this is basically the useSettings hook. So I'm going to say exportConst useSettings equal to an arrow function. I just typed gibberish there, so I'm going to do that 1 more time. And the first thing we need here is the useForm hook. So go ahead and say useForm, and we're going to need these domain settings props.

So let's go ahead and create that as well. So go into schema file, which is in go to go into your schema file and at the bottom here inside the settings dot schema. I'm just going to actually I'm just going to go on top here and I'm going to paste this in here and it's very simple. It's just a type called domain settings prop with domain, image and welcome message. Okay?

Now let's go back in here and I'm going to import this domain settings prop and we also need a schema. So go back into that file right in here, setting schema, scroll to the bottom, and I'm going to do the following. So just follow through with me. So we're going to say const, export const, domain setting schema equals z.object, and we need domain, image, welcome message. And okay, I think that's it, alright?

And for domain, it's a string with minimum 4 characters. We're going to refine it, so just copy this regular expression and if not, we're gonna say in here. This is not a valid domain Okay, and then this is also optional and then after that in here we're gonna have this right here which is or z dot literal empty we're gonna transform it and make sure this is undefined so I think what this is doing actually I'm not very sure guys I forgot why I actually wrote this in here But I think this is to check a different type. I think it's going to evaluate this. So it's or, right?

So it's going to evaluate this or probably this. I think that's what it is. Just do some research, okay? But it should be fine. And then next for Image, ZNE.optional.

And then welcome message is just a string with minimum characters. You understand what it is, right? And then we have refine on this right here. So the refine for this object is basically a schema. So if schema.image.length, if this exists, then inside this we're checking if it is 1 of the accepted file types and its file size is lower than the max upload size, then we're going to return true.

Okay, so that's how we are refining this specific input field and returning whether it's an error or not an error. And then in the bottom here, if there's no schema.image.length, then we're returning true as well. Okay? And then finally we're just sending a message here saying that, hey, you need to have something that's less than 2MB and it should be of these file types only. So now let's go back into our component and I'm going to import this schema from here.

And then after this I'm going to need use router so I'm going to import that. We're also going to need the toast so make sure you import use router from next navigation and then we also need the toast here and we're going to need 2 states first 1 is loading and deleting okay so loading set loading and then deleting and set deleting and then we're going to need a function here and this is an onUpdateSettings handler. Alright, so go ahead and say const onUpdateSettings, no need to say handler, that's fine, and I'm going to say handle submit invoke it and I'm going to pass in an arrow function and this arrow function is going to be an async function in here and we're going to get access to the values. And if you hover over this, you should see the domain settings props. Now in here, first I'm going to set loading to true before we do anything.

And then first thing is, if the domain exists, so we got some domain from here, then we're going to say const domain equal to await onUpdateDomain, which we have to create in just a second. So onUpdateDomain like this, and this is id values.domain. So I'm just passing these in here, and we'll get to this in just a second. Now go into your settings inside the actions right here. Scroll to the bottom and we're gonna do the following.

So all we're gonna do is on update domain. We're gonna check if the domain exists with the same name. Okay? And this is in, I think, in our entire application. So we're just gonna check client.domain.findFirst and we're gonna check for this domain name.

And if, only if it doesn't exist then we're going to say domain client domain dot update So we're going to update that name Okay so update it where this ID is equal to the ID which was provided and then change the data So change the name if the domain returned if this request returned a success Then we're just going to return that message if not return 400 and if everything fails say the name already exists and you can't do anything, oops, too bad. And then finally we're just going to print an error message. Now let's go back and just quickly import this call here, okay? And this ID, sorry I forgot to mention, we have to pass something into this hook, right? So here this ID is going to be a string and that's how we get access to this variable and that way we can pass it in here.

And then after this domain right here we're going to say if the domain exists then show the success message and finally after this blue curly bracket we're going to say if values dot image at 0 then first thing we're going to do is we're going to say const uploaded equal await upload So I'm going to import this. Actually, we can just do it up here. Yes, okay, let's go up top, all the way up top. And I'm going to say upload equal new upload client. Remember the same thing.

And we're going to pass in this public key. So I think you can just put this in a different file, guys. Yeah, I think that might make more sense. Okay but for now this should be okay and just scroll to the bottom and the next call is const image equal await on chatbot image update. Okay so let's go ahead and create that server action as well And let's go back into our settings inside the actions.

So search here, this 1. And after this, we're going to do the following. So I'm going to say on chatbot, image update, async ID string, an icon is a string as well. We're going to say const user await get the current user for no user return. And then we're just saying client.domain.update where it's this ID update the chatbot and provide its new icon.

Okay. And if that was successful, return a success message. If not, return 400 and then just print a message. Let's go back here and quickly import this. So essentially what we're doing is if the user tried to change the chatbot settings, right, we're trying to update all of the stuff, like whatever they wanted to update.

So here we're updating the domain info and some other stuff like the images and all that kind of stuff. Okay so that's why we're doing all this. And now here we're just gonna say if their image response was success, show a 200 success message and then finally just said is loading to false. And then after this curly bracket hit enter and we're gonna say if values dot welcome message, so if they wanted to update that, now we're going to have a server action for this as well. So I'm going to go back into our actions folder and click on the settings page, index.ts, and I'm just going to do the following.

So I'm going to say export const on update welcome message and I'm going to say async. What's the issue here? I think that's just TypeScript or maybe not. Not sure but it's showing up here. Interesting.

Okay there you go. It's magic dude. And then we want to say message and domain as the parameters. And then we don't need to print this out here. Then we're going to try catch.

We're going to say update await client.domain.update where the id is like this. And then the data, what we're updating, is just this message. So guys, you can also just create 1 function for this. Okay, so take this up as a challenge. I showed you how to do it for multiple different calls, but you see how this could be a little inefficient, and I have done something very similar in past projects and showed you how to create 1 call for everything.

Okay, but take it up as a challenge, use chat GPT if you'd like, okay, copy everything, put it into chat, do whatever you care, whatever you want, I don't care. You need to get the answer at the end of the day, okay. That's all that matters, that's all your employer cares about, right. So go ahead and try to create 1 call that's going to help you update all the settings. So update all the settings for the chatbot.

So go ahead and try to give that a shot. That should hopefully be a good challenge for you. And again, the Discord is free, it's open. If you have any questions, you can join in there and the community will help you. If you want me to answer your questions, me and my team, then you can just join Prodigy's University.

You can meet so many successful people, entrepreneurs, SaaS business owners, literally, it's a dream environment for a web developer, right? So you can bring up your questions in there on live calls, and I'll be more than happy to break it down for you. Alright? Okay, so let's go back to the file now and import this. So it's the same thing guys, we're just updating the message and returning, right?

And that should solve this error here. Alright, so the welcome message is also done. Now we need to reset the form and we also need to do router.refresh to fetch new information. And finally we have to do set loading and set that to false. Nice, great job.

And then we're going to need another function that's going to help us here and this 1 is called onDeleteDomain. So if they try to delete something then we also have to have a handler for that. So const onDeleteDomain equal to async arrow function, like this. Actually we don't need any params here so I'm just going to go in here. And I'm going to say setDeleting to true first.

The next thing I'm going to do is make another server action, which is called onDeleteUserDomain. So go ahead, take this up as a challenge and try to build this action. If you don't know how to do it, I'm going to show you, but try to build an action here that's going to help you delete a domain from the database. Okay? Pause this video, give it a shot, and if you don't know how to do it, I'll show you exactly how to make it work.

Alright, hopefully you got it right. If not, no problem. This is exactly what you need to do. So you can go ahead and click on this so it'll take you into the folder, right, it's kind of like a shortcut, and you're gonna say export const on delete user domain is an async function. We need the ID of the domain, that's the most important thing, okay.

Then we're gonna check if the user exists, all that kind of stuff. And after this we're going to first verify that the domain belongs to the user. Alright? So go ahead and say await client.user findunique where clerk id And we're also going to select that ID true. So if it's a valid user, and if that domain actually belongs to that user, then we're going to check that that domain belongs to the user and finally delete it.

So we're going to say delete is client.domain.delete where this is true, and we're simply going to delete that and we're going to select the name equal true. And if the domain was deleted, we're going to return a status of 200 and just send the message with the domain name that was deleted And that's pretty much it. So let's go back here and let's complete this function down here. So I want to say if deleted, like this, and then in here, I'm going to return a toast. I'm also going to set deleting to false and I'm also going to do router.refresh.

And then finally at the bottom here, so after this curly bracket inside this function, I'm going to say return all of this stuff, every single thing that we just created. Okay so I made some errors here, that's why it's showing red color. So let's scroll up, I'm just going to copy this, scroll up and just replace this handler. Alright, so that's about it. Now, I'm going to copy this name, I'm going to go back into my component, my settings form and I'm going to say const, I'm going to destructure something, I'm going to set it to use settings, import it, and invoke it.

And then see, this is going to need the ID, right? So pass in the ID. And I'm also going to destructure some values, I'm just going to destructure register, on a base of literally everything it's sending. And the first thing we need here is the form. So I'm going to return a form component, I mean a form element, and we're going to pass in the on submit, so whatever we get from here.

So you see how we're using that logic and kind of, you know, changing things up, right? This is why we needed that hook, because now we can reuse this logic anywhere we need for any other form. And now I'm gonna have a div in here with the following class names, which is flex, flex-call, and gap-3. Okay, I made a spelling error here, so it's flex. All right, that's why I hate typing the class names, guys, because I always make spelling errors.

And then we need to put h2 in here, which is domain settings. And then we're going to need the separator component, and this comes from Shadsy and UI, so just go ahead and install that from components, UI separator. And then after this, we're going to have the Domain Update component. Okay? So just paste this here, and we have to create this in just a second, so let's go ahead and do that.

So open up your folder structure, and inside the settings under the components, the exact same folder that you're in, we're going to create a new file called domain-update.tsx. And inside this component, we're going to do the following. It's actually a very, very simple component. We're just going to have the form generator, okay? So let me go ahead and say this 1 more time.

So first, it's going to have a bunch of types, name, register, and the errors. And for register, it's use form register. We're just passing those types, right? Just do this. This is how we get some good TypeScript IntelliSense.

And then here I'm just destructuring the name, register, and the errors in here. And then here I'm returning a div with our magical form generator. OK, so you see how reusable and important this component is. Right. And in here, we're passing domain as a name.

Make sure you pass the exact same props or nothing's going to work. All right. So make sure you do that. And let's go back and import this component. Okay nice and then we're gonna have another component in here.

Now what is this component? Well this component is a is a code snippet component which is very very important because code snippet is what users can kind of copy and paste in their website and the chatbot is done. That's it. The chatbot is just going to show up on their website and they're set. They don't have to do anything else.

Alright so that's why I just follow through with me. Okay so we're going to say code snippet in here and open up your folder structure and create a new file in here called code, sorry, it's called code dash snippet dot tsx. And in here I'm just going to return a component like this and call it code snippet and let's also import this component and if you go into this component we have to get the id so I'm going to set id to string and I'm also going to destructure the id from here and now we need to create that string template right So just please copy paste this from the GitHub. If you have questions, bring it up in the Discord or you know just watch the video on Prodigy's University, it breaks down the entire architecture, okay? So basically It's a snippet where we're just creating an iframe and the iframe does all the magic.

Okay, but here is the most important thing. This ID right here. All right, this ID is what we use to basically, you know, understand which domain this comes from. So this uses an event that works under the hood called the, it's a message event, what we call the post message event. And that's how we communicate between the iframe and the parent website.

So if you don't understand guys, just reach out in the Discord or reach out in Prodities University, we'll help you. Okay, But just copy this for now. Please don't try to type it. Copy, paste, so you don't make any spelling errors. Please, please, I beg you.

Okay? Now in here, we're going to create another div. So remove everything, create a div in here. And inside this, we're going to create a section tag. Okay, so say section and I'm going to go ahead and import section.

And this is called code snippet. And then we're going to say copy and paste this code snippet into your header tag of your website. Okay, so let me go back. I think something looks a little off here. Okay, there we go.

So it's flex-column. Alright, that's the issue. Okay, so much better. Alright, and now let's go back into the code snippet and let's just kind of mess with this, okay? And after this component, I'm gonna say div, and I'm gonna pass in this class name right here, and you can probably set this to muted, I don't want to hard code that to some weird color, but yeah that's it, just set that to the following class name, and I'm gonna import the copy component.

Actually I have a better 1 here, so let me let me go ahead and import this 1. Okay, all right, so I actually feel their copy component which comes from Lucid React actually looks better, but I also have the other custom, you know, copy component in here. If you want to use it from the icon, you just have to pass it, and you have to also make sure to use the class name so you can use that in there, and the on-click handler, okay? And this is what it looks like. So if you click this, it essentially copies it onto the clipboard, okay?

And also, I'm going to change this to a Client Component. Scroll down here and I'm also going to import a hook in here. So I'm going to say Const use, sorry, Destructure Toast and I'm going to say we'll to use Toast, invoke this and all I'm going to do is just call this right here so once we have done copying so we're gonna say toast invoke it and we're gonna pass in the following so title is gonna be copied to clipboard and the description here is just gonna be you have or whatever I guess you can now paste the code inside your website. So also change this to you. So if I copy, there you go, so it shows some feedback so the user can see.

Alright, so much better. And that's about it guys. So also I don't like the muted, I actually hate it. I'm just going to set it to cream guys, just to be you know, in, just to be in sync with the theme of the application. But feel free to mess around, do literally whatever you want, I don't care.

Just make it look nice, okay? Please, thank you. Alright, so done, great! Now let's move to the next section. So I'm going to close this and I'm going to go back 1 page, okay?

After this code snippet area right here. And after this div, I'm going to say plan if it's equal to, so triple equal to, never put 1. If it's equal to pro plan or plan is equal to ultimate, which should actually be, you know, unlimited but that's fine. And now after this div right here, we're gonna go ahead and create another div and set the following class names like this. And inside this, we'll create another div and give that also the following class names, just like this.

And inside this, we're gonna create an H2 tag, okay? So this header is gonna say chatbot settings, and inside that, we're gonna have a div in here. And for this, we're gonna use the premium badge icon, okay? So I'm just gonna import this component and just remove this stuff. You don't need it.

And that should be it on that. And now if you scroll down here, you're going to see this premium icon here with a text here. Okay, and I'm going to show you what this means. It's a little challenge and it's very, very easy. I already showed you an example in 1 of the other, you know, not other projects, literally when we started, when we were doing the domains, right?

We already did it there, but don't worry, just hang in there, I'm going to tell you what the challenge is. And then we're going to create a separator, So go right here, so below this, 1, 2 and inside this hit enter and you're going to put a separator in here. And after the separator, create a div just like this. Alright, for some weird reason my browser wasn't refreshing so Now it is refreshing so it looks great. So yeah, put the separator and then the div with this class name and inside this we're going to create another div just like this.

And inside this we're going to use 2 custom components. First we're going to have the edit chatbot icon component and then the welcome message component so the user can change these settings. Alright? So first, go ahead, let's create this component first and then we'll get to the other 1. So inside your folder structure under the settings, you want to create another file and call it edit-chatbot-icon.tsx.

And in here, I'm just going to return a component and replace the title. And this component is going to have the following props, okay? It's going to have register, errors, chatbot with the ID, icon, and welcome message. And we also need this, I'm going to go ahead and import this from React Hook Forms, pass in the field values and the field errors as well from React Hook Forms and now I can also go in here and import this component. Now since this is screaming at me, I'm going to turn this off, okay, and I'm going to go into this component so I can tweak things around.

So now go ahead and also destructure some values from here, so we need the register error, so basically this right, all the props, so destructure those. And inside this component I'm going to actually remove whatever we have in here. I'm going to return a div and this div is going to have a section tag. So I'm going to say section in here and import section from our components and it's called chatbot icon. So the user can actually change the icon for the chatbot.

So the circle thing that shows up, they can change that to whatever they want. But there's a challenge, don't worry I'm gonna teach you, but this is the whole purpose of this this icon area and then we're going to also import the upload button so go ahead and import the upload button and the label is edits image register and pass in the errors as well so there you go you can see it right there and after this we're gonna do a simple thing here, which is we're going to say if the chatbot icon exists, if this is true, then we're going to return the image and the bot. If not, we're going to return another component called Bot Icon. So for now, let's import next image here, and we need to get access to this. So basically, when the user has uploaded a custom chatbot image, we're going to get that from UploadCare, and we're going to render it in here.

Alright? And for this Bot icon, you should actually have it. Alright? You should have it inside the icons folder. But I don't have it, so I'm just going to update it.

But don't worry guys, you will have it. Okay? So I'm going to create something in here called BotIcon.tsx. And I'm just going to paste this in here for now but you will have it. Don't worry, don't panic.

And I'm going to scroll down here. I'm going to import this component. Okay? And there you go. It looks absolutely amazing.

And now we can go back 1 page. Okay, I see some weird errors. All right, it's just TypeScript acting crazy. So go ahead close this Let's go back and we have to also create the welcome message component So first thing is we're gonna dynamic. I'm gonna show you something, right?

I think we already did this before but if we didn't let me see I think we already did it Dynamic art if we didn't no problem. So I'm gonna show you how you can improve performance of some components. Sometimes components in React can be very expensive, and what that means is that there is a bunch of complex functionality like rendering, use effects, a bunch of things that are happening under the hood. And as a result, you need to sort of bring in the component only when it is needed. So you can actually dynamically import components so that Next.js will know only when it is needed and then it will send the component to the front end.

Ok so this is an easy way to actually improve performance. Now I'm not saying this is the only way so you don't you don't always do it this way. But sometimes you can use this option to improve performance. Okay, I'm trying to explain the most like simple terms as possible, okay? You can actually use like use memo, react memo, and all these kind of things to improve performance.

But for now, we're just going to look at this 1. So open your folder structure and inside the same folder you're going to create another file and this file is called greetings. Sorry, dash message.tsx and in here I'm just going to return a component and I'm going to set a new name to it so it's greetings message and this component is gonna have the following props okay the message register and errors and I'm gonna also set this of course okay let me remove this and import these you know values that are needed. So something is wrong here. Value, all right, there we go.

And for the errors as well. I hate how, you know, TypeScript just starts panicking, man. Why are you doing this? Just give me the values. Oh, okay, it was just me.

Sorry guys, it was just me, nevermind. Now, in here, I'm also going to destructure everything. So, I'm going to go ahead, open this up, and destructure all the props. Now I'm going to remove this from here, and I'm going to return a div. And inside this div, I'm going to return a section component and I'm going to import section and I'm going to say greeting message and also let's go back and let's import this so we can actually see what's going on.

So in here just uncomment this okay And we have the welcome message which is message. Okay, it's showing some error Okay, so I don't know why the greeting message is not here, which is a little weird to me Let me go into this component greetings message. Uh-huh Okay. Oh, maybe I think this is what's Mmm, I think this might be it. So okay, for now I'm just going to change this name.

I think that's how we're referencing it in there. So now if you say greeting, let's see. All right, so I think default should work, but I'm not sure why this is not working. But it's alright, we're good to go. Don't worry about it.

And let's go back now so we can actually see something here. Alright, nice. And I'm going to scroll down all the way to the welcome message component, go into this component, and right here, go inside this component, and let's continue from here. So after the section go ahead and create another div and this div is going to have a width of 500 pixels and then we're going to import our magical form generator component and go ahead and import that and we're going to set the placeholder like this. The input is gonna be a text area, right, so the user can put whatever they want in here.

And then we're gonna have line, 2 lines, register, passing the errors, and the welcome message. Alright, and now let's go back and let's scroll all the way down, right down here, and after the welcome message, guys, so this is div right here, right? Hit enter. We're gonna create another div and inside that div we're gonna have an image tag, okay? So let's go ahead and import the image tag from next image.

And if you scroll down, now you can see the image. So I know this looks really really bad in the mobile display. So I just went up top here and I set the grid columns to to be on medium devices. Okay. So now if you go above the medium device, it kind of puts it in here and then on the small device, mobile devices just doing it this way.

Here's a little sneak peek into what our deep dive sessions look like every single Friday. When the bot mounts, the first thing that happens is a use chatbot hook is fired. And this use chatbot hook, what is its purpose? 1 thing, which is to get all info. So there's a use effect that does this.

We essentially communicate with the website and our iframe through something called a post message. There's an event that you can fire on the window and that basically allows us to transfer. This function here is what basically syncs the chatbot to your domain. Once we get the dimensions, we send back the ID and I put that on my resume and that got me a job while I was learning the skills on the site. Like really in depth.

That's what I use. So let's understand how these components are rendered out. So we have server side rendering and then we have the client side stuff. All the JavaScript code comes to the client, now with server-side rendering, and then it creates a whole. Our deep dive sessions are live calls where you get to see the entire project being built from start to finish.

You get to ask questions from some of the best in the industry and learn some real-life skills like how to start your own agency, sales, how to get clients, how to close them, how to get them to book calls on your calendar through a proven strategy that has helped me and hundreds of other students get clients organically and many more skills that you will not find on the internet. So I'll put a link in the description and if you are ready to start your journey today, click on it and our team will see you in there. The thing I want to fix here is if you go into the sidebar component, right, which is inside your, let's see, so components sidebar and you go into Minimized Menu, right here we had Padding Y set to 3. So what it was doing is when you go here, it's not setting the Padding Y. So, I mean, it's not setting the Padding equally.

So just change it to Padding 3 and that should make it look so much better. Alright? Alright, And the other thing I changed was the order. So all you had to do was go to this 1 here. And I just set this to order last.

And from medium devices, I can say order first. I think this should work. Let's see. Okay, definitely doesn't work. Okay, it does work.

Never mind guys. So yeah, you have to set it to order first. Okay, tailwind is saying order 1, but it for some reason does not work. I don't know why. So just say order first.

All right. And now when you expand, you can see this like this, and you can kind of scroll through this. Okay, nice. Now scroll all the way to the bottom here after this div, and you're going to say div again in here, and inside that you're going to create another button and that button is going to have the on delete domain and variant destructive and we're also going to pass in a loader component that we created. Yep go ahead and import it from the correct folder okay don't import it from the other Lucid React folder.

This is our custom loader. And here, this is button set loader. All right, this should be good. So yeah, now you have the delete domain, so you can essentially delete it. And of course, you can also save it right here.

All right, great job, guys. Now go back into your folder structure and you want to go into our domain page, okay, which is right here. So inside app, dashboard, settings, domain, and get into that page. And now we have to create another form in here, and this 1 is called the bot-training form. Okay?

And this bot-training form is also going to need some props, I'm just going to pass it right now. It's the ID, and let's go ahead and create this component. And to do this, I'm going to go back into the settings folder in here under components and I'm going to say bot-training.tsx and in here I'm just going to return a component and I'm going to change the title. So this is going to need a string, right, as a prop so I'm going to pass it in here and I'm also going to destructure this from here as well. And the first thing we need here is a div guys so go ahead and say div just like this and inside this div we're gonna have another div with an H2 and a paragraph that says bot training and let's also go ahead and import this component.

So now if you scroll down here, you should see this right here, all right? Looks great, okay? And then in here, I set this 1 to flex, flex column, and gap of 2, okay? And this will give it some equal spacing so it looks much better. Now after this we're going to create a really cool component called TabsMenu.

TabsMenu is something that comes from ShadCNUI, so I'm just going to go ahead and import it real quick. We're actually going to create another component which is going to use the tab components. That 1 comes from Shad C and UR. Go ahead and copy this. I know we're going to have a bunch of errors for now.

What I'll do is I'll just hide this and I'll get back to this in just a second. Go into your folder and scroll to the tabs folder Sorry the components folder and in here we're gonna create another folder called tabs Just like this and inside this tabs folder. You can create an index dot TSX file and go ahead and return a component and just set it to tabs menu. And this component is going to take the following props. We need the triggers, the label, the icon, children, class name and the button element.

And I'm also going to go ahead and destructure everything from here. And now I'm going to use the ShatCNUI components, okay? So I'm going to go ahead and import it so it's easier for me. And first thing we need is the tabs component. So replace this with the tabs component.

And then we need the tabs list right inside this. So we're going to say tabs list and it's going to have the following class name like this and we're going to pass in all the triggers in here, right? And for each trigger we're going to say tabs trigger. So this comes from Chatsy and UI. You have to render out a trigger for each tab.

And I'm just going to have an icon, and that's pretty much, and the label, all right? And then we're going to have a button here, so whatever button that was passed in. And then we're also going to have a children component right here, okay? So now let's go back and let's quickly import this. So if you import, I mean uncomment this, let's go ahead and import this 1 and let's also import the tabs content, not from Radix UI, okay, it comes from ShadZien and then helpdesk is another, these are the tab contents basically, okay.

The helpdesk is 1 side and then we have the filter questions. Now the filter questions is 1 of the most important because that is where we get to train our bot to ask website visitors specific questions. So I'm going to comment these for now and I'm going to get this constant variable right here. So just go ahead and import it from the constants file. So if you already have it in there, great.

If you don't, You can copy it from GitHub. I know we already typed this so that's why we have it right now. And for this 1, first thing I'm going to do is the help desk questions. Okay? So go into the settings page right in here and you're going to create help-desk.tsx.

And in here we're going to return a component and set it to help desk components. And this component is just going to take 1 prop it's called ID which is a string and you can go ahead and destructure it from here as well. And now we need another hook for this component, which is called Use Help Desk. So you want to scroll down to the hooks right here and click on Use Settings and then scroll down to the bottom and this is the hook. So don't worry it's going to be like huge but I'll literally break it down for you.

So let's go ahead and shrink all of this so we can go step by step. So first thing is we have the helpdesk hook right in here and it takes the ID, okay? And then we're gonna have useForm. So what is this? Well we already did this before, right?

We're creating useForm here so we're getting this from React Hook forms, and we're getting register form errors and all this kind of stuff, so we can send it down into the components. And now we need the helpdesk question props, so let's go ahead and do that. So the helpdesk question props is going to be inside settings schema.typescript. So let's go down here, right in here, and I'm gonna go all the way up top and I'm gonna say the following which is question and answer. That's literally it.

Okay so now going back here I can import this and inside this we're also passing the resolver and we're saying Zod resolver and this is also going to need a schema. So let's go ahead and get the schema as well and this schema is inside the same file so I'm just going to click in here scroll to the bottom and the schema is as follows. So it's export const helpdesk question schema, which is z.object question and answer, okay? And I also did the same for the filter question, so we don't have to come back to it, which is filter questions is z.object for the question. And then we have the add product schema.

So this is something that we are coming to later. So if you don't know what the schema is, it's very simple. The user also has the ability to create products inside Corina AI and sell them on a specific or special landing page for each domain. Okay? So it's gonna be super super fun.

Stay to the end of this video. You're gonna learn so much more than any other YouTube video, period. This was my promise to you. So you're gonna get so much value out of this 1 single project. If you put this project on your resume, I myself would hire you, okay?

So just follow through guys. It's gonna be the best project. There's no other project on the internet that covers all these topics. So make sure you follow till the end so you get the full value and you understand how everything works. Go back to the component now and let's also import the schema.

And now we have this part set up. So the next thing is we're just importing Toast. Okay, very simple. We're creating a state here called setLoading and loading. Then we're getting isQuestions and set isQuestions, so we're just getting all the questions and passing it in here into the state, and it's an array of these.

And by default, it's a default array. And then we're going to have the onSubmitQuestionHandler. What does this handler do? Very simple. First we set isLoading to true and then we make the server call, right?

The API request. So let's go ahead and import, let's actually create the server call. I keep calling it server call, I just realized that. Sorry guys, it's server action. Oh god, alright.

So guys, I'm getting drained, alright? It's a really really big project. So go up here into your actions folder click on the settings and then scroll down into the index.typescript file and then this is exactly what we're gonna do so we're gonna say on create help desk questions and here is the API call we're essentially just you know first updating or creating this question and then we're also getting all the questions back, all the help desk questions. Okay? So we're ID and then we're putting this data which is help desk.

We're creating this passing question and answer and then we're gonna also include in the call we're gonna include the help desk. We're gonna select the ID question and answer and if there's anything return them. If not send an error. Very very straightforward. So let's go ahead and import this server action.

Server call. Okay Let's import this back and now we can actually continue from here. Man, I'm going to laugh all night because of this. Okay, so in these questions, we're just saying set is questions and then we're setting the questions to whatever came back from the API response. And then we're just setting a toast here and just showing the success, setting loading to false, and then we're resetting the form.

Very very simple. Next, there's another function in here, onGetQuestions. This function basically helps us, well I hope you guessed it correct, it helps you get all the helpdesk questions. How amazing is that? So let's go back into that file.

So I'm just going to click here so it takes me in there, kind of like a shortcut, and I'm going to do the following. So I'm going to say on get all helpdesk questions. It's an async function that needs the ID and we're going to say questions equal to helpdesk.findmany where it is this specific domain and we're getting this specific, you know, properties and then we're just returning that if it exists, okay? Let's go back here and let's also import this. Guys, you see it's very straightforward, right?

Web development is so easy. Literally anyone on earth can become a web developer. All right? And that's it. If the questions exist, we'll go ahead and set all the questions and we'll set is loading to false and then in here we have a use effect so I'm gonna import this use effect from react and we're gonna have the on get question so when this hook is you know used in any component we are essentially reusing the lifecycle method here okay use effect under the hood is a lifecycle method.

So when the component mounts, it's basically going to get all this data and it's going to store it inside. Alright, and finally we're just returning the register on submit question first, the is questions and the loading state. Now let's go back to our help desk question, sorry component right in here which is inside our settings folder and on top we're gonna use this hook. Alright so we're gonna say const register errors on submit questions is questions and loading equal to use helpdesk Go ahead and import that and the first thing we need here is a card component So I'm gonna import this card component and because everything comes from chat cn UI to make my life easy today I'm just gonna go ahead and import all of this up top and then we're gonna have the card The card content in here so pass the card content and then we need the card title So in here passing the card title and then we need the form element So inside this card content itself say form element and we're passing in our on submit. Okay, so you see when this is submitted, we're essentially firing this exact function.

What is that function? Let's go in here and look at it. It literally is a handle submit function, okay? It creates the Help Desk questions and it passes it in there and sends us any message if everything was successful. That's literally it.

So inside this form, I'm going to create a div and this div is going to have a section inside it. And this section component, I'm going to import it from our components folder. It's going to have questions. Add a question that you believe is frequently asked. Okay, I see some issues here.

I think we need to import this component, so let's go back. And let's import this component from Help Desk, so we can see something in here. Okay, so we are using a client component and that is not correct. So let's go into this component. Let's scroll up top because this is now using a client.

It's using a hook, right? So that only works on the client side. We're going to say use client. Awesome. And Now if you scroll all the way down, you should see this thing right here, but if you click through this, nothing is going to render for questions, and the reason is because we didn't put it in there yet, right?

So let's scroll back down here and let's continue. So after the section guys, hit enter and we're going to use the magical form generator component, and we're going to pass in help desk form as the form in here. The name is question, input, and then what else? Type your question and text. So if you look at it, it's literally just a text field.

And then hit enter after this div and we're gonna say div again, flex flex colon gap of 3 for this section and the form generator. So another form generator that's gonna say text area with the answer help desk form, type your answer and the text in here. And then finally at the bottom here, after this div, we're gonna have a button here and I'm gonna import this button from Components UI button and it's gonna say create. So now I can create a question and the question can be rendered out to the website visitors so they understand, you know, they can basically look at some frequently asked questions. And I actually, I don't like the text being black here.

I want it to be white. Okay, that kind of looks nicer for some reason, but also not so nicer. But I'm just going to keep it okay leave me alone please thank you bye and finally after the card content right here hit enter we're gonna create another 1 called card content and I'm gonna import the loader component and inside this we're gonna need an accordion component And this accordion is a custom accordion component, okay? It's not the 1 from Shadsy and UI. So copy this, alright, and you're gonna go...

Actually, let me finish this too. So we're passing the key, it needs a trigger, so we can open the accordion and the content, which is the answer. And then we just have card description saying no questions. So right now, since there are no questions, we can just show no questions to show. Alright?

Something like this. So the message is much more clear. So now let's go ahead and create this component. So you want to go into your components folder right in here and you're going to create a Bordean component like this and inside that index.typescript, sorry please change this to index.tsx and I'm going to return a component in here and change the name. And this component is going to take trigger and it's also going to take the content.

Alright, I forgot to paste it in there. So we need the trigger and the content for this component and we also need to destructure this, right? So let's go ahead and destructure this stuff from here. And here's what you're gonna do. So go up top and you're gonna say import, right, from at components, sorry, at slash components slash UI slash accordion, okay?

And here's what you're gonna import. So you're gonna import accordion as Shadzian accordion, just like this. Alright? And everything else we can just import. So I just wanted to rename this because our component is also named as accordion.

Alright? So Inside here I'm going to return our beautiful Shadzian accordion component and we're going to pass the type equal single and collapsible. And inside this the accordion item which is going to have the trigger and the content. So let's go ahead and import these as well from Components UI not from Radix UI and let's do the same for content as well And now if we go back into our component, we need to import accordion So I'm gonna go ahead and import accordion and if you don't know which page this is This is back inside our helpdesk components. Okay.

Alright, awesome So we don't have anything right in here but we're gonna quickly test this out to see if it works. So I'm just gonna go in here and I'm gonna say, what is Prodigy's diversity? And in here I'm just gonna paste my response. Basically we have deep dive calls and what we do is we break down everything on the calls. And I'm also going to put this together just in 1 line so it's easier to read.

Actually it's not easier to read, but I'm just curious what it would do anyway. So let's just put it like this for now. So we have the architecture, we break down the wire framings, the workflows, the Figma layouts, the project management, the backlog, how I get the cool ideas for the next project, the early access to the project along with the code base, right? And then you get to also ask questions to the experts and then you also have the opportunity to get feedback on future, you know, projects and the features that we can include. So if you were here in Prodigy's University, you were actually able to control all these things, right?

You can give us some advice what you would like to see and we can make that work. Oh and also 1 more thing we also have the limited time bonuses this is only for the first 26 people we are giving away an advanced sales course this course is all you need to close any deal literally any deal trust me on this I have done sales forever I have closed more than $200, 000 in sales. This is the best sales framework you will ever get in your entire life. Okay And also the secret 5 level blueprint for social media, how you can make passive income, and then the success mindset course. So I'm just gonna put this in here, and I'm gonna go ahead and hit create.

Before that, I'm gonna copy all of this, because that's gonna be a waste of my effort. So create this, boom, there we go. And as you can see, we have our question and the answers. Okay, the answers look horrible, guys. Please figure it out, okay?

I'm struggling here, just do it on your own, okay? I guess you can render them using some sort of markup text. Okay? But there you go. Now you can have questions with answers.

And if you look at it on the desktop view, so if you scroll down here, as you can see right here, we have the, you know, what is Prodigy's University. You can hit this accordion and you can take a look at this. Alright guys, so the first bonus add-on for this project which is available to Prodigy's University members is the additional chatbot customization options. Honestly speaking, I've already given the answer to you. You can literally look at it right here, right chatbot icon and the greeting message.

And based on this you can create some additional features. And the additional feature is the custom color for the chatbot. And you can also change the text color of the chatbot as well. So scroll to the description, you're going to find a link in there. Click on that link and it's going to take you to Prodigy's University.

Join and me and my team will show you exactly how to do this additional feature. If you don't know how to build it, we'll show you how to build it in the deep dive session this Friday. Okay, so don't forget to join. See you there. There we go, we have already finished the help desk questions.

We also have to create the bot filter questions, okay, which is this tab and right now since there's nothing in there, it's not gonna show anything, okay. So let's go ahead and build that component out. Okay, first thing is I had to spin up my server, so go ahead and do that if you have to as well, and just refresh the browser. So go ahead, scroll to the components section in here, and go into forms, and then click on settings, and inside this component, you're going to click on bot training. And down here you're going to find this component that we commented out so go ahead and uncomment it.

Let's copy this title because we're going to create a new component. And open your sidebar go into the settings folder and you're going to create filter-questions.tsx and if you guys are part of Prodigy's University you'll know why we call this filter questions okay but yeah just return a component here and just change the title and I'm gonna go back here and also import this component so that it doesn't yell at me. And then let's go back into this component and add the following props. So the first prop is the ID, which is a string. And I'm also going to go ahead and destructure it from here.

I'm going to go into my folder structure and I'm going to scroll down to hooks and inside that go into settings and inside you settings. And now we're going to create another hook and this hook is essentially going to enable us to, you know, create filter questions. So exactly what we did for the regular questions, right? The help desk questions. The exact same thing, but for the filter questions.

Okay? So try to take this up as a challenge. You don't have to. I know this is, you know, a pretty difficult challenge, but if you can do it, I suggest you pause this video, try to guess. You guys are web developers now.

I want you to think like a web developer okay I don't want you to just copy copy all the time so go ahead pause this video at least try to map out what do you need in here for the use filter questions hook and it's I'm literally telling you it's exactly the same thing as this but just figure out why you need to do this and what are the steps inside that that use filter questions hook Okay so go ahead pause this video and take it up as a challenge. If you don't know how to do it I'll show you exactly how to do it. Okay hopefully you got it correct if not don't worry I'm gonna show you exactly what you need to do. So we're gonna say export const and this is an arrow function so I'm gonna create an arrow function in here and this of course is going to need the ID, which is a string. And this ID is going to help us identify which chatbot we're trying to get the filter questions for.

And inside this, If you compare right here, the first thing we did right here is we used this Use Form to get some values. We're going to do the exact same process in here, but just with a different schema and different prop types. So we're going to say const register handle submit. We're going to get the errors from form state, reset, and then use form. And now we're going to pass in the filter questions props.

And the filter questions props is going to be inside our schema file. So go into schema, go into settings schema, scroll up top. And right here I'm just going to go ahead and paste this. And I think we also, I mean, we already imported the other 1, let's see, okay? So just import the filter questions props and the filter question schema, all right, there we go.

And if you wanna look at that schema, very straightforward, it is just a question, nothing else, okay? Because the question is all we need to feed into the OpenAI API and the AI will then figure everything else out. Don't get overwhelmed, that's fine. We're gonna get to the fun part in just a second. Just follow through and you'll be good.

So let's go back here and now let's proceed from here. So after this I'm gonna say use toast I'm gonna get toast and I'm also going to create a state and this state is called loading Oops, I have to say const loading and I'm gonna create 1 more state in here and this state is called Is questions? Okay and set is question. I think we have something very similar. Alright, there we go.

So it's pretty much the same thing. We're just going to create this, and it's going to be an array with this object, which is id in question. And here, after this array, this state right here, we're going to create a handler, okay? And this handler is called the on add filter questions handler. So this is going to look very similar to what we created, you know, in the last hook.

And we're going to say handle submit, and we're going to pass in the async callback function for a set loading to true. And then we're going to say await, onCreateFilterQuestions, this is another server action, we'll get to this, don't worry about it, but look at this section first, right? So we're checking if all the questions exist, if they do, then we're setting it to this local state, And this state is what we're going to use in all our components to do whatever we want, okay? To render them, to show them like literally whatever we whatever we need. And then here we're just going to use a Toast to just show the message, reset, and then we're going to set loading to false, alright?

So let's go ahead and build out the server action. So go ahead copy this and go into your actions folder and then open up settings Click on index.typescript scroll all the way to the bottom. Oh my god. There's a lot. Okay scroll here This is just the beginning guys.

There's so much in this project. I'm so super excited for it So yeah, just go ahead and we want to say const export const paste this function. It's an async function, so I'm going to change this to async and this is going to need the ID, okay, which is a string and then after that we're going to have question which is a string as well. Let me change this to a colon. Alright and inside this first thing we're gonna do is we're gonna have a try-catch block and inside the try-catch block we're gonna make a call to the database.

So we're gonna say filter question equal to await client.domains.update. Okay where? So for this ID update it and we're gonna pass in this data. Okay So we're just going to create a new question, that's pretty much it. And then we're also going to retrieve some data, so we're going to say include all the filtered questions, give me the ID and the question itself.

And then after this line right here we're going to say if the questions exist go ahead and just return a 200 response or return a 400 response saying you know something went wrong and if an actual error took place we'll just console the error in here. Alright and now let's go back and let's import the server action. Alright so now we have done this. What about calling all the questions when the component mounts? We need that too, right?

So let's go ahead and say const on getQuestions which is going to be async function set isLoading to true and then we're going to create another server action in here. So I'm going to go back into that file and just make a very simple call. So where is this right here? Yeah click on this it's going to take you in here and then I'm going to say const on get all filter questions is an async function, which takes in an ID, which is a string, and I'm just going to say try catch, right? And inside the try block, I'm going to make a call to the database and say client.filterquestions.findmany where the domain ID is like this.

I want to select question and ID, and I'm going to order them in ascending order, and then I'm going to return 200 along with all the questions. Okay, and then you know just send an error response if something happened. I'm just print out an error message for now. And let's go back and let's quickly import this server action here, And then finally when the component mounts we want to do something, right? So we're gonna say useEffect and then we're gonna fire this, we're gonna basically invoke this function right here, alright?

And then the main point of all of this is to return all this data. So we're gonna return all these states, the functions, the handlers, whatever we created, just return them. Okay, so if you got this answer, great job. You deserve a round of applause. Alright, let's move on to the next section now.

So going back to our filter question component, which is inside the settings folder under forms. Okay let's give you the proper path. So components, forms, settings. Okay and inside this we're going to do the following. So I'm gonna go ahead and make use of that hook that I just created and I'm gonna say use helpdesk.

I'm gonna invoke that and you know pass in the ID and now it's gonna fetch all the data for me. And now it's saying that this component is using this hook. So we've done this a hundred times. Guess what is the problem? Because so many people are still asking me this question inside the Discord.

Okay, I don't want this question anymore guys. Right now, solve this problem. Right here, I'm saying use help desk, and it's telling me you're importing a component that needs use router. It only works in a client component, but none of its parents are marked with use client. So go ahead pause this video, try to guess if you don't know what to do, I'll show you exactly what to do.

Okay, hopefully you guessed the correct answer. It is as simple as just saying use client. That's it. Because this component has to be a client component because this is using some client, you know, client features, right? Like hooks.

And that hook is using something else. So that's why we need to do this. First, I'm going to remove this stuff in here and I'm just going to create a card component. And I'm also going to import the card component from a UI folder and inside this card component I'm going to have the card content just like this. So the card content comes from the same folder as well and inside the card content I'm going to have card title and card title also is from the exact same folder and after this guys go ahead and say form.

Now the on submit that we got from here right we're just gonna pass that into this so we don't need action anymore so I'm just gonna remove this action and I'm gonna say on submit passing this submit handler and then say the following class names. And inside the form, I'm going to create another div, and inside this, I'm going to use our section component. And inside the section component, I'm going to pass in the following, you know, props, which is a label and a message that says question, add a question that you believe is... Well this is actually wrong so I'm just going to change this that you want your chatbot to ask. This sounds better.

And now we need our magical form generator component right here. So go ahead and import this component and make sure you pass in the exact same props, okay? Help desk form, actually I think, okay, I think this shouldn't matter for now but you can actually change this if you like to, but I don't want to mess up things, but I think it should be fine. When I test I'll know guys, but alright actually let me just do it right now. So this is actually called Filter, Questions, Form.

Okay? It shouldn't matter, but just make sure you do that, and the name is question, the placeholder is as follows, and the type is here as well, and then we have input as the input type. Great job. Yeah, I want to make sure that even I face the same bug. If you're going to face it, I need to face it too, okay?

That's the only way I can help you. So, yeah. So let's also see what we're building. So click on the questions tab and there you go. It says question, add a question that you want the chat bot to ask.

And I'm gonna put another component in here. I'm not sure if we're gonna need it. All right, I think let's just put it guys. So I'm gonna say div create a class with flex flex dash call and gap dash 3 and inside this I'm gonna create a section component and this section component is gonna have a label and the label is gonna be answer to questions or to question sorry and inside this I'm also going to pass in the message and the message is going to be equal to the answer for the question above. Now I don't think I'm gonna use this in the chatbot because you know the AI should do everything right?

The question, the the answer to the question is it doesn't really matter. All we need is to capture the data and store it. But I'm just going to put it in here. At least it can look good for, I guess, UI sake, but, or maybe you can make use of it if you guys want to. Alright?

And after this, I'm also going to create the form generator component. So let me just copy this here and paste it here and I'm going to change this up a little bit. So I'm going to set this to a text area and this name is going to be called answer, right? And for the form, I'm going to select this 1 and put filter questions form. Actually, this is fine.

It can stay there. And type your answer. And this can be of type text. And we can also set the lines to be equal to 5. So now you see we also have the answer to this even though we don't need it, right?

But we're just gonna have it in there because if I do want to then I have to come back to this and that's gonna be annoying. So yeah, and then after this div guys right here we're gonna have a button and this button is gonna help us submit the entire form. Okay? So go ahead import the button component, provide the following class names, and this is exactly what it looks like. It's a very, very simple component, and I'm going to change the text here from black to white, just like the, you know, the previous button, and that's it.

So now if you expand it, you're going to see this component like this. Alright, great job. And then outside this card content, we're gonna create another card content and this is gonna have the questions that the user wants. Okay, so remember we created that hook, right? We're gonna use the questions that come from that state and we're gonna render out, you know, whatever we need to.

So I'm going to say Loader in here and import our loading our custom loading component and I'm going to pass in the loading prop just like this and if the questions.length this means if there were any questions that came back from the API request, then we're going to map over them and we're going to say accordion and we're going to import our I think this is our custom accordion. Okay so not from components UI, not this 1, it's components accordion. Alright so import that 1 and then passing the key trigger and the content and then finally the card description. So if none of these satisfy then just show you know no questions exist. So let's go ahead and look at what this looks like.

Okay, so let's click on questions. Alright, something is wrong guys. It is showing me the wrong component. Let me see what's going on. Oh, really sorry.

Really, really sorry guys. I was actually... Okay, it's not too bad. No problem. We're fine.

We're okay. Just go ahead and change this here and call it Use Filter Questions. And this is going to be called On Add Filter Questions. And replace this on Submit, so that should solve that problem. And in here, instead of an accordion, we're gonna return a paragraph, because this is just the question itself.

So remove this component from here and just pass in a paragraph tag that shows the question itself and let's see what we see now. There we go Awesome. So the problem was I was using the wrong hook. For some reason I imported the use help desk components. All right, my bad.

So now for the moment of truth. Let's see how this works. Okay. So we're gonna say, what's your name? And I'm going to go ahead and hit create.

It's going to create my question. And there you go. It puts the question right in here. And another question I might want to ask is, for example, what are, let's say, what are our goals in web development? This way you get to actually filter out your leads.

That's why it's called filter questions, okay? And in our sales call, in our sales course inside Prodigy's University, guys, this is exactly what I'm talking about, all right? The filter questions. It is the most important part of the sales call. If you don't ask this question, these 2, there's literally 1 question that I told you guys to ask.

If you don't ask that question, you will almost 100% of the time lose the deal. Okay, it's very easy to lose a deal if you don't get things straight up, you know, right off the bat. Like, hey, this is what my intentions are. So that's why we're asking these questions so we get information from the client. This is what helps them convert.

Alright, so I'm going to go ahead and hit create here and that's going to create our second question. Great job. Alright, now go ahead, open up your folder structure and let's go into the app folder and let's go into the dashboard route And we're going to create another route in here. And this route is called conversation. Okay?

And inside this we're going to create a page.tsx. We're just going to return a component in here. And I'm going to call this component conversation page. Just like that. All right?

Awesome. So the first thing we're gonna do in here is we're gonna get all the account domains, okay? So we're gonna say cons, domains, and we already created this, so I'm just gonna say on get all, sorry, this would be 08, on get all account domains, invoke that, and I have to also change this to an async function. And this way if I click on the conversations tab, it should take me to the conversations page. Nice.

And go ahead and remove this and we're going to create a div in here. And this div is going to need a separator component inside it. So go ahead and import that as well. And then we're going to need 2 more things in here. So I'm just going to render it out for now, which is a div and inside that a navbar and then the messenger component.

Sorry guys, this is not navbar, this is infobar. So go ahead and import that and it should show whatever it needs to show on top. And I have to also comment this or else it's not going to render any data. So now you see the... Let's see what's going on here.

This separator is showing vertical and the reason is because there's another component we need to have above this. Okay, and this side we're basically going to show all the conversations. So it's gonna look like some sort of a chat Messenger or something. Okay, so let's go ahead and do that. So go up top here, hit Enter, and you're gonna say Conversation menu just like this, and we're gonna go ahead and create this component in just a second.

And I'm also gonna uncomment this so it throws an error so I know what's going on. Or actually, All right, let me just, I'll unmute it, okay? Because I want to see what I'm building. So go ahead, copy this, and we're going to build this component now. So open up your components right here, and you want to create a folder called conversations.

And inside this, you want to create index.tsx, return a component in here, and just change the title. And inside this, we're going to pass in some props. We need the domains, which is going to be an array of objects. Or it's going to be undefined in here. And then I'm also going to destructure this from here.

So I'm going to say domains like this. And now we're going to create a very very important hook that's going to be responsible for getting the chat rooms and all that kind of stuff. Alright? So go ahead open up your folder structure, go into hooks, we're going to create a folder in here called conversations and inside this go ahead and say use conversation dot typescript and inside this I'm going to export const use conversation just like this which is an arrow function and the first thing we're going to do in here is we're going to get use form. So let's go ahead and import all this stuff.

And we're also going to need another conversation search schema in here. Okay, so let's go ahead and open up the schema files right here. And we're going to create another schema file in here called conversation.schema.typescript. And in here I'm just going to paste the schema that we need and this schema is going to say conversation schema which is Zod type and I'm going to import Zod type from Zod and we're also going to need the props here. So I'm going to go ahead and paste the props up top.

It's basically query and domain, which is a string. And then we also need Z from Zod. So go ahead and import that 1 as well. And now we can go back to our component and we can import the schema. Nice.

Next, we're going to say use chat context and this is what we already created inside here. So we're just going to import this hook and we're going to get access to a bunch of values here. And I see that this is throwing some errors. I'm just going to go back all the way to the component that's throwing the error, which should be the page.tsx, and I'm just going to import this component, and I'm going to go right back into this component, and actually I'm going to go into the hook so I can continue there. I'm going to create a state here, and this state is called chatrooms, okay, and the state is going to look like this.

So basically it is an array of Objects right and that object is gonna have the email right for each customer because that's how we're linking each customer to the application, right, based on their email. So I'm gonna say email right here and I'm also gonna have the chat rooms for, you know, for our application. So I'm gonna have the chat room with the ID created at message and that message is going to have you know it's also an array of different properties right an array of objects and that 1 is message created at and scene this way we can get access to the chat rooms and we can render them out in here finally I need the loading states I'm going to get that as well. So it is loading and set loading. And I'm going to create a use effect in here.

So I'm going to go ahead and say use effect like this, invoke it and pass in an error function, pass in an empty dependency. And inside this error function, I'm going to say const search, cool 2, and we're going to get watch here, and this watch comes from use form, okay? So I'm going to pass in watch also as the dependency in here because I'm going to use it. So I'm going to say watch, invoke it, and I'm going to pass in an async arrow function in here and this is going to get access to the values and let's also remove this. Actually this is just a value in here and inside this function body I'm going to set loading to true then I'm going to create a very very simple try catch.

So I'm going to say try catch and then I'm going to make an API call here and it's basically 08 on get domain chat rooms. So let's go ahead and build that first but right after that we're just checking if the response is successful then we're going to set loading defaults and we're going to set the state. If not, print the message. That's all we're doing. So let's go ahead and build that server action now.

So scroll up top all the way to actions and you see conversation here. Go into index.typescript, scroll to the bottom, and we're going to create the following. So onGetDomainChatRooms is an async function here. It needs the ID, which is a string, and we're going to go into our database and search for the domain, and we're going to find unique. So we're going to find the domain, which is uniquely identifiable by the ID.

Okay? And for that we're going to select the following properties. Please don't make any spelling errors. Copy, paste from the GitHub. Okay?

Any questions you can show up on the Discord, show up in PU and I'll help you there. But for now, just if you're typing this, pause the screen and type perfectly. Don't make any spelling errors. So we're gonna select the customer and for that we're gonna select email, chat room and for the chat room we're gonna select created at ID and a message and for those messages we need the message itself created at and seen We're gonna order these by descending order, and we're gonna take 1. Okay?

And then if we got a response, return the response. If not, just print an error here. All right? And let's go back and quickly import the server action here. Nice.

And it's saying this has to be in an async. What's going on here? Let me see. Oh, sorry about this guys. So I put this try catch block outside our callback function.

So go inside this callback function and paste it in there. Okay. And then finally we are also going to unsubscribe from this listener. Okay so watch under the hood it actually sets up a subscribe right it's subscribed to some it subscribes to some changes so we have to also unsubscribe from that. Okay so we're gonna have a cleanup function here.

So we're gonna say return, pass in a callback. Inside this callback, we're gonna say search.unsubscribe and invoke it. And then we're gonna create a function in here. So after the use effect, we're gonna say const get active chat messages is an async function, right? And then we're going to create a server action right here called get chat messages.

So go back to the conversations page. I'm just gonna click on this 1 and yep I'm in there. I'm gonna scroll to the bottom and I'm gonna paste this here and basically it's an async function, right? We have a try-catch block and in here we're gonna say client.chatroom.findmany for this specific ID, right? And we're gonna select the ID live, whether it's in live mode, yes or not, right?

And then we need the messages for those. So we're going to get the ID, the role, the message itself, and the created at and seen. Alright? And then we also need order by sending. And then if the messages are there, go ahead and return.

If not, just return. I mean, If there's any error, we'll just print out a message. And I'm going to go in here and quickly import the server action. And if there was a response, so if this response was successful, we're going to set the chatroom ID to the current ID. And then we're going to pass in the, I mean, we're going to set load messages to false, and we're going to set our chats, our local state, to the messages at 0 dot message.

So the first message that was sent, the most recent 1 basically. And now after this curly brackets all the way at the bottom we're just gonna return every single thing that we just created. Okay So return register, chat room, loading and on get active chat messages. Now I'm going to go back into my conversations menu component and I'm going to use the use conversation hook that we just created. So go ahead import this hook and now you get access to all these things.

And we also have to change this to use client. Alright. First go ahead and say tabs. So I'm going to remove this. Actually I'm just going to create a div here first.

And inside the div I'm going to import tabs menu. Alright. And This Tabs menu basically comes from our Tabs component. Okay, it's this 1 right here. Look at this.

Tabs slash index, that specific component. And then this object, we've already put it in the Constance file, so I'm just going to go ahead and import that 1 as well. And inside this we're going to have the tabs content. So the tabs content for Unread in here is going to be the following. So I'm going to say Conversation Search and this is another custom component.

So let's go ahead and create this component. So I'm going to copy this here, go into our folder structure, and under this conversations folder itself, I'm going to create search.tsx. Okay, probably should give it a better name, but it's okay. We should be fine for now. Okay?

And I'm just going to change the name to conversation search. And this component is going to take a bunch of props and these props are going to be register which needs the use form register. So I'm going to import this from React Hook forms and the field values as well. And then I'm going to say domains is the following. So it's basically the same exact type that we have used so far.

And then here I'm going to destructure all of our props. Okay? And after this guys, we're going to create a div here. So go ahead remove this and this div is going to have the following class names. And here I'm going to show a drop-down.

Okay? So I'm going to say Select Component. Actually give me 1 second, let me do this 1 more time. Alright, there we go. So this is much more clean.

So we basically need the Select Component and we're going to use, we're going to essentially use the spread operator for the register object and pass them in as props into the select element and then we're gonna give the following class names and the option here is domain name, okay? And we're just going to loop over the domains and return an option for each of them, alright? So this 1 is basically the first default option. That's pretty much it. Now let's go back and quickly import this component here.

Okay, nice. And there you go. So now you can see this drop-down menu. Alright, and also you can see all of these icons. Nice!

I see these icons are repeated. You can probably just use something else if you want. I'm just going to use whatever I have right now. But yeah, you can use... There's a bunch of icons that I put in for you guys, right?

So just pick whatever you want in there. Now, after the conversation search component right here, we're going to create a div, okay? And this div right here is going to be flex flex column and we're going to have our loader component. So go ahead and bring in our loader and we're going to pass in the loading, the property that we got, right? Passing loading in here.

And then if the chat rooms exist, then we're going to say chatrooms.map and we're going to return a component called chat card, alright? And this chat card is going to take a bunch of props. Guys, if you think this is a lot of props, I really wish you got to see my most recent... Not my most recent, I think this was probably 2 years ago. They had a component that had props that went all the way till here, and it was horrifying.

But that's just what production level code looks like, right? But anyway, so just in case you're wondering, whoa, that's a lot of props, trust me, it's nothing, okay? Wait until you get into your first project and then you will know everything goes crazy, alright? Sorry, didn't mean to scare you there, I'm just cracking a joke, alright? So open the conversations tab and in here I'm going to say chatcard.tsx and return a component in here and say chatcard here as well.

Since this is screaming at me, I'm going to go back and quickly import this component and then go back into this so I can set the props. So the props for the chat card are as follows, or as follows, title, description, the created at id, and a function here called on chat, and then scene, which is boolean. And then of course you guys know you have to destructure everything from here, right? So go ahead and destructure them. And here I'm gonna create a hook, another hook called useChatTime, okay?

And before we do that, since this is a client component, I'm just gonna say useClient in here. And I don't think it's gonna matter because I think the parent component is already a client component So, you know, next.js knows when to change a component to a client or server component. Okay, but yeah Let's go ahead and create this server action. Sorry. Let's go ahead and create this hook.

That's what I meant to say. So you want to go into the Use Conversations component. So I'm just going to look it up from here, okay? And I found it right here. So I'm going to go into the Use Conversations hook.

And inside this page, scroll all the way to the bottom and I'm gonna do the following. So this is a pretty big thing, don't worry about it. It's not actually it's not too big. So let me also shrink everything else. Here we go.

So the first thing we need here is created at in the room ID. Okay And this is of type date and this is of type string. Here we're gonna say use chat context. If you remember we created this context here all the way at the bottom, right? So we're gonna get access to that context and we're gonna get the chat room from there.

Alright? Then we're gonna say message sent out. So this is a state that we're just creating in here. And then we have urgent and set urgent. This is basically, well, I think I should give you some info here.

So urgent basically means if someone just sent a message and the business owner has to respond back to someone and the chatbot couldn't handle it and it just gave them access, then their message will basically show up in here, as the urgent message. And next in here we have the onMessageReceivedData. So we're just gonna create a date here. So just copy this. It's literally just JavaScript stuff.

I think we also use chat.jpt to do this because this was annoying but just create a date. Then we're gonna get the difference which is current date minus the date that we just got which is right here and then we're gonna see the difference. If the difference is less than 0, then we're going to set the message sent at. So we're just creating some sort of a template string. And then here we're just saying if the current dot get hours is less than the dates get hours and that's less than 2 not less than sorry minus that basically gives us the answer that is less than 2 then we're gonna set it to an urgent response you know element right urgent response date and that message will show up atop so here we're also gonna say else we're gonna set message sent at we're gonna pass in the date and we're gonna pass in another function and I think this is a utility function.

So let's go ahead and create this function as well. Actually I think we already have this guys. Yeah there we go, we already have it. And if you don't know what it is, it's basically in here. Okay, so I'm just importing that as well.

And next we have another function in here, which is called on scene chat, okay? And this is saying, if chat room is equal to the room ID and it is urgent, then we're gonna say, await onViewUnreadMessage, okay? And this is another function that we need to create. So let's go ahead and do this. So you want to go into the conversations page under actions.

So I'll show you what to do. So we're going to go in here, go to conversations, actions, click on index, and in here scroll all the way to the bottom and we're going to do the following. So we're going to say export const on view unread message equal to async ID which is a string and we're going to have a try-catch And we're going to say await client.chatmessage.updateMany where it is this specific chat room and we're going to change the data to scene. Alright, and that's it. And let's just go back and quickly import the server action.

And we're also going to set urgent to false. And then we're going to have a use effect in here so we can capture all this info. And this is going to have chat room as the dependency in here. And then for the second use effect we're going to say onSetMessageReceivedData. So this 1 gets fired later.

And then we're just going to return all of this stuff that we need. And now let's close this hook and let's go back to our component. And let's go ahead and see... So the chat card should... We still need to complete this.

So let's go into the chat card And in here, let's go ahead and import the useChatTime hook. Okay? And after this, guys, we're first going to return a card component. So remove this and return a card component. And inside this, we're going to need a card content component.

And the card content first is going to have the avatar. Okay, so for the avatar right here, I'm just going to say avatar imported from UI avatar, and they also need the fallback component. So I'm going to put that 1 as well. And then user, which is a Lucid React icon that looks like this. And after this div, I'm gonna create another div right here, just like this.

And this div is going to have a div inside it and then pass another div inside that. And we're gonna have the card description which is gonna have the following class names and we're gonna put the title. And then we're also going to say if it's urgent or not, and depending on that, we're going to return a urgent icon. And this urgent icon is a custom component that is going to be inside your icons folder, Okay? So I'm going to go ahead and import this component like this and that should be it.

And after this we have a car description that's going to say description if that exists, then return description.substring and we're going to show only till 20 characters and then we're going to have dot dot dot or we're just gonna show this chat chat room is empty. Alright and then we're gonna have a div right after this div. Okay so right here hit enter and you're gonna say div class name width of 100 flex and justify end. Alright and then this is gonna have a description with the created at or the message sent at. Okay?

And sorry, if there is created at, then we're going to send the message sent at, which is what we get from our use chat timeout hook. Okay? Which is right here and this 1. This state that we're storing in here. So we get this weird thing that we created, right?

That's what we're sending back. Now I'm going to go back into my index.tsx file and now that we have our chat card set up, I'm going to go in here and I'm going to import the chat description. Now of course we cannot see any chats because we're not on the domain but we also don't have any chats from any customers. So this is something that we just have to wait till the end, okay? But if you click on it, it's gonna fetch, but since nothing is there, it's not gonna show anything.

Okay, I also want to make 1 small fix here. So you see how we have chat rooms here, right? This is going to be an array, and I don't know if you guys even know, but an empty array is considered a truthy value. Okay? In JavaScript that's just how it works.

I know it is crazy, but if you take some time and actually sit down and learn, you will understand. But chat rooms, even right here, it can be an empty array, and an empty array is a truth value. So because it's a truth value, it's still going to loop across the entire array, right? And because of that, we won't see this message at the bottom. We're not going to see the no chats.

So all you have to do, because we know that this will be an array regardless, we can just set the length. And then after that it's going to show no domains, no chats for your domains. Great job. Now I'm going to go back all the way here and actually, sorry guys, let's go back because we still have to continue. We only finished, you know, 1 tab content, right?

But this 1 is a challenge but I want to show you how you can do this so you can do it for yourself, okay? So right now I have showed you how to render out a component based on the tab menu that's been selected, right? So this 1 is the unread section and that's why we're just, for now, we're just rendering everything we have in here. But what about all expired and starred? You might want to have multiple sections in here.

Well this is all you have to do. So I'm gonna create it for you and you can take some time after this project, not right now, okay, do it later. But in here, all you need is, I'm going to actually put this in here, which is a separator component, and you just have a tab content for which specific value. So if you click on all, you will see all in here, expired, and starred. So inside this, instead of it, you would have to render out a component and then you know what to do.

Create a hook, put the hook inside the folder, and then use the data that comes from there, the exact same thing, like exactly what we did in here, right? And then you're going to render out that components, right? All the components that you need. All right? I hope that makes sense.

And we already have this component built out, So you literally only have to do the back end logic. The front end logic is pretty much the same. All right, so here's the challenge. Hope you can do it after the project. Don't do it right now because we have a ton more of fun stuff coming up.

So just tag along and then we'll get to that eventually at the end. Now after we created this, of course we're going to see all the chats in here, right, the chat menus, but we want to also see the chat message render out. Now unfortunately, we would have to build it without seeing it, but as we build, you're going to understand, okay? You have to know how to do this as a developer which is build and understand code at the same time Okay, so we're gonna try to build but I know it's gonna be a little blindly building but it's fine. Just tag along will be okay We're gonna create the messenger component.

Okay, So let's go ahead and build out that component. So copy this so it's easier, and you're gonna go into the conversations component under the components in here. And inside this folder, you wanna create the messenger component, messenger.tsx, and then we're gonna return a component and just rename the component. Now we're going to import use chat window. So go ahead and okay we need to create this I think.

So yeah let's go ahead and create this hook. So go into your folder structure, just scroll to the bottom right down here and you're gonna find hooks click on use conversations and you're gonna scroll all the way down and just follow through with me because we're gonna use a library here that is super super powerful but we have to actually wire it up in the end and I'll tell you why as we go Okay so you're gonna say export const, choose chat window, cool 2, an arrow function, and this hook is gonna have the following. So first thing is we need to get the chat context. So I'm gonna just say use chat context and I'm gonna get a bunch of properties from there as well. And I'm going to create a ref in here.

Okay, this ref is called the message window ref. And next, I'm going to use use form from React Hook forms again, and I'm going to get the register and the handle submit and reset. Okay, and for that we're going to need the chatbot message schema. So let's go ahead and create that as well. So I think we have some schema up here.

So I'm just gonna click on it so it takes me in there hopefully. Where are you? Okay there we go. Okay. So I'm gonna scroll down here and I'm gonna say the following.

So I'm gonna say export const chatbot schema, Xa type chatbot message props, and the message props is gonna look exactly like this. So scroll up top and I'm gonna say Content and Image. Okay, and now that we have created the message props, let's look at the schema itself. So we're gonna have, let me expand this a little bit. So in here, we're gonna have an object, so it's a custom type, right?

With the content and the image. And this is a string, and this is any, all right? Because it's a file type. And then we're going to refine it to make sure that the file type is only of the types that we can accept. So I'm going to import this, okay, maybe I just did not import it or export it, sorry.

So I'm going to go into my constants file right in here and actually it's not in constant so it's inside the settings schema, okay. And I need to export this and export the max upload size as well. Now I can actually go ahead and just import this and import the max upload size. Okay, and that's it So we're just making sure that it is 1 of the file types that we can accept and now let's go back into our project Sorry, let's go back into our use chat window hook because we need to complete it. Okay?

And after this, I'm just simply gonna go ahead and import this, and after this 1 here, I'm gonna say const onScrollToBottom, which is gonna be an arrow function, and this function is gonna need that ref that we just created. So we're going to say .current, sorry, we have to actually make sure it exists first. So .scroll, we're going to invoke it, and inside this we're going to do the following. So we're going to say top to be message window ref, .current, .scrollHeight, and then we're going to say left 0 and behavior smooth. Okay, so it'll essentially scroll all the way to the bottom when the component is mounted.

In order to do that, we have to say useEffects, invoke this, and pass in a callback function. And this is going to take the following dependencies, so we're going to put pass in the chats. God, I'm stuttering. And we're going to say message window ref, right? Sorry about that guys.

And in here, we're going to basically invoke the onScrollToBottom function. So basically when the component mounts, it's gonna invoke this and then it's gonna scroll to the bottom. And now, this is an important part, but we can't really proceed with it in a way, right? And the reason is because we are going to be using Pusher, which is a very powerful tool that's going to help us build two-way connections. Kind of like socket, right?

It helps us build real-time sockets. But the problem here is that Pusher has an issue where it keeps creating a new client every time the hot reload fires. So to prevent that, I'm just going to do everything and then hide it. So for now, I'm going to create the use effect and I'm going to say push your client. And of course, we don't have the push your client.

Yes, that's correct, because we did not create it. But we're just gonna create it and then just hide everything. So what I'm gonna do here is just show you. So we're subscribing to the Pusher client and if there is a chat room, we'll subscribe to the chat room and we're gonna bind it to this mode. And then we're going to pass in a callback function that essentially is going to get all the data that comes from there, this data, and we're going to set everything that's inside the state, inside our state, but we're going to add or append the new data that came in through Pusher and when this component unmounts we're going to say push your client dot unsubscribe and we're going to unsubscribe from this exact event that we're listening to okay this real-time mode So first thing I'm going to do is I'm going to open up the terminal.

I'm going to quit the terminal. I'm just going to do it multiple times actually. And then I'm going to say bun add pusher. Okay, wrong word. Bun add pusher.

And then I'm going to do bun add pusher dash js and add this package as well. And I'm going to go into my lib folder and go into utils and I'm going to scroll to the top here actually and I'm going to create our pusher client. And this pusher client is going to need new pusher client. And to get this we have to import it from PusherJS. So you want to scroll up top, and you're going to import it right here.

Of course, it's going to throw a bunch of errors because we don't have the API keys and all that kind of stuff. But don't worry, we're going to set it up for now and then we'll just hide it, okay? And we also need the PusherServer in here because we also need to create another util variable in here called Pusher Server, just like this. And I'm going to go back into our component which is the use, sorry, our hook, the use conversations hook, and in here I'm going to import this pusher client, just like this, and that should solve the error. But of course, I'm going to hide this, okay?

Hide it right here because we don't need it. The pusher just enables real-time mode. That means the data comes 2 ways, but that's fine, when we get to it, we can test it out. The problem is because of hot reloading, it's gonna create multiple clients, and yes, you can create something very similar like Prisma and do that stuff, but I just found it was so weird. I tried it and it just wasn't working correctly and I really did not have time.

But you can do some research, but I found a lot of, you know, threads online that were saying there was some issue with it. I'm pretty sure there's no issue with it. It's just the way I'm writing the code, okay? But for now, I'm just gonna hide it and we'll get back to this. So you guys know the drill work in progress flag Just like this and I'm gonna say set up pusher Okay, so that way when I look up work in progress like this I'm gonna find a bunch of things so I can come back to it and now after this I'm gonna need another function So const on handle sent message just like this is equal to handleSubmit and I'm going to invoke that and let's pass in an arrow function and this should be an async function and inside this we're going to create a try catch block just like this and the first thing we're gonna do in here is fire a server action called on owner send message and we have to create this in just a second so let's go ahead and create that so you want to go into the actions folder and you want to go into conversations you know scroll down right here and you're gonna do the following.

You're gonna say chat room, sorry, on owner send message. Oh this is send message. Okay let me change this to you guys. Alright it's the same thing. I don't know why.

Oh I thought it was something else. Alright Let's go back and in here I'm going to say chat room, message and role. This is what we need in the parameters. And then I'm going to say chat equal await. Oh, there's 2 awaits.

So let's remove this 1. Await client.chatroom.update where the ID is this chat room. And we're going to get the data, right? We're going to update the data, which is to update the message in the role and we're going to select the following. So we need the message, but from that, we need ID, role, message, created at and seen.

We're going to order it by descending and we're going to take 1, Okay? And then if it exists, return the chat itself. If not, just print the error if something happened. And let's go back here and let's quickly import the server action. And this callback function here gives us access to values.

So we can use that values there to actually get the content from it. And now I'm going to make sure we got something in this in the server action call so I'm going to say if the message exists then set our chats to be previous and we're going to pass in everything we have in our current state but we're going to add the new message so message dot message at 0 we're going to append it okay And then we're going to say await on real-time chat. And this is another server action, so I'm going to go into this and I'm going to scroll up top here and I'm going to do the following. So I'm going to say await on real-time chat is going to be equal to an async function that's going to need the chatroom ID, the message ID and role and we're just triggering a kind of like we're pushing something right to the server and that's why we're calling the pusher server here. Alright so I'll also import it just like this.

Alright nice and we're going to pass in the chat which is a message ID in the role. That way we can get it on all clients that are listening to it. Now let's go back here and I'm gonna quickly import this and just fetch it like this. And I'm also just going to hide this right here, okay, because we don't need it. And I'll also copy this work in progress setup, and I'm going to say uncomment this when pusher is set.

And if some error happens, just console.log and print out the error, just like that. And finally, we also have to return everything. So I'm just going to go all the way to the bottom right here and return the message window ref, the register, the on handle sent message, the chats loading and chat room. Now I can go back into my messenger component, right, under conversations, and I can import this hook. Alright, I'm going to remove this div, and I'm going to create another div in here.

And now I'm still having some errors. Okay, it's because I have to say bun run dev. So make sure you do that and refresh the browser. Oh, I totally forgot. So when we are firing this hook, let's go and see, we're actually passing in some, I mean we're literally calling it, right?

So we have to do something about it because it's going to actually try to create the client. And I totally forgot about that. So let me go ahead and fix that issue. So I'm going to go into my utils file right in here. And I'm just going to comment this.

Okay? So instead of commenting it guys, what I did is I hit enter, I commented the push your client and the push your server. And I just, you know, kind of populated this with an empty object. And of course, you know, the journal work in progress flag. Oops, this is wrong.

I have to put the backslash first. So work in progress. Uncomment the Pusher server, and I'm gonna copy this right here, duplicate it and move it all the way down here, and I'm gonna say Pusher client. Okay, nice. And now we can go back into our conversations component.

So let's go all the way up here into the page and let's make sure our conversations menu is completed first. Okay, this is completed. And I know we had the messenger component. So let's go ahead and import this. Okay, That is imported successfully.

And let's go back into the Messenger component as well, because I think we're using a hook in here, right? And because we're using a hook, this has to be a useClient component. And now we can proceed from here, okay? So let's take a look. Alright, Nothing's really there yet, but let's go ahead and proceed with this.

So if I say something here, alright, nice, it shows my component. So go ahead and create another div inside this div with the following class names, and this div is going to have our magical loader component, okay? Not the magical form generator, the loader component. And go ahead and import that and we're going to pass in the loading that we get from here. And all it does is, so let's also pass in a div, like a container for it, and we're going to get the message window ref.

So this is where all the messages are going to show, right? So we need that ref and this way we can bind to it and we can do whatever we want like getting the height of it, you know, all that kind of stuff. And now we're checking if the chats.length, that means there's something in there, okay? If there are a bunch of messages then we want to render the bubble component. Okay and if there's none then no chat selected.

So go ahead open up your folder structure you want to go into components and we're gonna create a chatbot component in here. Okay and this chatbot component is gonna have the bubble.tsx and I'm also going to return a component in here and set bubble as the component. And I'm also going to set some props on this component. So the props are message and the created at and go ahead and destructure these props from here. And the first thing we're gonna do in here guys is we're gonna create a date.

Okay a new date in here. So I'm gonna say let D equal to new date and a new... Okay we're gonna need a utility function and this utility function is called extract uuid from string. And let's go ahead and just please copy this, there's no point trying to type this out. So I'm going to go into the libs folder, go into utils and up top right here I'm going to paste this.

And it's just a regular expression that's going to help us extract, it literally says, right, extract the UUID from the string. So go ahead and import that and that should do it. So I'm going to pass in a class name and actually let me just render a new component in here, guys. So I'm going to remove this and I'm going to render a new div. And this div is going to have the CN function, so go ahead and import that as well.

And we're going to save message.role equal assistant or self start. I'm sorry, if it's equal to assistant, then we're going to set some CSS properties. Okay, so you're going to say self start or it's going to be self end and flex row reverse. So it's basically just the bubble itself, right? So which side should it show?

Should it show on the right or left side? And in here inside this div I'm going to say if the message.roll is assistant, then return this avatar. If not, return this avatar. So I'm going to go up top and I'm going to import this avatar as well. And in here, we're going to need a user icon.

So I'm going to import the user icon and after this avatar guys I'm going to do the following. So this one's going to be a little too much. Just bear with me, I'll show you exactly what it is. So it's a div in here, right? And we're just setting a bunch of styling guys.

That's literally it, nothing else. Okay? Depending on what you know the user wants, I mean like what we're supposed to see, whether it's the user or the website visitor, we're just rendering out bubbles, the component itself. That's literally it. So all we're doing here is we're saying if message.role is assistant, then we're going to say background muted.

So the bubble is going to look gray color. It's going to look gray in color. And then if not, it's going to be this orange color. All right. And I have no idea what this is.

I don't think there's anything like this. I think that was just a mistake. So I will remove that. Okay. Or maybe it's a class.

See, I hate this. We build such big applications. Guys, I don't think I'm going to build such big applications ever again. Let me know in the comment section. Should I stop building applications that are so huge?

Should we keep it small? Like, just let me know what you guys think, okay? Sometimes I even forget what the hell is going on because it's so huge that it took us so many months to build it and then we're like, oh, I remember this. All right, so let's proceed now. And then, yeah, so here we're gonna say if created at is, if we have something in here, then we're gonna render out that date, okay?

So whenever it was created and I'm gonna import the get month name from our from our Libs folder, and if not, if it's not created, if this does not have any value in it, then we're going to render out a paragraph tag in here. And for this I'm going to import the image component from Next Image, and I'm going to get the specific image that I need for this. Which again we have stored inside, let's see where, right here. Alright, So from message content. So in case we have an image that the user uploaded.

So our chatbot is so advanced that users can actually upload an image itself. So if the user, let's say for example if the business owner was selling, this is a very weird scenario, I don't think anyone's gonna just sell alcohol like that. But let's just say if they were selling a product that requires some sort of an ID verification and they say, hey I want to see your ID, right? That time this might be needed, right? And maybe let's say the business owner is like, hey can you just show me proof of your receipt?

And the customer can actually upload. That's why upload care is so important here. And they make it very flawless to actually integrate it. And it's also secure. So that's why I'm using their service.

And that's why we're able to render out an image like this through the URL. And if there is no image, then I'm just going to show a paragraph tag. So I'm just going to put text inside the bubble itself. And in here, this has to be a link. So I'm going to import the link in here.

So what this is guys, basically let's say if some link was sent, right? If we're sending a link or whatever it is really, then in that case we're going to have this link be placed kind of like to wrap up that text so it looks like a link, right? And if not, we're just gonna put content in here. And if you don't know what this is, guys, there's a lot of things that are happening under the hood. I promise you, if you show up in Prodigy's University, we can really help you understand.

But this is a very, very big project. So I want you to first get it done, okay? Then try to read for yourself. Just do some research. Understand how everything works and if you need more help, you want experts to sit with you and we tell you exactly what it is, then the Prodigy's University is the best place for all of this.

Because we have 3 weekly sessions. Literally, Monday we hang out, we talk about, we give you mentorship apart from web development, which is sales, freelancing, how to start your agency with literally 0 dollars, and how you can start your own SaaS, all that kind of stuff. And the same thing, on Wednesday we just hang out, we just chill, have some coffee, talk about life. And then on Friday we have deep dive sessions where we break down the entire application. So all the students who were in there already learned about Corena AI a very long time ago.

They already had access to the codebase, all that kind of stuff. So join guys, you're gonna find a lot of value. Alright, I'll talk to you in there. So now we can go back to our component and import the bubble component, just like this. Alright, nice.

And of course we're not gonna see anything and it's very very sad, but we will eventually just have to trust the process okay. And now finally at the bottom we also have to have some sort of way to send a message right. So let's go ahead and build that out as well. So after this div guys right down here we're gonna create a form and we're gonna pass in that onHandleSentMessage handler with the following class names and we're going to have the input component so I'm going to go ahead and import this as well. We're going to pass in register, we're also going to have a button that we can use to submit the form.

And we're going to say send inside this and we're gonna need an attachment icon. So this can literally be a send icon. So let me let me find an appropriate icon for this. Okay? So send icon looks good.

So I'm just gonna actually I think maybe the attachment might be better. Alright guys, so I'm going to put the paper clip maybe. Let's see, what does this 1 look like? Alright, paper clip. Alright, that's fine.

It just looks... It's too harsh. Okay, so I just changed it to text muted foreground. Okay, looks slightly better, I guess. Alright.

Okay, so I see we have a padding right of 10 here. That might be causing some issues for this weird thing. So if we removed it, let me see if that's actually going to change it. It's not changing it, so what seems to be the issue? Okay so I think it was the padding x okay so yeah you can change that if you want to I'm going to proceed because we have so many things to do but it's just CSS stuff guys okay you can look it up you can use chat gbt alright guys fine it was bothering me I had to change it okay So in here all I did was I went into the layout.tsx right here, so inside dashboard go into layout.tsx and this div right here I just changed the class names, okay?

So copy exactly what is here, This 1 looks much better actually. Before this it was just too much indented to the left because it had padding left of 20. Okay so I just changed that. This looks so much better so go ahead and do this. Alright guys so there we go our messenger component is now completed.

So now the user can basically come into this area and they can look at you know who sent them a message, who are the leads, what's going on, and they can actually talk back and forth. They can do a bunch of stuff. Okay so I also see 1 more problem here. So I'm gonna see if I can fix that. Just give me 1 second.

Okay, actually there is no problem. This is good. Basically, right here I was inside... Let me show you which component. This is inside the info bar under breadcrumbs, right?

You know, I hope you remember we had a switch component in here that basically looked for the conversations page and only if there is a chat room that is selected, it's gonna actually show you a switch component. So this is good, but this isn't good, so as a result, it just shows the other stuff. So that's the only problem here, I mean, not a problem, That's the only reason why we're not seeing that. So I was wondering why am I not seeing that, you know, real-time mode. But it makes sense because we're not on a chat, right?

We're not on a chat room. So that's the reason. Alright guys, so now we're going to move on to the fun part, which is the chatbot itself, okay? The reason why we're doing the chatbot right now is because we're going to need some data from there, some customers, some contact information. That way we can kind of build the email marketing, the portal section.

There's a bunch of really cool features. So for that reason, let's jump straight right into the chatbot feature now. So you want to go into your app folder Okay inside the app folder and you want to create a another path in here And this path is called chatbot and this chatbot is gonna have a page.tsx file So in here, I'm just going to return a component, okay, and this component is called chatbot. Okay, and this is inside the page.tsx. And we're going to use a custom component in here.

And this component is called ai-chatbot. Okay. And now you want to go into your components folder right in here, and we're going to create this AI Chatbot component, okay? Let me also refresh the browser, I don't know why. Okay, I think it's still working.

Let's see, Settings, Alright, it's working. I thought it was actually stuck. So yeah, you want to go into the Chatbot component in here, inside this components folder, and in here you're going to create an index.tsx file, and inside this I'm just going to render out the AI Chatbot component. And let's also go in here and quickly fix this problem right here. And now first thing we want to do is change this component to use client component.

Alright, now please follow through with exactly what I'm saying. We're going to build out a bunch of really really cool hooks and components like the bot window and all that kind of stuff. Okay? So the first thing you're gonna do guys is you're gonna go into your domain settings right in here and you're gonna copy this component. Okay?

Go ahead and copy everything and you can just click this button right here. And you want to open up a different window here. So you're going to go up here, click on File, and click on New Window for Visual Studio Code. Okay, and it's going to look like this. So what I did was I went back to my desktop.

I created a folder, the exact same process that we did to start up a new project. So create a folder, drag and drop the folder into Visual Studio Code. It has to be a separate folder. And that's going to open up in here and you're going to create an index.html file. And then you're going to say, well I have the HTML file snippet here so I'm safe but if you don't have that then just type out everything you see on the screen.

Okay so pause the video and type this out if you need to and then once you're done inside the body tag you're gonna do this and you're gonna put a script tag in here. And inside the script tag, you're gonna paste whatever you got, but you have to change 1 single thing. Okay? So, oh sorry guys, I spelled script incorrectly. It's script tag like this.

And inside this, you're going to paste the text you get, but you have to do the following. So you're going to scroll down here and you're going to see this back tick, right? You're going to backspace this and use the actual back ticks. It's just because that's not, you know, it's not supported. So yeah, just make sure you add this in here and then you should be set.

Now why are we doing this? So we want to test and actually see if our chatbot is streamed between, you know, different domains, right? So what you're going to do is you're going to go into your Visual Studio Code, and I have a bunch of extensions and plugins in here. If you guys want it, just let me know. Put it in the comments section.

I use a lot that really, really helps speed up my workflow. So maybe I can just put it up on the Web Prodigy's website for you guys to get it. But in here, all you're gonna do is you're gonna look for live server. And it's gonna show you something right here. Go ahead and install this.

So click on it and hit install. And then once you're done with that let's go back to our index file and if you have to refresh your you know your Visual Studio code go ahead and refresh and the shortcut on MacBook is if you hit command shift and P and you hit just look up reload okay and you should find this and you can reload that. And at the bottom you're gonna find here, you're gonna find run live server. If you don't find that you can right-click the HTML and say open with live server as well. Okay and once you do this it's gonna you know show up in the browser right here.

And it's going to show you that it's actually hosting the component, because the component's being embedded onto a different domain through an iframe. So great job, guys. It's working amazing. Now we just have to build the bot so we can actually see what it looks like and then what the user can see on their website. Okay?

So since we're using live server, I think you can also just directly open up the index.html page. But if you make a change here, this should actually show up inside the browser too. So that's why I wanted to do it this way, so now we can actually see what we're building, at least to some extent, and we can keep building from there. Alright guys, so the first thing we're going to need inside this chatbot is a hook called Use Chatbot Hook. And it's going to look like this, But first thing is I want you to pay close attention to this hook, okay?

There's a lot of things that are gonna happen in here. So even after you're done with this video, I want you to go back to this hook and really analyze everything. Look at each and every line and see what's going on. Okay so you're gonna go ahead and open up your folder structure, scroll down to hooks, you're gonna create a folder and it's gonna be called chatbot and inside that you're gonna create use chatbot.typescript. Okay use chatbot.typescript and in here just return a...

Actually we don't need to return a component, sorry about that. So let's go ahead and export on the useChatbot hook which is going to be a function here. And the first thing we're going to do Inside this function is we're going to use the use form from React Hook Forms. So go ahead and import all of this. And then we also need these props and the schema.

And we already have this, I think. So you can go ahead and import that as well. And next, we're going to need a state to basically hold the chatbot itself. So the current chatbot. So for that I'm going to say setCurrentChatbot is equal to useState, so go ahead and import that as well.

And that's going to have the following details. So it's basically either going to be undefined or an object, right? Because it's a chatbot. And that object is going to have name, the chatbot itself, which is going to have the ID, icon, welcome message. These are from the bonus add-ons, right?

So If you still figure it out to do it on your own, you know, that's amazing, do it on your own. But it's already done inside Prodigy's University and we'll be talking about it in the live call as well. Okay? But yeah, and it's going to be this or it's going to be null. And then the help desk right here is going to be ID, question, but it's an array of all of this stuff.

All right? And the first thing is, of course, we're going to see an error here because this is an iframe. Remember? Where it's literally an iframe that is embedded on a different page. So I'd like to go back and import this so it doesn't scream at me but it's still gonna yell because it doesn't have all this stuff being exported but at least we solved that error right and now after this I'm going to create a ref and this ref is called message window ref and then we need some states here so the first 1 is going to be bought opened and then next 1 is going to be a function here that's going to set the bot value to the opposite so we can basically kind of like you know toggle between the open and closed state and then we're going to need 2 more states in here called loading and set loading and then on chats and set on chats that's basically going to store the role so either 1 the assistant or the user, and the content as well as well as the string, sorry the link.

Then we're going to need another state to basically keep track of when the AI is actually typing. So it's going to be called on AI typing and then set on AI typing. And then we're going to create another state here called currentBotID to actually store the ID of the bot. And then finally we're going to need 1 more state here which is called onRealTime and set onRealTime. Okay so before we start anything I'm going to go up top and I'm going to say work in progress, set up real time with pusher.

Okay and this is done because remember I told you we want to prevent that hot module reloading issue all right and now after this we're gonna create a function that's called on scroll to bottom So even the chatbot itself is going to, you know, we are going to scroll to the bottom when the user sees it. Okay, so we're going to say scroll to bottom and we're going to say message this ref that we just created dot current dot scroll and we're going to set the scroll height for top and then left to be 0 and then behavior to be smooth. And then since this has to fire when the bot gets mounted we have to create a use effect and I'm also going to import that use effect and we're just going to fire that function with the help of these 2 dependencies. So guys there's a bunch of things that are happening here. Basically we're communicating through an event okay.

So and because of that we also have to set some stuff that's happening on the parent component. So the parent website right right here and the parent website also communicates with the with the iframe. So there's a bunch of things but just follow through with me. So we're going to create a use effect right here. So I'm going to say use effect just like this, invoke it and pass in an empty, actually we're going to pass in bot open and all this does is it sends a message to the parent.

So here's what I'm gonna do for this. I'm gonna say post to parent, and I'm gonna pass in the width to be if bot is opened, it's gonna be this and this. But if height is opened for the bot, then it's gonna be this, if not, it's gonna be this. Now we have to go ahead and create this helper function. So this helper function is going to be inside our libs folder.

So scroll down to libs, go into utils, and then let's scroll down here. And I'm going to say post to parent, we need the message. And then we're going to say window dot parent dot post message. We're going to pass in that message and say star. Okay and let's go back here and quickly import this and then the next thing is I'm going to say use effect.

I'm sorry not like this use effect and inside this use effect I'm going to have a empty dependency and I'm going to say window dot add event listener. I'm going to invoke this and for the first parameter I'm gonna pass in message and inside the callback function I'm gonna get access to the element itself and inside here I'm gonna say const botId equal E.data and then on top right here I'm also going to create a variable called limit requests and in here I'm just going to make sure that you know we don't end up getting access to the bot details too much too frequently so I'm just going to say if limit request is less than 1 and type of bot ID is a string then we're gonna invoke this function We're gonna pass in the bot ID and we're gonna increase the limit request to 1. Okay, so we can just check right here So let's go ahead and build out that function as well. So after the use effect right here, we're going to say on get domain chatbot, chatbot like this and okay something's wrong here. I said bot ID.

Okay so the issue is I put this outside the ad event listener. So let's put it inside that and let's go down here. So first thing is we're setting the current bot ID to whatever we get from here. And then we're saying cons chatbot equal await and we have to fire a server action I think. So let's go ahead and create that server action.

So go ahead open up your folder structure, scroll all the way up top, go to actions, and we're going to create a bot folder inside that index.typescript. And first thing, you know it's a server action, so use server up top and then we're going to add a function in here. Let's also import the client and this is what we're doing. So we're saying client.domain.findunique, So we're finding the domain right here and we're getting its chatbot. Okay, so we're getting all of this, the help desk as well and the name.

And then here if the data exists, return that. If not, we're just going to print out, you know, any errors that took place. Let's go ahead and import this. So that way we get access to the chatbot based on the ID okay and then we're gonna say if chatbot we're gonna set on chats to be everything that's already there but we're gonna pass in the new welcome message okay and then we're gonna set our current chatbot here and we're gonna pass in the chatbot itself and then we're going to set isLoading to false. Next I'm going to hit enter here and I'm going to say const onStartChating is equal to a callback function and inside this callback function I'm actually, okay this is not a callback function, sorry guys, this is going to be handleSubmit okay.

So handleSubmit, I'm just going to invoke this and inside this I'm gonna pass in the call back function. And this of course is gonna be an async function. It's gonna give us access to the values. And inside this function first thing I'm gonna do is I'm gonna reset and then I'm gonna check if values.image.length I'm gonna say const upload and uploaded and I'm going to say await upload and I'm going to go ahead and create this instance and this is for upload care. So let's scroll all the way up top and right here and I'm gonna say const upload equal upload client new upload client and this upload client comes from the upload care upload client itself so I'm just gonna scroll up top here and just simply import it from here.

And now we have that and I'm going to pass in the public key right in here which is the next public upload care public key as a string. And then let's scroll back down and in here I'm just going to set on chats just like this and I'm going to pass in a callback function and this gets us access to the previous you know state as well and this is not going to be an object we have to return an array right so I'm going to say that and in here I'm going to put everything that's inside this state and I'm going to pass in the new uploaded component. So the new uploaded UUID. After this right here, hit enter and we're going to set the AI typing to be true. And then hit enter after this and we're going to say const response equal await on AI Chatbot Assistant and we're going to pass in the current bot ID, the on chat and you know the user and we're going to say uploaded UUID and we're also going to go ahead and you know create the server action.

So go into your server action file for the bot and go into index.typescript and scroll to the bottom and I'm going to say the following. So I'm going to create a server action that's going to need some parameters which is the ID, the chat bot, I'm sorry the chat which is you know with the role and the content and then the author which is going to be user here, and then the message itself. And in here, go ahead and create a try-catch block. And inside the try block, I'm going to say chat bot domain equal 08, client dot domain dot find unique, where for the specific ID. And we're going to select the name and all the filter questions okay but we're going to select the filter questions where you know answered null and sorry for this and then we're going to select the question from there So the reason why we have this answered null is simply because, well, remember in the database, we're not saving that, right?

So if you need to maybe use that, maybe you can do some logic in here, but I don't think it's really needed. But for now, I'm just going to pass it in here so we can just capture all these answers, all these questions. I apologize. So after this you want to say if the chatbot domain exists, then we're gonna get the extracted email. So we're gonna try to extract the email from the customer's response.

And this is again something that comes from our utils file. So scroll down, go into utils, and we're just going to import this. Please, please copy this from github. Don't try to type it. Okay, and I'm also going to go ahead and import this.

And after this right here, I'm going to say if the extracted email exists, then customer. Okay, so just scroll up top right here and I'm gonna create a variable and this variable is gonna be called a customer email okay and we're doing this just to kind of persist the email because of you know this function will understand its lexical scope. So that's why we're doing it this way. And then in here, I'm just going to set that email. And after this, we're going to get the customer's email.

We're just going to check if the email exists. Then we're going to get the domain that we need. So we're going to say the following, we're going to say, check customer. So, okay, something's wrong here, guys. Okay, nothing was wrong, it was just TypeScript.

So we're going to say, check customer, awaits client.domain.findunique for the specific domain ID. But we're going to select the user. So select the user with the following clerk ID, or I think we're pretty much just getting the user, we're just making sure that they have a clerk ID. And then name is true, and for customer here we're saying where the email starts with the email that we just extracted and then we're gonna say select the ID email questions in the chat room itself. Next we're gonna make a quick check in here and we're gonna say if the check customer exists and you know customer.length also exists or I think this is the opposite sorry about that so the check customer dot customer dot length so if it's a false c value then in here we're going to make a quick call okay so we're going to say new customer equal await domain dot update for this ID and we're going to say data we're going to set the customer we're going to create this right We're going to create the customer with the following email, the questions that they have, right?

So create a chat bot domain dot filter questions and we're going to pass in the chat room and we're creating this as well. And now after this right here, so after this call, it's still within the if bracket, okay? It's still within this, but just after this call, we're going to say if it's a new customer, then just, you know, I'm just going to print a message here saying new customer made, and then we're going to say const response equal to role assistant, content is welcome aboard, we're just going to put the customer's email dot split at this, and then we're just gonna get the first array value, and then we're gonna say, I'm glad to connect with you. Is there anything you need help with, basically? And also, yeah, we're just returning the response here, okay?

So this is basically the first message guys. So when the customer first sees the chatbot, I'm sure you already took a look at the demo, but they're going to see that you know first message right for them to get the email and all that kind of stuff and they're going to give their email and that's how we're getting access and we know that this is a customer. Now after this 1, so basically this if statement, right, we're going to go after this and we're going to create another if statement and we're going to say if check customer is true and check customer dot customer at 0 dot chat room at 0 dot live. So if it is in live mode, then we're going to move everything to live mode. Okay and this is what we're gonna do.

So we're gonna say await on-store conversations and we're gonna pass in some props. Sorry some parameters. Okay and we also have to create this 1, it's another server action. So we can scroll up top right up here and I'm just going to say export const on store conversations. It's going to need id message and role and I'm just going to print it here.

We don't even have to do this. I'm just going to say clients.chatroom.update for this ID and we're going to pass in the following data which is the message and we're going to create the message along with the role. And now if you scroll all the way down here we can now continue from this. And after this call we also have to say on real-time chat which is another function we have to create, another server action. So let's go ahead and do that.

And this 1 actually comes from the conversations page. So go ahead, open this up, go into conversations, and you can scroll up top right here. Just forget about this. I think this is TypeScript. Oh okay, I know why this is happening.

This is happening because remember, a Pusher server does not really exist, right? So that's why. But I'm just going to scroll up top here and I'm just going to paste this which is const on real time. Oh, I think we already have this. Oh, we already have it guys, sorry about that.

So let's go back and I'm gonna import this again. My bad on that. And I'm gonna set a work in progress and I'm gonna say, set up real time mode, okay? And of course I'm just going to hide this right here. And after, still within the if bracket, right, so just after this call that was made before this, we're gonna say the following.

So I'm gonna say if this does not exist, which is they've not been mailed, right, so check customer.customer.chatroom.mailed. If this is not true, then we're going to do the following. So we're going to say clerk client and we need to import clerk client from here. So I'm just going to import that and I'm going to say check customer dot user dot clerk ID. Okay we're going to pass in that ID and then we're going to use node mailer here to actually send an email message that it's sent to the user, to our business owner, right?

To the user of our platform saying, hey this person is trying to access you and we need to, you know, you need to speak to them and then we're just going to send an email basically. So go ahead open up your terminal you're going to quit this and you're going to install the following package. So let me go ahead and quit this properly. So I'm going to say bun add and it's node mailer. And go ahead and install this package and now we can create the server action here.

So go ahead open up your folder structure go into actions you want to create mailer and inside that you want to create index.typescript and inside this first I'm going to change this to use server like this and inside this file I'm gonna have node mailer basically so I also have to install node mailer from node mailer so I'm gonna scroll up top and I'm just gonna import this okay looks like we also need the types here so let me go ahead and do that as well. So I think this should work. I'm just gonna say bun add and pass in the types. Please work. Okay there we go.

Alright nice and yep that should be set and basically what this is is we're gonna create a transporter. We're gonna say node mailer dot create transport and we're gonna pass in host as smtp dot gmail dot com and the port is 465 secure true and the auth we're just going to pass in the nodemailer email and the nodemailer gmail app password. Okay now please follow these instructions because this is how we can get access to our Gmail app password. So first thing you're going to do is open a new Google Chrome tab and you're going to click on this icon you see here and then go ahead and click on your account and then you will be navigated to a page that looks like this. Okay this is just your Google account and then you're gonna click on security and then scroll down on the security page and you're gonna find two-step verification.

To make this work you need to enable two-step verification Okay so in here just click on this arrow. There's gonna be an arrow here, click on that arrow mark and it's gonna take you to the two-step verification page. Just look at this button, click on it and turn on your two-step verification and on the same page if you scroll down it's gonna show you the second steps that you can use. So I just clicked on the Google prompt, there'll be an arrow here, click on that arrow icon, and then you're set. So now you have enabled it, But you also have to get the Google app password, right?

So how do we do this? Well, you're gonna go back to the dashboard. So exact same process right here You're gonna click on this icon go back to account or just click on home I think you can click this Google account. It'll take you back here Okay, and then what you're gonna do is you're gonna look up in the search bar app passwords Okay, look up just look up App and it's going to show you App Passwords. And go ahead and click on this option.

It's going to take you to a page that looks like this and all you have to do is add an app name so I just called it Corinna for now and then go ahead and click on create and you're set. Okay it's gonna give you a password on the screen of course I'm you know I'm not gonna do it because it's gonna show my password but yeah it's going to show you something just copy that and you're going to go into your environment variables and you're going to save this password under node mailer gmail app password okay and then for the node mailer email you're going to set the exact email that you were using so long, right here. Whatever accounts you were using here inside this Google account, that email ID is what you're going to use. That's pretty much it. So if you have any questions, you get stuck or the options change because their UI can change anytime, just reach out on the Discord and we'll help you out.

So I already went ahead and did that. If you haven't, please make sure you put in the variables because we're gonna need it. So once you finished putting in the variables and you also finished creating this. Right here, after this, we're creating this auth and we're passing in the credentials. And the const mail, and if you don't know where this is guys, it's the same function, exactly where we left off, which is the on mailer server action.

And then we're gonna create the mail options which is 2, we're gonna pass in the email that is sent in, and then the subject is gonna be the real-time support, right? But the text is gonna say 1 of your customers on Corina just switched to real-time mode. Okay? Or you can make this more customizable, literally whatever you want. But why are we doing this?

Sometimes our chatbot can go, you know, out of hand. And it can happen, okay? It happened for us, and that's why we wanted to create this feature. And what this feature does is, when the chatbot goes off track, it sends an email to the business owner, and it tells them that, hey, something went wrong, and you might need to assist the customer directly. So that way, the business owner can hop back into their dashboard, they can quickly go to these support section, okay, I don't have it running right now, I have to say bunrun dev, but they can go to the support section, they can go to the conversations tab and they will see an icon inside the conversations tab.

It's going to show that the customer is awaiting some response. And inside that, you can then go in there and then the business owner can pretty much Turn on real-time mode and the the the bot will automatically switch to real-time Okay, so you can go into real-time mode and you can start conversing with the customer So then all we have to do to send the email is a transporter dot send mail We're gonna pass in the mail options and the callback function. I'm sorry, we're going to pass in a function here. Oh, which is a callback function, right? So we're going to pass in a function here and this is just going to check for any errors.

Okay, so if an error happened, print the error. If not, we're just going to say email send, just print it in the console. So let's go back and make sure you import this onMailer function. And now let's proceed with the rest. So in here we're just passing in the user email address.

And in here we're essentially saying const mailed. So we're updating the mailing status to basically just prevent a spam. And what I mean by spam here is sometimes the user can keep going crazy. And if we switch to real-time mode, then we want to prevent the bot from swapping again all the way to real-time mode. So for that reason we're just going to change this property mailed in here to true.

And then finally if they're mailed we're just going to return live true. So now the chatbot is supposed to be in live mode and the chatroom is going to be set to the check customers dot customer at 0 the chat room at 0 we're going to get the ID for that chat room now if they weren't mailed or nothing was sent out then after this right here you're gonna find a yellow bracket so 123 hit enter and you're gonna say return live true and you're going to set the just return the same chatbot, same chat ID, chat room ID. And the next action we're going to create is called on-store conversations. So after this return statement right here hit enter and we're going to say await on store conversations and we're going to say check customer dot customer at 0 dot chat room and we're going to pass in the ID, and then we're going to pass in the message and the author. And this is exactly what we created on top right here.

Now we are going to wire up AI into our application. And we're going to be using OpenAI to make this work. So go ahead, quit your terminal like this, and we're going to add a new package. And this package of course is OpenAI itself. So we're going to say, bun add OpenAI and go ahead and hit enter.

And now that the package is installed, we can go into GitHub and I want you to copy this exact statement. Okay? So it's going to say, const chat completion. Just copy that prompt. I'm going to explain, copy that entire prompt and we're going to paste it in here.

Okay? And don't worry, I'm going to break it down but just copy that and paste it in here first. Then also don't forget to import OpenAI from OpenAI just like this. And now we have to create a client. We have to create a client on our end and for that we're going to need the OpenAI API.

And we also need an OpenAI key and this key is something that we have to get from the you know from AI from OpenAI itself and I'll show you how to do that in just a second but this is the first process which is we have to create this client right here and we're gonna scroll all the way down back to where we created this okay and this is basically we're just saying open AI dot chat dot completions dot create okay and in here we're gonna pass in the messages so opening I needs a bunch of stuff okay you have to pass in the these things to help the AI understand what the hell is going on. Okay? So the first thing is we're gonna say roll assistant and the content is you will get an array of questions that you must ask the customer. Guys, we worked so hard on this prompt. This prompt is almost perfect, okay?

There's always gonna be that 1% room for error where sometimes a chatbot goes out of hand. And that's exactly why we have the fallback, right? We have a fallback because if the customer says, yo, what the hell are you saying? Or they panic, then the chatbot can actually switch to live mode and send an email immediately and inform the business owner like, yo, something happened, please take a look at it, right? So we will get an array of questions.

What questions are we talking about? Filter questions, okay, that you must ask the customer and progress the conversation using those questions. So it's sort of like a sales call, right? And when we said sales call here, when we said try to progress the conversations like a sales script, it actually got really weird, right? It didn't sound like a human being and it started saying things like, hypothetically speaking, if you were to buy this, it was just getting too much.

So we wanted it to be as real as possible. So here by just changing the terminology, it helped the entire prompt and the output is much better. And then here we're gonna say, whenever you ask a question, this is actually 1 word, whenever you ask a question from the array, I need you to add a keyword at the end of the question called complete. This keyword is extremely important. Do not forget it because sometimes it actually did.

Only add this keyword when you're asking a question from the array of questions. No other question satisfies this condition. Alright? And then always maintain character and stay respectful. And the array of questions are, and we're just going to use dynamic variables, and we're just going to pass in all these arrays in here.

The array of questions that the user had. So chatbots domain.filterquestions, we're just going to map over it, and we're going to join it with a comma. If the customer says something out of context and it's inappropriate, then simply say this is beyond you and that they will need somebody else. And add a keyword real-time. So this complete is what we're going to use to basically identify if the user is responding to that question.

Okay, and guys you can tweak this bot, do whatever you want with it. We made it in such a way that you can literally tweak it around, mess with the settings, do whatever you want, right? But this is going to help us identify which question the chatbot asked from the array of questions and the answer that the user provided to that question. Okay? Hope that makes sense.

And in here we're just saying if the customers say something out of context, you know, put real-time to it, And then we are also having some links here, okay? This link is... I'm going above and beyond trying to explain because I want you to understand, but even in, you know, in Prodigy's University, we broke it even more, alright? We broke it down, we showed you everything. We just don't have that much time to break down everything.

But this is the idea, right? So if the customer agrees to book the appointment, then it's going to send them this link. And yes, this link is not the deployed link, I understand. So for this, you can just use an environment variable. Okay, I would really suggest you do that as well.

Have everything in your environment file and that way you can dynamically put it in here. And then if the customer wants to buy the product, then it's going to send them to a portal page with the payment page opened. And it's also uniquely identifiable with an ID. And that way the chatbot can actually send them to that page and they get a unique experience and they get to kind of fill in all the info. All right?

And as part of OpenAI's API request, we also have to pass in the chat history. Okay? This is part of the process. So you have to send everything that's inside the chat and you have to pass in the role, user, and content message. Okay?

And then for here, for the model, I'm just going to use GBT 3.5 turbo. Great job. So now after this call right here, we're going to hit enter and now we're going to check for the real-time keyword and then use a switch for the... And then switch to the real-time mode. Okay?

And we're going to do that by saying if chatCompletion.choices.message.content includes real-time, then we're going to say the following. We're going to say client.chatroom.update for this customer where their chatroom ID is of such. We're going to set the data to live and we're going to set that to true. And then here we're saying if real-time, so if we got a response, everything was successful, then we're going to say const response equal role assistant, and the content is going to be as follows. So we're going to say chat completion dot dot choices dot message dot content dot replace real-time with nothing here.

So we're just replacing it and then storing it in the database, okay? And that's exactly what we did here. So we're saying await on-store conversations, check customer.customer.chatroom.id, response.content, assistant. So we're basically saving that and then we're just returning the response. And now after this guy, so 1, 2, right here.

Hit enter and you're gonna create an if right here. So this 1 is basically for the complete stuff. So we're gonna say first user answered question, we're gonna say awaits customer response and find first. And we're gonna find where the customer ID is as such and we're going to get the answer as well. We're going to select the ID and we're going to order by sending.

Then after that we're going to say if the first unanswered question exists then await client customer responses.update where for this specific unanswered question, we're going to put the message in there. And then after this guys, right here, so 1, 2, hit enter. And actually it is, let's see, so we have this bracket, so it's right after this if statement, hit enter, and you're going to say if chat completion. So if chat completion, then we're going to say const generated link is equal to extract URL from string, and this is something we need to create. So I'm just going to go into my utools file right in here, just you know shrink that and I'm going to say the following.

So extract URL from string and let's go back in here. Please copy that from github, okay? And I'm just going to paste this in here and import it. Basically generated link is extract URL from string and we're going to say chat completion dot choices dot message dot content as a string and we're going to say if we got the generated link then we're going to get the first 1 right here and then we're going to say const response equal role assistant. The content is great.

You can follow the link to proceed. And we're going to put in the link in here, dot slice 02-1. And then finally we're going to save that as well. So we're going to say, await on-store conversations. We're going to pass in the check customer, so the ID of the chat room, sorry, and then we're gonna pass in the response and the response link and then we're gonna say assistant for this and then we're gonna return the response itself.

And then after that we're gonna say const response here is equal to role assistant and the content is going to be the message content and we're going to save this 1 as well and we're just going to pass in the ID here, the response content and the assistant and then finally we're just going to return this response here. So after this bracket go down here hit enter and I'm just going to console this message here so we know what's going on. And in this case guys, it's basically like until an email is provided from the user who's texting, you know, the business owner, we can't assume who they are, right? We need that email. So we will assume the customer is anonymous.

That's what we're trying to do here because we don't know who they are. So for that, I want you to go into GitHub, go into exactly where we stopped right here, and you're gonna copy a line. So at line 340, you're gonna find this line, just copy it and paste it. It's another prompt that we have to create, and this prompt is as follows. So we're gonna say openai.chat.completions.create, and we're passing in the message, role assistant, and the content is, you are a highly knowledgeable experienced sales representative for this chatbot that offers a valuable product or service your goal is to have a natural human-like conversation with the customer in order to understand their needs and provide relevant information and ultimately guide them towards making a purchase or redirect them to a link if they haven't provided any relevant information.

You see this? This is the catch here, right? Right now you are talking to the customer for the first time. Start by giving them a warm welcome on behalf of, you know, the chatbot's name, the domain's name, and, you know, make them feel welcomed, whatever. And then your next task is to lead the conversation naturally to get the customer's email address.

Be respectful and never break character. It's very important. Sometimes it does crazy stuff. We actually saw some crazy stuff in the chatbot itself, But hey, it's fine. This actually helps kind of prevent that.

So in here if we don't know who they are We need to get their email. That's the most important part, right? So that's the first step get the leads Information that's what we need. That's all we need here. And that's what we're trying to do.

So we're creating this chatbot here, and we're creating this prompter that has 1 goal, which is to get their email first. The second they give their email, that becomes a lead and a customer, and we can actually store that information somewhere. Okay? And now finally, after this, so right down here, guys, after the model, you're going to hit enter, and you're going to say, if chat completion const response equal assistant, and you're gonna pass in the message content, and then you're gonna return this response here. And that's pretty much it for this hook.

I know it was a lot of stuff, but it is a really big hook and we're doing a lot of really, really cool things. Okay, so if you have any questions and you wanna understand how we're breaking down each and every single thing, how this works under the hood, like if you want more explanation, there's literally hours of our time, right? You can join Prodigy's University and me and my team will be there and we'll guide you through the process, okay? You can also ask us any questions you want, literally create a Loom video inside PU, send it over to us in the DM and I or my team members, we will hop on that immediately and we'll get you the answer you need. Okay?

Alright, let's move on now. Alright, so the next thing I'm gonna do is I'm gonna go back into my component and I think that is the bot route that we created. Let me see where that is. Okay, right here it was inside the hook, sorry about that. So inside hooks go to chatbot and you want to go into the use chatbot hook and we have to import the server action that we created.

Okay, and now right after this, after line 121, I'm gonna hit enter here and I'm gonna say if response then set on AI typing to false. And if response.live, then we're going to set real time to be everything that's inside the data, but we're going to set chat room to this and the mode is going to be response.live. And then here I'm going to set on chat, so I'm going to set our current state that we have in here to everything that's inside its current state, but the response dot response. So whatever we got from this right here. And after this section guys, so 1, 2, 3, after this you want to hit enter on line 137 and you want to say the following.

So we're going to say this. So we're going to say values.content and if this exists then we're going to set on chats to be everything that's inside the chats but we're going to set the role here and the content. So the role is user and the values.content and then we're going to set AI typing to true and then in here we're going to set we're going to basically say response equal awaits on AI chatbot assistant we're going to pass in the ID on chats the user and values And then here we're going to get response. We're going to say if response, then we're going to set AI typing defaults. And then if it is in live mode, we're going to set live mode.

And then here we're just saying, you know, set our states here. So set the chats to be everything in previous and then pass in the response. And now after all of this, So go all the way down, all the way down here, hit enter, and you're just going to return every single thing we just created. Awesome. Great job so far.

So just hang in there, okay? I know it's a lot of code, but it's all going to be so worth it in the end when you see that beautiful chatbot, Okay? So just push through and it's going to be so worth it. So now we can go back into our route right here and now we're not going to see any errors and we see this chatbot thing. So if I change it, awesome, there we go.

So First thing I'm going to do in here is I'm going to remove this. I'm going to create a div with the following class names. And inside this div, I'm going to say if the bot is opened, then I want to render the bot window. Okay? And this is what it looks like.

I know it has a bunch of props, but it is a complex component. Okay? So let's go ahead and create that component in just a second. So open your sidebar options, sorry, sidebar your folder structure, and you want to go into the chatbot under components right here, and you're going to create window.tsx, and in here I'm just going to return a component and change the name of the component as well. And now go to GitHub and don't type this out, okay?

Don't waste your time. But go to GitHub and you're going to copy all the types and I'm going to just break it down, just read over it as well. So let's also go ahead and just import the chatbot message props and the register right here. And we're going to say chats, which is going to be an array of this, right, which is assistant or user. So the role and content and the link.

So if it is a link or not. And then we're going to get a function here, it's just on chat and then on responding which is Boolean, domain name, we need the theme, text color, these are all additional stuff right as part of the bonus add-on. And We're going to have help in here and then real-time mode and we're going to set this right here. And then we're going to have help desk which is all the help desk questions and we're going to have a dispatch function so we can set the chat history. And now, this component is not just a regular component, it's actually going to be, it's going to need a ref, okay?

So we're going to need forward ref to actually get access to all the stuff. So right here, here's what I'm going to do. So I'm going to remove this stuff right here, and for now I'm just going to say forward ref like this, and I'm going to invoke this function. And this function takes in an arrow function basically and this is going to be the component. And here we're also going to pass in some prop types and these prop types are going to be HTML div element and bot window props and I'm also going to quickly, I don't think we need to import this.

I think it's already there. Yeah, we don't need to import these. But in here, we're going to have 2 props that are passed in here, right? We're going to get access to everything that is passed down, so everything that's passed in here, right? So let's go ahead and destructure all of that right here.

And then the second 1 we're going to need is the ref. Now we're going to see an error here and this error is going to say that the component is missing the display name. So Scroll all the way to the bottom here, right down here, and you can say botWindow.DisplayName and you want to set this equal to botWindow like this, okay? And then let's go up here and let's continue. So I'm going to create a div in here, and this div is going to look like this with the following class names, and then inside this go ahead and create another div with the following class names, and finally we need 1 more right inside this, and this is going to have the avatar itself.

So let's go ahead and bring in the avatar, and I'm going to import the avatar from UI avatar. Okay and I see 1 error here guys so this should actually be props so I'm going to copy this and just say props here and I'm also going to go ahead and import the window, the bot window component so it doesn't scream at me and that way we can actually see something, hopefully, right? So let's go back in here, and after this, guys, after this avatar right here, I'm going to create a div, and I'm going to say the following class names, and inside that I'm going to have a header, and here for now I'm just going to, you know, give this chatbot a name. Of course, you can customize this, get the name of the domain and maybe put in there, do literally whatever you want, nobody cares. But I'm just going to set this to web prodigies.

And in here, I'm going to have a paragraph that's going to have the .com in here, right, from the domain. And after this here, we're going to create another component called real time mode alright so let's go ahead and create that so open up your folder structure and in here you're gonna say real dash time dot t-s-x and go ahead and return a component called real time mode like this and first thing is I'm gonna have the following props So go ahead copy paste the props in here, which is a chat room ID and the dispatch to set the chats. And I'm also going to go ahead and quickly destructure everything from here. And the first thing I want to do is I want to call a hook called useRealTime. And of course we need to create this.

So let's go ahead and build out that hook real quick. So open up your folder structure. You want to scroll down all the way to where it says hooks. Click on the chatbot. And then you're going to go down here and you're going to do the following.

You're going to say const useRealTime which is an arrow function which takes in 2 parameters the chat room and the setChats which is a dispatch function and then in here you're going to call a useEffect and this useEffect of course we need to subscribe to the Pusher client, right, because it's real-time data, and then we're going to bind the event real-time mode, okay, and whenever a change happens, we're going to fire this callback function here, and we're going to pass in set chats, and we're going to set all everything that's previously there, but we're going to add the new content in here. And then finally we also have a cleanup function right here to this specific event. Now for the pusher client, I don't think I can, okay, I can import it but it might throw some errors, right? As you can see, because we don't have it created yet. So I'm just going to go ahead and just comment these out for now.

So select all of this and Maybe we can just comment it out right here. And I'm going to go back and for now I'm going to hide this and you guys know the drill. Work in progress, set up real-time mode, and now we can proceed. This is a very, very simple component actually. So all we're going to do is we're just going to return a card in here.

And this card component is just going to show if the component is in, if the chatbot is in real-time, and it's going to say real-time chat here. And then let's go back and I can quickly import this component. So this component will only show if the user is in real time mode, so if the chatbot is in real time mode. And then going back to, so basically inside the window component, we're going to go down this 122 divs, and at line 80 we're going to do the following. We're going to say div, we're going to import this image here which comes from next image and I'm going to say images slash prop user dot png and I'm going to pass this data in here.

And now you might ask Why can't I see the chatbot? Well, if you go into the page and actually examine what's actually happening in here, you're going to notice that we're checking only if the bot is open, then render this out. So what if we just hide this? Let's see if it actually renders a component. Alright, nice.

So now it's rendering a component. So if this is not true, we're actually gonna render a different component, which is just an image tag, okay? So what I'm gonna do is I'm just gonna copy that and paste it right away because we're already at it. And this component is gonna look like this right here, which is a div with the following class name. So you can go ahead and just pause the screen and type this out.

And then we're going to set the on click to be the on open chatbot. And this is going to need next image. So I'm going to import that as well. And I'm just going to get the exact chatbot icon ID from upload care. And I'm going to set the alt text here to bot and set it to fill and now we need a quick component that shouldn't be too hard to create it's called a bot icon so let's go ahead and build that out or actually I think you guys might have this right you might have it guys inside your icons, you might find something called boticon.tsx or it looks like the file already exists.

Why can I not import? I can import. Okay, Never mind. So now that I have imported that, we should be good. But we see some errors in here, so let's go back into the component so we can proceed from here.

Okay, so I'm seeing something in the domain name.split. So it looks like domain name is actually not being passed in. Let's console.log domain and see what's in here. It's domain name, and let's just see what it prints out on the console. Okay, so it's undefined.

So something is wrong here, guys. We're not actually... All right, Let's go ahead and see if we can fix this error real quick. Okay, so in the meantime, I'm going to actually try to fix this bug, but we also have to get OpenAI set up, right? So the first thing you're going to do is you're going to look up OpenAI API.

Okay, it's going to take you here, and I'll also put a link in the description if that helps. And you can essentially click on start building. It's going to take you to a dashboard page and make sure you log in and all that kind of stuff. Okay. And if it doesn't take you there, maybe you need to create a project or get into it.

For me, it's taking me directly into my dashboard, but if it's not doing that for you, then I think you can just read the website documentation and see how to get into this, but just sign in and it should take you in here. The next thing you're going to do is you're going to click on API keys, and the first thing is of course you have to verify your phone number and things like that. So if this is a new account, then you get a bunch of free tokens. But if it's an account that you created a long time ago, then those free tokens actually expire. So then you just have to put your credit card and I have been running on 5 dollar credits For a very very long time and I tested this a lot and even then I'm fine Okay, so don't be afraid you can go for it and you can also set a restriction on your credit card But do your own research, but it should be fine.

All right So I'm just gonna go ahead and start the verification process here. Okay, I went ahead and verified my phone but because I was already, you know, because I already registered that phone number to an account previously, it's actually not going to give me any free credit. So I have to go in there and put in, you know, just use like my credit card and then pay for it. But you should be fine, this is all you have to do. So first go ahead and just call this Corinna like this, and I'm gonna put it as the default project, and I'm going to click on Create Secret Key, and it's going to give you a key.

I unfortunately cannot show you this, but it's going to give you a key, and you're going to copy that key. All right, guys, so we have to make a couple changes. So in here, first of all, inside the next config file, this is not needed. I totally forgot that I put this here because I thought it was gonna allow me to access some routes. So just go ahead and remove this.

It's not needed. We don't really need it and that should still work as expected. Now what's the next thing? So go back into your application, first we're going to go into, so let's remove this right here, we're going to go into the domain settings. So let's search for this real quick.

So settings, we're going to go into domain, we're going to go inside page.tsx and inside here we're going to see the settings form, so click on that and then go ahead and click on code snippet. So the problem here, it was very very simple, It was just the trailing backslash. So remove this. This took me 1 hour And I'm so excited because I wasted 1 Well, not really 1 hour, but it took me a very long time But so just remove that and that should solve this problem So that's the first thing. Next thing we need to do is I'm going to go back, and I think this actually might be fixed for you because you're going to copy paste from this repository, right?

But the next thing I'm going to do is I'm going to go into the chatbot route, which is not here, it is inside 1 of these right here. Click on page.tsx, go inside the AI Chatbot, and in here, make sure this is turned on. I'm not sure if we actually turned it off, but now it's going to load for a little while before it actually mounts. So it's mounting for me, So that's the next thing I did to fix that problem. And then we also have to change an image here.

So go into the bot window and open this up. And I don't want to use this 1 here. I'm just going to remove this image. I'm just going to put a new file in here and make sure you paste it. And I'm just uploading some image in here.

You can take it but this might be deleted at the time this video is up. So you can just upload an image, right? UploadCare is really, really nice with this. You can click on upload, drag and drop a file, and you're set. Then copy the link and then just paste it in here.

So you can create an image and this image is essentially this, whatever we see right here. So now I'm going to go into the bot window component, right inside chatbot, window.tsx and I'm going to continue after this. So I'm going to open this also so we can look at what's going on and let's proceed. So go ahead and hit enter after this div here and I'm going to create a tabs menu component and go ahead and import this component and we also have some constant here so I'm going to import that too. And we're going to have a chat icon.

So go ahead and import the chat icon from our components folder inside icons. And a tab menu has to have some tab content, right? So what is this? Well, this is basically the toggle in between the help desk questions and the AI chatbot stuff. So first, Tab Content right here is going to be the Tab Content for Value Chat.

It's very, very straightforward. We have a separator. I'm going to go ahead and import both of these as well from the correct folder, just like this. And inside this I'm going to return a div and this div is going to hold a ref and this is essentially the chat window itself. So literally what you see here.

Actually I can't click on this because if I click on this it's going to throw an error because of this stuff. It's basically the chat window and inside this it's a window inside of that. And first we're going to have a bubble component so I'm going to import this component as well. And then we're going to have a component in here. So I want you to go into the chatbot and I want you to the chatbot folder under components and you're going to say responding.tsx.

God, I can't speak. And in here, we're going to have a very simple component. It's just the 3 dot icon component that kind of just announces, right? So I'm just going to create that and I'm going to go back in here and I'm just going to import this component. And then First, I'm just going to import everything and then we'll go across this.

Go ahead, import everything and then we'll speak about it. So for this 1, the attachment icon, just change that to paperclip. Make sure you change it to paperclip and you should be fine. So in here, we have the tab contents. Hopefully you went ahead and imported everything.

So now we can just walk through it. We have a separator, right? Very straightforward. And the separator is right here. And now the tab contents is here.

So 1 thing I actually don't like is how this is kind of centered. So let me see if I can change this. So the first thing I did was I'm going to change this right here, the trigger itself, so the Tabs menu component. I'm going to change the background color to transparent. Alright, nice.

And maybe I can give this a border of 1 pixels, 1 pixel and then border of border. I think this should be fine. All right, nice. Also a margin top of 2 or a margin 2 should be fine as well. This is much better.

So now we can have both of them, both the content in here. So essentially we have a separator which is right here and in here we have a div which is a container for all of the stuff and in here we're going to have the following. So we're going to have style which is the background, the theme color and this is in part of the bonus add-on But it's pretty much already done guys, you just have to figure out, it's a challenge right, take it up as a challenge and do it, figure out how to connect different styling options to the chatbot. And then we have a ref here, remember, and we're passing the bubble in here and this is a responding component that's going to show at the bottom whenever the chatbot is responding. And then in here we're going to have a form and this form is going to have the following styles and we're going to pass in the on chat in the on submit And then inside this we're going to create a div and pass in an input component in here.

And we're going to register it, pass in a placeholder saying type your message. And we also have a class name here so go ahead pause the screen and type out the class name. And then we have to have a button here to actually kind of, you know, send this message. And then here we're having a label that says Bot Image, but this is not a bot image I think, this is just a paperclip. So I am going to change this.

Sorry about that. So I'm going to call this upload and I'm going to change this here as well. Alright and that should be it. And yeah we have an input field that is a file type uploader, right? Very straightforward.

And we have the register function. So if you upload a component in here, sorry upload a file in here such as an image, maybe the business owner is like, hey, can you show me proof of receipt? Then you can do stuff like this. And then finally, we're going to have a statement, an if statement in here, right? Not an if statement, we're just going to check here and see if help exists, Help Desk Questions.

And if the user, who is the business owner, if they decided to show it, because this is actually part of the bonus add-ons, right? So if they did choose to actually have this turned on, then we're going to render another trigger in here for them. And for this I'm just going to turn on the title, I'm just going to put some description, just import all this stuff. And I'm going to return an accordion just like this. And this is our custom accordion component.

So just for now, because let's see, so I want to set a new let me just remove this and see what happens here here we go it kind of works nice I'm gonna copy the separator now and I'm gonna scroll to the bottom all the way down here where we have the second tab content and inside this I'm going to place a separator after the help desk. So help desk, description and then place the separator right after this and that looks absolutely horrifying so I'm going to give it some spacing. So I just gave it gap of 4 and it should be it. So that's it guys. So now we have the help desk and the chat connected in here.

And I also have OpenAI connected in here as well. And don't forget, you have to get OpenAI for this to work. So go just put in your credit card if you have to. It's all a learning experience. You're gonna get 5 just buy 5 dollars nothing more than that.

Throw in 5 bucks or just throw in 1 dollar. You don't even need 1. You probably just put in 50 cents and you'll be good. So far I have used it so much and I've only consumed 2 cents. That's it.

So just put in a dollar and set the cap so that it doesn't go above that if you need more credits just in case and that's pretty much it. So now let's move on to actually testing all of this stuff. So moment of truth, I'm gonna say I need help and I'm gonna send it. Look at that! Let's go!

Dude, that is awesome guys. So if you are seeing this on the screen right now and if you were able to follow through the entire process and you got the exact same output. I'm super proud of you. But there's so much more in this project. So just keep watching because we're going to build the most interesting part, which is actually selling the products of the business owner and then helping the business owner connect those through a portal page so they can see all their data and the dashboard page there's so much stuff so just keep watching I can't wait for you to see how we're gonna integrate all the links and the payment links and stuff like that.

So I'm just gonna call this person, let me give it a different email. So I went ahead and gave this user an email and I'm just gonna send that over and you see how it is just doing a normal conversation, right? It's not like a sales call. So this is why it's so important. And I also want to test 1 more thing.

Fingers crossed. If I shrink it and open it, nice. So it knows what to do. Alright. And so now, I'm going to say, I want to purchase your product.

Hit enter. It's going to do something in here and it's saying, great, you can follow the link here. You see, it is so clever, it went ahead and just sent the link because it knows the user wants to actually buy the product, right? But now if you click on this, Obviously it's going to take you to a page that does not even exist. But there you go.

And let me see if I can actually get more info. So if I go back to my application, I'm just going to go, oh I need to spin this up. Just make sure you refresh your application and just go to your dashboard. Or sorry, I meant go to settings page, and then from there we can go into the domain settings, and I want to take a look at all the filter questions I asked it to get answers for, which is what are your goals in web development, what is your name, So these are the things that it wanted. So let's see if it can also give us info on this, right?

So there you go. So I started a new conversation and I basically said, oh, I'm glad you want to learn more. Can I please get your email so I can send you additional information and updates? You see, it's really good sales technique, right? Because it's saying, I want to send you additional information and updates.

When in reality, this is marketing. I gave the email, alright, thank you. And then it's saying, what are your goals in web development? And if you remember, that is our first question. Alright, and let's say I want to become the best prodigy on earth.

Like this, and let's hit enter, and then let's see what it says. That's an ambitious goal. It's great to aim high. What specifically are your goals in web development? Well, I guess it's still asking me even more.

See, it's very clever. It really wants to get the right answer, right? It knows what's going to be helpful for the business owner. So it's not just going to take any response, right? So let's see if I can give it a better response here.

I want to learn front-end development specifically React and Next.js. I want to learn all the tools I need to succeed and I also want to see the entire application behind the scenes and understand how everything works. And if that's the case guys you can join Prodigy's University and in Prodigy's University I literally sit on every single Friday, me and my team members, we hop in a call with you and we break down the entire project that we're gonna build. So all Prodigy University members already know what the next video is and they have already seen the first step into the project. So go ahead, join, you're gonna have so much fun, and I will see you in there.

Nameless plug, but just wanted to say. So I'm gonna go ahead and also enter this in here. So it took my message, that's fantastic. And are you ready to start learning, learning and achieve these goals? So it's being very natural.

And of course, feel free to tweak the bot and make it ask as fewer questions as you want, literally whatever you want. But I'm just going to go ahead and leave it at exactly where it is because There's another really cool feature that I'm gonna show you. So before that, I also want to go and hopefully go to our conversations tab and hopefully I'm gonna see something in here. I'm gonna be absolutely shattered and select the domain. Alright, there you go.

So it's showing that someone came in and if you click on this, how awesome is this guys? The business owner can actually take a look at every single thing in here. They can literally read it and you see this real-time mode, right? If I turn this on, the AI will stop talking so I can start chatting directly with the customer. Alright guys, enough.

I have been literally messing around with it. I absolutely love how realistic it looks. So, there's a bunch of really cool features we need to wire up like email marketing so we can you know send emails to all these customers, create email campaigns and also allow the business owner to you know integrate their stripe, sell the products and most importantly we have to connect the portal pages. So the first thing we're going to build is the portal page. Okay, so let's go ahead and do that.

So go into your folder structure, let's just shrink everything, go into source, go into app, and you're going to create another path in here and this one's going to be called portal. Alright, and inside portal we're going to create a bunch of dynamic paths and those dynamic paths are going to be wrapped inside a layout.tsx. And oh, I forgot 1 more thing guys. So let's go back into our bot actually. So inside Chatbot, page, AI Chatbot, and then Bot Window.

Scroll all the way to the bottom here, right here, and we need to create a div with the following class names. So we're going to say flex justify center padding y of 2, and then inside this I'm going to create a paragraph tag and I'm going to set the class name to text-grey-400 and then we'll also need text-sm. Okay and this is basically the footer so what you see right here This is what we're doing and I'm just gonna say powered by web prodigies. You can you can literally say whatever you want okay and also see this really really weird thing so I think oh I think that's because of the padding. Alright there we go So you don't really need the padding there.

And maybe we can make this smaller because it's too big. Text sm, what does this look like? Okay, xs might be better. Alright, cool. And let's go back now.

And now go ahead and remove this layout and we're going to return a div in here and inside this we're going to have a component here and this component is called portal banner but after that first we need to render out the children, right? So let's go ahead and say children here and these children components are going to have the following type, which is React.ReactNode. And in here, I'm going to also destructure the children prop. And finally, I have to create that new custom component that's called portal banner. So you want to go into your portal now right in here and or actually never mind sorry guys just go into the components folder which is in here and you're going to create another folder in here called portal and we're going to create 1 file in here called banner.tsx and in here I'm just going to return a banner component so I'll call this portal banner like this and inside this I'm going to do the following.

So I'm going to say div with width full, bg muted, flex justify center, it's going to be an image. So it's kind of like the navbar, think about it that way. And now let's go back and import this component. And now this portal should of course have a page to go to. So the first 1 is going to be a dynamic route.

So inside the portal, create a dynamic route called Domain ID and inside this create a folder called Appointment. So appointment like this and then 1 more route inside this 1 called payment. And inside the appointment route we have to create a page.tsx. Or sorry about that guys, actually this is going to... So inside the appointment we're going to create another dynamic route in here which is going to be called customer ID because this is how we can kind of you know dynamically identify them right and we're going to drag this page into this and say move all right nice and in here I'm going to do the following so inside this this customer ID page.tsx go ahead and return a component and I'm just going to change the component name to customer signup form.

And this is also going to get access to some params, So I'm going to put the types in here. So param, we're going to get the domain ID and the customer ID. And the first thing we're going to do inside this component is make a quick server action call in here. And this also has to become an async component. So I'm going to change that as well.

And let's go ahead and create this server action. So open up your folder structure right here, go into actions, and then create a folder called appointment and inside that create index.typescript and then in here first we're gonna actually say use server as well right up top and then we're just going to have this server action which is basically on domain customer responses and I'm just gonna go ahead and say the following so I'm gonna say client import this from Libs and we're gonna get the customer where the customer's ID is like this and we're gonna select the email and all of your questions along with the ID, the question and the answer. Okay and in here we're gonna also just return it if anything, if any response exists. And now this is gonna throw an error because I'm not you know getting params here And I also need to import the server action. And the next thing is I need all of the bookings, okay?

So I'm going to say await on get all domain bookings. And of course, we have to create this. Don't worry if you don't know what a booking is yet but we also have calendar bookings inside the application itself. So go into the action right here and you want to click into the appointment and then scroll to the bottom and you're gonna say the following. You're just gonna say client bookings dot find many where for the specific domain ID we're gonna select the slot and the date and then we're just going to return that.

Then also don't forget to import this 1. And once you're done importing that, you also want to see if there's no questions, just you know, return. And then in here, we're going to create another component called portal form. And this is a custom component of course, So let's go ahead and create that component. So go into your components folder, which is right here go into forms create another folder in here and you want to call it portal.

And inside that, create a portal-form.tsx. And in here, I'm just going to return a component just like this and rename the title of the component as well. And this component is going to have a bunch of props. So go to GitHub, copy the props, and paste it in here. Okay?

And I'm also going to change this to use client. And this is basically all the questions, the type, which is appointment or payment page, and or sorry, payment form. And then we need the customer ID domain ID email bookings right here the product itself the amount and a Stripe ID, but don't worry. We'll get to stripe in just a second Okay, and then I'm also going to destructure all these values and again, I'm gonna create another hook Okay, and this hook is called use portal hook. So to create this, I'm sure you already know, you want to go into your folder structure, scroll down to hooks, create a folder, call it portal and then you want to create the use- portal.typescript.

Inside this hook, This is exactly what we're gonna do So we're gonna say use portal right and we're gonna get access to the customer ID the domain ID and email and we're first gonna Use use form. So let's go ahead and import use form like this Use Toast so we can show a toast on the screen. And then we also need Use State. So I'm just going to import all the stuff and then we'll continue. Okay, nice.

So we created a state called Step so we know which step of the form the user should be on. And then we also have the date, okay, to store some date stuff in here, and the selected slot that they selected from the calendar. And then we have a loading state, and then I'm also setting the date value right here. And then here we have an onNext and onPrevious, so how to change the step itself. And then we have a booking appointment handler.

So when the user books this appointment, we have to do something, right? So we're going to give access to handle submit right here, and we're going to create a try-catch block, and in here we're going to create a server action. And this server action is called booked new appointment. So go ahead open your folder structure, scroll all the way up top into your appointment index dot TypeScript and inside this file I'm going to say exactly this. So export const on booking new appointment, we need the domain ID, customer, slot, date, and email, and we're going to say client.customer.update where the ID is like this, alright, and we're going to say bookings.create and we're going to create that booking on their calendar.

And then finally down here, we're just going to return the booking if you know something exists. And now let's go back here, back into our use portal hook and I'm gonna import this new newly created server action. And after the server action, you know, I'm just passing in all the values that I need. And then if this was successful and the status is 200, then go ahead and set loading to false, show a toast, and then set the step to step number 3. If not, you know, you can print an error here if you'd like.

And then After this, we're going to say const onSelected time slot. So when something is selected, we're going to update the state locally. And finally, we're just going to return every single thing. So I'm going to go back into my components, portal, portal form component, and I'm going to go ahead and import this component. Sorry, this hook here.

And now since this is, okay, I'm also saying use client on top, right, that's good. And first thing is I need to create a form. So I'm gonna remove this, I'm gonna create a form right here. And this form is gonna have the onBookedAppointment Handler passed into it. And now we need another custom component here.

It's gonna look huge, but don't worry, okay? This is why, you know, complex projects are gonna look complex. It's called Portal Steps, okay? With a bunch of stuff that we need to pass into this component. And finally, all the way at the bottom, I'm also going to just create these steps right away.

So for this, it's the portal step component and pass in loading, slot, booking. So every single thing that we captured here, just pass it in as a prop, okay? And then step type, you know, pause that guys, pause the screen, just type it please, thank you. Okay, and then here we have step 1, okay? If it's step 1 or step 2 based on this, then we're gonna render out something in here, okay?

So let's go ahead and import CN and all we're doing is we're just showing the step itself. So it's just going to look like an orange bar at the bottom. If you guys remember, we did it for the onboarding flow, right? And now, let's go ahead and create this component. Oh, and also before that, we also have to import the portal form.

So let's go back into appointments. So portal, portal domain appointment, customer ID page.tsx. And in here, go ahead and import this portal form so you can go into it. And then let's create the portal steps. So inside this portal component itself, the portal folder, you want to say portal-steps.tsx.

And in here we're going to return a component like this and we're going to change the title. And this component is going to take all those props. So go to GitHub, copy the props and paste it in here. And basically we need the questions, we need the type of the form, and we're going to pass in register as well. So I'm going to go ahead and import all this stuff.

And we're also going to get access to the errors. We're going to get an onNext function. And then we're going to have a step, the date, on booking, on back, on slot, the slot that they're on, loading, the bookings itself, then any products if they're selling, and you know the amount and the Stripe ID. And also don't forget to destructure all of this right from here so I'm just going to import, I mean paste this right here and then after this hit enter and we're going to say if the step is 1 we're going to return the questions form. And then next if the step is 2 and the type of the, you know the type is equal to appointment then we're going to return the booking appointment date form.

And then finally, if the step is of type payment, we're going to return the payment checkout form. So let's go ahead and, okay, so I see some errors here. Okay, I need to import this guy. So go back into portal, portal-form.tsx and import this component so it doesn't scream. And now let's create the questions form first.

So the questions form is inside this same folder. You want to just say questions.tsx and in here just go ahead and return a component and this component is going to have the following props. I'm just going to paste them in here which is the questions itself. We're going to have register, we're going to have the field values as a type, and then here errors. So I'm going to go ahead and import these as well.

And the next thing is I need to destructure all this stuff, right? So go ahead and destructure this here. And now we're going to simply just loop over all the questions and we're going to render out our form generator, our magical form generator component. So in here, we're going to say div like this with the following class names, another container inside that, we're going to have a h2 tag saying account details, and then we're going to have the questions right here. And this is a form generator, So let's go ahead and import the form generator component.

And the default value is bugging. I don't know why it's bugging. What else is going on? Okay, let me import the button in the meantime. And then let me also try to reload to make sure it's not TypeScript.

Okay, so it looks like I missed this, I guess. So go into your Magical Form Generator and you're going to create another prop type in here called Default Value and this default value just has to be destructured in here. So I'm just going to go in here and just destructure it. And I also need to pass in the default value. So first, up top right here, right above the register, go ahead and say default value equal default value.

And all the way at the bottom, right down here in the text area, same exact thing. And now let's go back and I think we should continue, I think we should be good, yeah. Okay, so now we have a form. What is this page? Well, this page is gonna show all the questions that the user did not answer.

How powerful is that? So right now it's actually rendering all the questions itself. So maybe you can filter that, right? You can take it up as a challenge. And let's take a look at whether it's actually filtering.

But the idea is that it's supposed to ask for all the other questions that the user did not answer on the chatbot that the business owner wanted and it should prompt them to complete that before they can proceed. So this is a very very powerful feature. So go ahead and paste this here which is a form generator and then we can proceed. So now go back 1 component back into your form, the portal steps and let's import the questions form. Then next is the booking date.

Now for the booking date component, Let's also see if we can kind of render something out, right? That would be nice. So I'm going to shrink this. I'm sorry, I'm just going to comment all this stuff out just like this. And let's go into 1 of these chats and just probably try to access, I guess, this link, right?

Let me copy this and let me just paste it here okay so portal slash appointment slash appointment id did I make an error in the okay let me take a look okay so portal nice domain id it's dynamic what do we have after this we have appointment okay we have a point okay nice And then we have a customer ID, okay, that looks good. And then we have this weird magical text here that has the same thing again. So am I making some error here guys? Oh I know why this happened. Okay this happened because of the markup that we're getting from here I think.

Okay that's probably why. So right here this will show up as a link so if you click directly from here it should take you to this page. Appointment, something is wrong here. Okay, there's something just wrong with this link. It shouldn't be too bad actually, but I think that should be fixable.

But regardless, this is basically what we need right now, right? But you can just take a look at the link. I think essentially we are... It's just showing us some sort of markup, right? That's why it has that bracket around the second link.

And let me see if I can find it. Okay. So I have response link somewhere here, response content and response link. Okay, this is not too big of a deal and I hope you guys are not pissed off but it's probably just somewhere. I can't find it guys because there's so much we just wrote.

So I'll put the answers in the Discord, okay? I need to take some time and actually look at that. But I'll put that in there so you guys can just come and just grab it and figure out. But it's probably something very, very simple. Just let me know in the comments, okay, if you found that and why it's actually printing the 2 times, right?

Okay, cool. So let me proceed now because it's very straightforward. It's just something but I just can't find it. So I'm not going to waste too much time on the link. I'm sure you guys don't really care that much because you know the link is right here, right?

Okay. So for this user, this user has already completed all the answers. Okay, so for that reason we won't see the portal step, we won't see the question step. So if you take a look at this, let's just look at their chat history, right? So they had 2 questions here and I answered yes.

I answered the name and I also answered the goals. So that fulfills 2 of the questions. Let me take a look at the questions as well. Right here we have what is your name and what is your goals, right? So since both those questions were answered, there's no need to actually get the answers from the user.

So for that reason, to increase the likelihood of a conversion, we're just going to send them to step number 2 and the final step as well. So this portal step you see here is basically because everything is failing, so it's going right to the bottom. So good, things looks like it's working. So let's maybe try this link. Why not, right?

Because I think this person only answered halfway. So let me copy this and let's see if we can access it. Alright, so this user wants to directly pay, so the link that was sent is the direct payment link. And of course, you know, we only have the portal for the appointment set up. So that's something that we cannot test, okay?

But hopefully we can get across the scenario, but I'll create something. Don't worry about it. Just give me a second All right guys, so I see what's happening here So I tried to access the link and for some reason it showed me step 2 And that's because well, I think the AI actually took both the questions. Okay, so see it answered both of them, and I think it messed up here, but that's fine. Let's just cut it some slack.

Okay, but basically it put the same name. It said this 1 correct, but for what is your name? I did not answer it, and it kind of just took in a different question, so or took a different answer, but that's fine All we have to do now is just maybe try to simulate this once more and hopefully we can get this Okay But I just wanted to show you what actually happened and just also show you that sometimes the AI can go out of hand, right? This happens and that's why we have the real-time feature so the user can come in and just swap that on. Alright guys, so I did some testing and I used a different scenario now which is I just try to you know kind of ignore and say hey just give me the link to book the appointment and it sent me, you know, the link to go book the appointment.

And now when I took a look at the questions, as you can see, now it renders out everything. Okay? So what was the issue? Well the issue here was there was some logical problem here with the step. So all I did was I just removed the if statement and I said questions.find where there is even 1 question that is not answered.

Okay? And if there is, then go ahead and render out all the questions. That's what I'm doing here. So if we came in from the previous customers, of course this page would not show. Okay, hope that makes sense.

And how it also rendered it out is that it renders the questions, but it also renders them with the pre-filled answers. So let's say right here, this is weird, this is the wrong answer, right? The user can actually change this and they can save it here as well. So this is really really helpful. So instead of just blocking that option, they also have the option to change the answer.

Okay? And yep, see this is super smart, right? So I just thought this was really cool, and that's why I wanted to build this feature. So now here I'm just gonna say I am, you know, testing, and I'm gonna go ahead and hit next here, and now it's gonna, you know, pretty much not render anything, I think. Let's see what it shows.

Okay, I think this is not a good way to fix this problem, because this is just putting a Band-Aid, okay? Let's go ahead and just give me some time, guys. Let me look at how to actually get to the root cause of what's actually happening here. Okay, guys, so we need to make some fixes here and it looks like a lot more work than I thought, okay? Because of the submission, the way the form submits.

You can't have a form within a form. So everything comes through 1 single form here, okay? All the forms you see here technically, it's not a form, it's just a component, but it has form elements and that gets registered to this form element. So first thing you're going to do is inside our portal step, you're going to remove whatever we had and just have exactly this. Okay?

If form step is 1, we're going to show the questions form. And we're going to go back into the portal form.tsx and here we're going to create a use effect like this. And If the questions.every for all questions, if they exist and those questions are truthy values, that means all the questions have been answered, then we're automatically going to push the user to the next page. But the user has the ability to go back a page and edit the form. Okay, so keep that in mind.

So they can come back here to the details page from the second 1 and they can change whatever they need to. And the other issue I came across is saving this form. But with saving these values here, because it is a next button, and what that means is if you go and just take a look at it right just read the code you'll see we have a button here but this is of type button and a button does not submit right it's not gonna submit by itself it has to be type submit but if it is type submit then you know it's gonna submit now itself and we don't want that right now if we try to have another button in here and this would have to be within a form so that we can get access to these values and that's gonna cause another problem because we need the values to come from this generator as well. So I think there might be a solution, and the solution might just be to have the checkout, sorry, not checkout, to have the save as the last option. So technically, once the user books an appointment, they're going to have a button here, right?

And when they click on that save button or submit button, book now button, whatever the hell that is, it's going to call this exact function in here. Where is that? Let me take a look. So inside, it's going to be inside 1 of our hooks, right? So let's go to that hook right here, use portal hook, and in here you see we have the handle submit.

So this is where we save all the data and all the data is stored inside the values parameter right here, okay? So in values we're going to get access to everything that we need. We just have to figure out how to extract the questions correctly. That's the only trick here, right? Because remember, there are multiple questions.

But yeah, that's what I think would make more sense. So the user changes this here, and if they hit next, well, it's probably going to, it's not going to show anything, it's going to show something else, but you get the idea. That way they can come back and change it and then when they hit save, it's going to save that component and we have to figure out a way how to extract those, you know, form values and then store all of those question answers in the database through another server action. Okay? Alright, so what we're going to do now is proceed with the components.

So let's go back to the portal form, go into portal step, which is right here, the portal portal step.tsx and we're going to create step 2 now. Okay, I think step 1 is already created and is completed. Let me just take a look real quick. Okay, this 1 looks pretty much good to go. And I'm going to open the folder structure here.

I'm going to say booking-date.tsx and also go into that page and return a component here. And let's also go back and import this component inside our portal step component. And this is going to need a bunch of props. So let's go ahead and create these. So go to GitHub, copy all the props, paste them in here, it's very straightforward stuff, you can read it if you like to.

I'm going to save you some time right now and I'm going to import these, okay? And right here, I'm going to destructure all of these values as well And I'm going to remove this and I'm going to return a div just like this. And inside this div I'm going to have an H2 tag like this. And after this I'm going to create another div. And inside this I'm going to say div here with H6 saying discovery call.

And I'm just going to import the card description component. If I go back real quick and if I click on this I think we have everything set. Okay let me try to hit next. Alright nice so we see something in here. Now let's go back so we can kind of see what we're building and then after this component guys so right here you see this div here hit enter and you're gonna say date picker component like this And go ahead and we have to also import this.

Oh yeah, so we have to import this component and this component comes from ShadZion UI. And I think I can actually just pass this in here guys. I don't think, all right. So let me try to import the calendar component from ShadZine UI. And in here, I'm gonna pass in the, directly just pass in the booking.

So on booking right here. And that should do it. So if I hit next, okay, so I see something in here. Nice. And I'm also going to add these 2 more CSS styles right here, which is flex column and from small devices flex row.

And then after this date component guys, so right here hit enter after this div and we're going to do the following. So I'm going to basically loop over all of the appointment time slots and I know we already... Okay I don't think we created this. So yeah let me go ahead and copy this from the constants file inside the time slot. So let me see where is that.

Okay so inside GitHub you're gonna find a file called timeslots.typescript and inside that you're going to find this. Okay, so go ahead and copy that and it's also going to have a type on top which is called slot which is string. Okay? And I'm going to go back to that file and I'm just going to import this from here. Nice, so now we have these components.

So also let me try to import as much as possible. Okay, nice. And we have this appointment slot that's basically spaced out every 30 minutes. And we're just going to loop over it. And for each of them, let's go to the next, all we're gonna do is we're gonna try to render out a slot like this, okay?

So this is what it looks like on a desktop device, looks really really nice actually, and this is what it looks like on a mobile device. So we have the label for it, we have a card here, it's a card component, and it has a bunch of styling. So if you select something, it's going to be orange color. And if something is already selected, then that would be gray color. So right here.

And this is going to have an input, because it is an input component. And we're going to use a dynamic prop in here. So we're going to check only if bookings exist. If that does, then we're going to find all the bookings where the booking.date equal to the date and the booking slot is equal to the slot and then if that is true, right, if this is true we're going to return disabled true or disabled false. So that way let's say if some of the slots were already picked, this input box would actually be disabled.

And then we have class hidden here, and I think this is actually... I don't think it makes an impact, but... And then we have type radio value here, which is the slot, and then we're going to use a spread operator for a register and we're going to pass in the ID. Okay, so I did not like this actually. So if you go into your layout page, this specific layout page that's inside the portal page, we have a height screen.

So because of that everything is being limited to the screen height. So what you could do is you can set this to height screen, but only from medium devices and you know, if not, it's gonna be the regular size. So now it's gonna be like this. So what you can do on top is you can say margin top of whatever you want really. Sorry, not here guys.

You want to put the margin top in here. Okay, cool. So I set margin top here to 12 and now it looks so much better on a mobile device. So now let's go back into our booking date component, which is the booking date component under the portal component. And after this we're going to have that save button.

Okay, the exact button that I was talking about. So after this div, after this 1 right here, sorry, hit enter and then we're going to create a button. Go ahead and import our button and this 1 is called edit questions and this 1 is the button to save. Okay and by default all buttons are of save or of submit type if they're inside a form, right? So this 1 is a submit type button, but this 1 is a regular button.

So if you look at what it does, right in here, you have this. If you go edit questions, it's going to take you back to this page. So if you put something in here, okay, it still persists the value, right? So we can essentially extract the value from there and we can show to the user, you know, finally at checkout or whatever. I mean, we can basically save it.

That's all I want to do. I really just want to save their data. And now I'm going to go back into our main component, which is the portal steps component. And here we're going to have the payment form but we have to set up Stripe for this. So what I'm going to do is I'm just going to create a work in progress flag just like how we do usually and I'm going to say set up Stripe.

All right. All right guys, I found the solution so let's go ahead and implement the change. So the first thing you need to do is go into the appointments folder right here, click on index.typescript and in here you're going to say const saveAnswers. It's a new server action. So saveAnswers equal to an async function that takes in the questions, which is an array like this, question and string, and we're gonna pass in the customer ID, which is a string in here, okay?

And then for each of these, so for each of these, basically we're going to loop over them and we're just going to update these answers in the database. So we're going to say where the ID is this specific customer ID. We're going to update the data. We're going to set the questions. We're going to update where this specific question ID is this, and we're going to change it to the question at the specific question.

Okay, we set the answer to that specific question. That's pretty much it. So this is the, you know, the number, the counter basically, the counter. And then here we're just going to return saying updated responses and we are set. Okay so let's go back and the next change we need to make is inside our hook.

So go to the use portal hook and if you don't know where to access it you can just go into the portal page. Okay this is the hack go in here and then click here. Okay and I hold command to do that guys. So someone asked me the question, how do you do that? Hold command and click on anything, okay?

It will take you into the file. Now that's also only on Mac. I don't know what, you know, other devices do. But let's go into the hook and here's what you have to update. So this onBookingAppointment function is basically the onSubmit.

So all we have to do is add the functionality in there. So we're going to say setLoading to true and then here we're going to say const questions equal to objects.keys.values. We're going to get all the keys from here. Now why are we doing this? It's because this values comes with a bunch of other stuff.

It comes with all the form IDs that we have. All the forms that we have. And this also includes the date and the bookings and the questions and answers on this form. So because of that we have to extract those keys based on the format of the keys. So let's go ahead and take a look at the format so it actually makes sense.

So this is the questions component inside the portals folder right here and this is what it does. So if you look at this there's a name here called question- and then we have the question ID. Also there was an error here, we have another curly bracket, just remove this and that's going to help us track this question. So anything that starts with this, we're considering this a part of a question basically. And now if we go back to our use portal hook right here, you see we're saying the key starts with this question.

If it does, great. So we filtered that, and then we're gonna reduce it to the following. So we're gonna say object, and we're gonna create this array here, right? And inside that, we're gonna say key.split for this specific question. We're gonna take the first value, and that's basically how we get this right here.

So we're basically dynamically creating an object. I hope that makes sense. And yeah, this is the first value that we're starting at. So it's an empty object and then we're just dynamically creating this object here with the key values, right? And we're just returning that object here.

Okay, that's pretty much it. And yep, and then here we're saying saved answers equal to await saved answers, passing in the questions that we have along with the customer ID, which comes through the use portal hook. And then here we're saying if save answers was successful, then we're going to do this. The same thing, I think, on booking new appointment. Just copy this from GitHub.

You probably wouldn't even face this bug if you were working on it. I mean you probably don't because this is the code repository that you're using. But yeah, I hope this makes sense so you can kind of see the whole process as well. And that's it. And then if it's booked, we're sending this message and that's pretty much it.

So now let's test this out. So in here, I'm going to put my name, Aaron, okay, and what are your goals? The customer can also change it in case it's wrong, right? And here I'm just going to set the goal to be something like, I want to learn front end. And I'm going to hit Next here.

It's going to take me to this form. And you see how I have already booked 2 appointments on the calendar. So I can't book more. And I just want to do that to basically show you what it looks like. And now you can pick a slot.

So I'm just going to pick something here. I'm just going to pick 28th maybe. And now these are empty. So on 24th I have some slots already booked. So I'm going to take 27th and I'm going to pick the 3.30pm slot and it's showing orange.

And if I scroll down and hit Book Now, okay, I have no idea what happened, but I just refreshed everything and I see the questions are already saved. So I am clueless, but Let's go ahead and see if maybe that was just some weird sort of bug. I'm gonna put a different time here. Let me just select something here, okay? So 24th, 5.30 p.m.

I'm gonna select book now. Okay, I guess it was just something weird. Okay, fine, Good, magic. All right, and I think I just probably had to refresh the page because I didn't do that. But yeah, that's pretty much it and now it's booked.

And here we're just going to show a thank you page, okay? But if the customer is selling products, then we want to show the customer's products in here. That's the goal, all right? That way the user can purchase those and then they can also see the thank you page show up. And 1 more thing I'm doing in here, so if you refresh this now, you see it automatically pushes the user to the bookings page.

So how does this work? Well if you go into the code and you search for... Let's go into our... First let's go into the portal page. So the portal form.

We have a use effect right here and this use effect essentially just checks if every question is answered. Okay? And if everything is answered, then it's just going to push them to the next page. That's what's happening here. And if you want to edit the questions, right, you can scroll down here and click on edit questions.

And you can also change it here. Alright? So this is good in a way because the user doesn't see all the questions that they answered. Now I'm going to go back into the portal step component because I also have to create another final thank you page. So let's go ahead and do that.

And this is going to look like this. It's just a div here. And the div is going to have the following styling. And we have an h2 here. And we're just going to say thank you for taking the time to fill this form, whatever, literally whatever you want, okay?

I'm just putting this in here. And yeah, that's pretty much it for the thank you page and we still have our Stripe stuff to set up. Now open up your folder structure and inside the dashboard route, you're going to create, first of all just create a dashboard route here and just create a page, okay? This way you can actually have something here and when you go to the dashboard page, it's not going to throw a 404. Alright, so go ahead and do this.

And after that, I'm going to create another folder in here, so another path, and this 1 is going to be called Appointments. Okay, so Appointment, not Appointments. And inside this, I'm going to create the following page. So, page.tsx in here, and we're going to return a component in here, and I'm just going to call this page for now. And the first thing we're going to do on this page is we're going to make a call here so I'm just going to call this here and also change this to an async function and let's import this from clerk and then finally we're going to say if there's no user go ahead and return and then we want to get all the domain bookings.

So I'm going to say get all bookings for current user, okay? And I'm simply going to create a server action for this, so let's go ahead and do that. So go to your actions folder, go into appointments, and then open this index.typescript file, And at the bottom, this is what I'm going to say. I'm going to say, on get all bookings for current user. We're going to set that to an async function.

And inside this, here's what we're going to do. So we're basically making a call to the bookings schema, the bookings table, and we're going to say, find many for this specific customer, right? And we're going to select all of this stuff. Okay, so just copy this from GitHub. And basically we're just getting all the bookings as an array.

Okay and you can see the response here. It's an array with all the bookings. And let's go down here and we're just gonna return all of this. So go back to the component and I'm also going to import this. And now here I'm going to create a date here.

And the reason why I need this is because I want to compare what appointments that are being booked are actually due today. And I'm going to render all of those cards on the page as well. So this is going to be a React fragment, and in here I'm going to pass in our info bar right up top. So let's go to the bookings right here, the appointments page, and that's going to render right here. And inside this I'm going to create a div right here and inside this div I'm going to create another div but this is going to be a special component that we have to create.

So open up your folder structure, you want to scroll down to components and inside this you're going to find, sorry you're going to create something called appointment and inside that you're going to create an all-appointments.tsx file and inside this we're going to do whatever we need to. So I'm just going to return a component for now and I'm going to set it to all appointments. And this is going to need a bunch of props, so please go to GitHub, copy it, and paste it in here. Don't sit and start typing all of this stuff. And in here I'm going to also get the bookings from here.

And the first thing we're going to render out is a data table. Alright, so I'm going to remove this first before I render that. So I'm going to say data table and this is a constant variable that we created which is the table headers. So go ahead and import that and also import the data table. And this data table is going to look exactly like this.

It just give me 1 second. So I think we can just create a component for this. It's not really necessary, but since I already did it, I'm going to follow the same structure. So I'm going to say table and inside this, it's index.tsx. And all we're going to do in here is render out this very simple table and this component is going to look like this.

It just has headers and the children and we're going to render a table component from ShadCN, table header and we're going to create a row for the table header which is each of those headers that we passed in and for each of them we're going to create a table head. And we're just going to pass in that text in here. And then here we're just going to render out the table body. So let's go back now and import this component. And this component needs some children components, that's why it's screaming.

So inside this, this is what we're gonna do. We're gonna say, if there were any bookings, then we're gonna map over it and we're gonna return a table row. And I also went ahead and imported everything before I proceeded, just so that I don't see any weird errors. But basically, if there are bookings, then we're going to map over it, return a row, right? So 1 row for each entry, and that's going to have some cells, right?

So the first cell is the email cell, and I'm going to just pass that in here, and then we have a div here, which is going to give us a date, and then the next 1 is another date here. I think this is the created at. This is the booking date. So when did the user actually book the date? And this 1 is when was it created?

Actually, sorry, this is the date of when the meeting is going to be held and this is when it was created. Sorry about that. And then here we're also putting some time related info, just very basic info. Just follow the headers, right? That's what we're doing.

And then for the table cell, we're just passing in the booking, the customer domain name. So where was this booked from, right? And then finally, if nothing is there, just show the no appointments. And I'm also going to go ahead and just quickly render this out. So let's remove this and render out a component here.

And let's refresh the page. Alright, awesome. And there you go, we can see all of the customer information. So 1 thing I want to change here is definitely the title here. So let me see if I can change the headers.

So what I did here was after this I put a comma here and I said text-black. So now this 1 looks so much better. There you go. Now you can see when they have booked a time and when it's held and from which domain the user also came. So let me go back here.

And we're just rendering that information. And of course, if nothing was in here, You can show this no appointments or you can show some sort of custom component if you'd like And now I'm gonna go back to our appointment page dot TSX and in here after this div I'm gonna create another div and I'm gonna set its class name to column span 1 and inside this guys I'm going to essentially look at all the domain bookings and I'm gonna render out a component. So I'm gonna also import all of this stuff so just give me 1 second and the component is gonna look like this. So if the domain bookings exist then we're gonna map over them and for each of them we're going to check if they are due today. If they are due today, then we're going to render out a card, put a card content, and inside that we're just going to create some...

We're just showing a card on the page, right? So we're showing the domain from where it was booked, when it is booked, what time, and all that kind of stuff. That's pretty much it. And after that, we have an avatar right here. We can just show something in here, for example.

And we're also showing the email of who booked. And if there are no appointments today, we're going to just show no appointments today. So of course, I don't think there are any appointments today. Let me see. So this is causing a problem here because I have this being, I'm showing this essentially on each iteration.

So that's going to look a little weird so I'm just going to remove this here and I'm just going to return null here. So just return null like this and after this is where I'm going to do something. So if there's no domain bookings, so I'm going to say no domain bookings, then in that case I'm going to render out this div. Something is happening weird here. I think I'm just making some really weird error here.

Just give me 1 second, guys. Okay, so I just made some changes here. So the first thing I did was if there are no domain bookings itself, so there's nothing there, we're just going to say no appointments. So we can just remove this and Now the next thing is this is just really really weird here. So I'm gonna change this.

Just give me 1 second All right guys. Sorry about that. This is all I had to do it I made some changes. So the first thing is right here I said if there are no domain bookings then just return a paragraph here that says no appointments. Now if that does exist we're just storing this in a variable and this is a server-side component I think so we should not have any problems here.

And here we're just going to say domain.bookings.filter. So we're getting all the bookings that are due today. And then right here, we're essentially rendering out all the appointments. So everything you see in here, right? And here, which is we're trying to return all the appointments that were due for today.

So we're going to say booking exists today dot length. If it does, great. Then we're going to loop over those and just render out some cards. Right now you're not going to find any cards but let me see if I can put an appointment. So It looks like I can't book an appointment today because it's already past 7.30 so I don't have any slots so that's why we can't see anything but hopefully we can see some tomorrow but it is a very simple component so let me see if I can render something else out.

So let me remove this for now. So I'll remove this here and I'll remove this at the bottom as well and let's see what we get here. You have to change this to domain bookings dot bookings and then you should see some components. It looks like this so maybe we can give this some padding as well. You guys can use some styling options for that.

I'm just going to reverse all the changes I made. Alright, awesome. There we go. So now you have an idea of what this page could look like with appointments that are due today. Great job.

So now we're going to be using Stripe Connect inside the application to actually sync all the products. So let's go ahead and do that. So go into your dashboard right in here and I'm going to shrink everything so it's easier to read. And inside this dashboard route, I'm going to create an integration route and inside that create a pH dot TSX and inside this component I'm going to have the info bar component and I'm going to have an integration list component but we also have to first fetch all our payments and get all the connected stuff set up So let's go ahead and do that. So how this works is we just have an object here that holds all the different type of integrations, right?

So you can expand on this application. You can have an integration for the API key. Maybe you could have a different API key and for that reason you might want users to connect their APIs into this application. Or other applications like Facebook Automations, Instagram, literally whatever you want. Here, I'm creating a server action that can help me get data on whether this user has their stripe connected or not.

And based on that I can pass in the states in here, pass this as a prop, and then inside the integration list based on all the different apps or integrations that are connected, I can show the button and or I can hide the button or I can also change the text saying connected or must connect, right? So that's why I'm doing this here. So to build a server action, the first thing we're going to do is we're going to go into the settings page inside our actions folder. So actions here, settings, index.typescript. We're going to scroll to the bottom and we're going to say getOnGetPaymentConnected, which is a function in here, server action, and we're going to first wait for the current user.

If there is a user, then we're going to say const connected equal await client.user.findunique for the specific clerk ID, and we're going to select your stripe ID. If they are connected then we're going to return that value. Alright we're going to return the stripe connect ID. So let's go back here and now I can quickly import the server action. Now inside this I can actually create this custom integration component.

So open up your folder structure, go into components, and in here you want to create integrations, and inside this make sure you create an index.typescript file, sorry, TSX guys, and inside I'm also going to return a component in here, and I'm going to call it integrations list. And this component of course is gonna take that new prop so I'm gonna say connections which is a string boolean and I'm gonna go back here and I'm also going to bring this in. Sorry not a string boolean guys, it is stripe which is boolean. Okay so it's not a string, sorry about that. So we're gonna take in a boolean value.

So maybe you could also take in the the value itself, maybe you might need that. But yeah for now I'm just gonna pass in a boolean in here because this works. And then I'm gonna scroll up top and I'm gonna change this to a use client component. And let's go ahead and quickly destructure these values. And the first thing we want in here is a div.

So also click on this integrations tab in your sidebar and it should take you into this window and you should be able to see something in here now. And inside this I'm going to loop over a a constant called integration list items which I'm just going to create in just a second. So go into your folder structure, scroll down all the way to constants right here and inside this I'm going to say integrations.typescript and I'm going to do the following. So go and copy this, it's just a type, and we're going to have the integration list item props. And what is that?

Very simple. It's basically the ID, the name of the type of the integration, the description. So for example, Stripe is the fastest and easiest way to integrate payments, and then I'm just going to have some logo in here, and then the title which says connect Stripe accounts, and then the modal description which is literally going to say the you know world's most successful platform and marketplace including Shopify and DoorDash, whatever right. Now going back to our integration list component, I'm going to quickly import this list right here and I'm also going to import all the other components on the page. And finally I'm going to have a custom component here of course but I'm going to import the card description before that.

And we're going to create this component. So in here you're going to say integrations trigger. So integrations integration trigger.tsx and we're going to return a component and just paste this in here and also go back and quickly import this component. Let's go back in here and this component is going to have the following types. It needs name, logo, title, description.

This is spelled wrong but it's fine. And then we're going to have connections in here, and we're set. Oh, it looks like it's already rendering something. So this is just the trigger, right? Which is basically a button, which is going to open up a modal.

So let's go ahead and create that. And before that, OK, I also have to destructure all these values. And this is what we're going to return here. So we're going to return a modal. This is a custom modal component.

And it's a really, really cool component that we created. And this component essentially is going to help us kind of, you know, isolate the modal features so that it can be reused everywhere else. So import all this other stuff separator and then this is another custom component so we'll get to this in a second. So go into your components folder right in here and you're going to create a modal component like this and inside that an index.tsx and in here I'm just going to return a component and change the name and finally go back to our integration trigger and also import this. Now I can go back in here.

Now this component is going to have some props So let's go ahead and paste that in here and I also need to destructure all these props from here as well. And once you're done destructuring, all we have to do now is render out a switch statement. So this switch statement is going to look like this. Okay, I made some error here. Sorry about that.

We're going to put switch here and then return. So I'm just gonna go import this and then I'll explain it guys. Just give me a second. So this is a dialogue component, okay, that has a dialogue trigger and the dialogue content. And the trigger is what's gonna go in here, which is basically the button.

So in here we're gonna have a div that has an image, and this image is just already on upload care. Let me see if I can actually find it. So I already have that image up there, and in here I'm gonna have a div that has a left and right arrow mark. And then inside this we're going to have another icon. And this is the logo for that specific integration.

So I think this should be Stripe. So I'm going to change this to Stripe. And then finally here we're going to have a dialogue header, which is going to say title, the description you pass, and the children components. And then finally by default we're just gonna return something like this. Okay so whatever you wanted.

So yeah for every integration you just have to duplicate this and put in you know some new information inside the object, the constant we created, and then also make sure you update the images for them. And that's pretty much it. Or actually guys, you don't have to do that too. Sorry about that. I don't think...

Yeah, you don't have to. Because this is an integration type model, all we're doing is we're showing a type of a template, right? So I think a better architecture for this would be to actually decouple this logic here, because this is not good architecture. I'm probably just building it and that's why I put it in here, okay? But it would be to decouple this and only have this, right?

Components should be, they shouldn't be bound by the logic. No logic should be inside components because they are reusable components, okay? Anyone who comes into your team be able to take the component and use it, That's it. But now they can't because now they have to update this global component which is going to cause problems in the long term. Okay?

So to avoid bugs and issues, you have to make sure to only create global components that can be reused by any component or any team member and at the same time, this component should not have any of the logic of the business wired up into it. So what I would do in here is instead of having all the stuff here, I would probably just, you know, pass in the children and render out anything you want within the modal. That's the best way. So if you want a better example, the last video actually breaks that down for you. So you can take a look at that, or you can take a look at Plura.

Literally, I've done that in all the projects, and you can kind of understand how to create these good global components. Now that our modal is done, we can continue with this section. If I hide this, I'm just gonna hide it and see what happens actually. Okay, so it's gonna look like this and if you click on it, as you can see, it has a modal, it pops up, it looks absolutely stunning. Right?

Great job. So inside this is the component we're gonna create and this is actually 1 of my favorite components. I don't know why but I thought this looks really really nice. It really showcases what we're trying to do, right? We're trying to connect 2 apps into our app and I think this is a really nice mockup.

So alright, let's move on to creating this component now which is to show the features and go ahead and say integration-model-body-like-this.tsx inside the same folder and you're going to do the following here. So inside this, you're going to have 2 props in here, right? Type in the connections, and inside this, we're going to render out each of those features. So all you have to do in here is for each integration type you want, but I'm only using Stripe, right? But let's say you use OpenAI within, or not OpenAI, maybe use a different service that's going to help you inside the application, like let's say Instagram or Facebook or Meta, right?

So if you're using Meta, then you can have a Meta API integration and you just have to change all the features that you're trying to get from it. So in here we have a switch which shows the case, which is Stripe in this case, and then here we're going to have a div here with an H2, all the features, we're going to map over it, and we're going to just return a check icon along with, you know, this should actually be a span but it's fine. We're just going to return a paragraph with the item inside of it. Okay, so this. And after this, at the bottom, we're going to have a div here, we're going to have a button here that says learn more and maybe you can send them to the website of the application that you're trying to integrate and they can get more information there.

And this is where Stripe Connect comes in. So before we wire up Stripe Connect, I'm sorry, just 1 more second, okay? First, hide this component, I don't like errors. I'm going to go back and import this component, okay, from the integration trigger. So now we can actually see something on the page.

If you click on it, there you go. Looks so nice, right? Let's expand this and see what it looks like. There you go. Such a nice component.

And if you look at the Figma designs, this is pretty much exactly what we were trying to replicate in here, right? Maybe only this part, but as you can see it's going to have the Learn More and the Connect button, and this way you can connect into the application. So now let's go ahead and build out the Stripe Connects component. So To build this, first open your folder structure and you're going to search for components settings. And inside this go ahead and create stripe-connect.tsx.

And inside this component we're going to return the following. So this is another hook that we need to create but just forget about that for now. We just need to have connected, which is a boolean in here. It's a very simple component. We are using a hook, but we're going to have a button in here, right?

And this button is just going to show a loader that says connected or connect to stripe. Okay, so it's basically a Stripe Connect button. So maybe you can reuse this button in a way, right? You can probably create a global button for it as well. So this may not be the best architecture for the Stripe Connect, but you could have a global button and just pass in what you want it to do.

So now go ahead and open up your folder structure and you want to scroll down into your into hooks right here and inside this go ahead and create billings or actually this is terrible sorry billing and inside this you want to say use-billing.ts and everything billing related all the hooks subscriptions all that kind of stuff it's going to be in here. Alright, so let's go ahead and create the first hook which is export const useStripe which is going to be an arrow function right here. And this arrow function is going to take a state first. So let's go ahead and import this UState, which is onStripeAccountPending and set onStripeAccountPending as well. And then we're going to need a function in here called onStripeConnect, which is going to do the following.

So it's going to say async. We're going to set this to true first and then as we're connecting we're going to say axios. So go ahead and import axios like this.get API slash stripe slash connect and then if everything is successful then we're going to set this pending to false and if there's an account we're going to say window dot location dot href equal account dot data dot url okay and then finally we're just going to print any error if we need to All the way at the bottom here, we want to make sure we return all of this. So let's go back to our file right here and let's re-import this useStripe hook. Alright, awesome.

And now if you click this button, okay, something is still wrong, that's because we need to actually import this Stripe Connect button itself. So let's go ahead and import this button. I'm going to refresh the page again and if I click Connect, boom, there you go. And now if you click on this, well, nothing's going to work because it's going to try to connect and try to hit the API endpoint but it's going to throw an error, right? And you can see that in here, 404, because we haven't created that page.

So let's go ahead and do that. So open up your folder structure and I'm just going to shrink everything. Go inside source, inside app, and I'm going to create an API folder. And inside this API folder, I'm going to create another folder called Stripe and inside that, connect and inside that, a file called route.typescript. And now go ahead and quit your terminal and you're going to say bun add Stripe and go ahead and hit enter.

Alright guys, so in this file, we're going to write a bunch of stuff. Just bear with me because Stripe is sometimes a little complex to get set up, but I have literally got everything down for you. And this literally took me 2 months guys. When I was building Plura, I don't know if you guys have ever seen that video, it's 1 of my best performing videos and hands down 1 of my most favorite videos as well. So if you haven't go take a look at that.

But when I was building Plura, it took me literally 2 weeks to figure out everything about Stripe. I was very new to the Stripe Connect thing, and I haven't actually done it before. So I literally had to read hundreds of pages of documentation, I'm not even kidding. And do you know what's the funny thing with Stripe? Stripe has 1 documentation page, and then they have another database for another documentation page that looks completely different, but it's the same thing So I was literally all over the internet and for that reason I made it so easy for you guys and I created a full document I literally spent 2 3 days and I have all the links in here and this is exactly what you need.

It's not too much, it's literally all you need. How to manage the subscription, how to do Stripe Connect, how to process a payment, how to customize the appearance, all basic stuff and you have direct links right to those pages. Okay? I made it as simple as possible and also how to do it in a test variant, all that kind of stuff, and I put it right in 1 document and it's ready for you. And also there's a little secret link here, and this is how I was able to get support directly with the Stripe team, and you guys can also do that.

And if you want to just get it, it's right here. Go to webprodigies.com and just click on the vault and everything is going to be in here. It's just 1 dollar. Go ahead and grab it. It's going to help you.

It's going to save you so much time, man. Trust me. Alright guys, so the first thing you're going to do is you're going to open up Stripe. You're going to create an account or login and once you're done, if you have the document, you already will have the developer API key link. But if you don't, no problem, this is what you have to do.

Go in here and then look up developers. You see how weird this is? Let me show you, right? So make sure you're on test mode as well. Turn this on to test mode.

You see there is nothing related to developers in this tab here, sidebar. You can't find it. You have to literally search for it, right? And I can't really find it here either, so I had to like literally search for everything. So go into this and then you're going to find API keys.

So click on API keys and in here you're going to get a public key. Go ahead and copy this and then I can't show you this but you have to go into your environment variables and you're going to paste this key here into the publishable key. And then the next thing we need to do is we need to create a secret key. So I'm gonna view this secret key here and go ahead and copy this and go into your environment variables and you want to put this key inside the secret key section. And that's pretty much it.

And if you realized this is a slightly different approach to Stripe Connect because I basically found another way to actually do Stripe Connect. So this is very different and I'm gonna show you how to do it and it's gonna work. It's much easier because everything is directly through the code. Last time for Stripe Connect we had to do it inside the dashboard, which is also a different way and it's a nice way. It has a UI, right?

But now we're going to just use the code itself. So the first thing we need to do is you need to create a Stripe instance. I'm going to import Stripe from Stripe and here I'm also going to bring in the Stripe environment variable, so the secret. And then after this I'm going to create an endpoint in here, which is the get endpoint, and this is going to look like this. So export async function get, and then go ahead and create a try catch block and inside this we want to await the current user.

So go ahead import the current user just like this and if there's no current user then you just want to return a response saying something's up, user is not authenticated. So what are we doing here? Now before I type anything, let me just give you a quick hint. Well, once you try to onboard someone in Stripe Connect, Stripe is going to try to get information from the client. And that makes sense because you're onboarding someone into Stripe.

Whether they have an account or they're going to create an account, doesn't matter, Stripe is going to try to onboard them through that process. Now that process is annoying. It is so so annoying and for that reason, I found out a way to actually bypass everything. So this is how we're going to bypass it. And it's by putting fake info for now, but in production of course you can change all this stuff guys, we're just learning right now, it's completely fine.

What you're going to do in here is you're going to do the following. So we have to create a fake account, okay? So we're going to say accounts await stripe accounts.create and just copy this from GitHub. Just copy it from GitHub and paste it in here and then next we're gonna say if account is successful so after this hit enter and if account is successful then inside this we're gonna say stripeAccounts.update the account.id that we just received from here and then we're just going to put all this info in here. See it's all fake info, right?

And then after this we have to check if the approval was successful. So if approve is successful in here, then the first thing we're going to do is we're going to say const person like this equal await stripe account.createPerson. So we're basically creating someone like a staff member, right? Now we have to check if this person is successful, then we have to do something in here. And you can also just use no person, return null.

That's fine as well. You can return an error. And in here I'm going to say the following, sorry, which is const approved person equal awaitStripeAccounts equal update person. We're going to pass in this, all these details. Then inside this, if this person was approved, then we're going to do the following.

We're going to say const create person, we're going to create another person in here. And then after this in here, we're going to check if this owner was successful in here. And then finally we're going to do the following. We're going to say, stripeAccounts.update, and we're going to update this like this. We're going to basically set the company owners in here.

And if this final process was completed, then we're going to create the user in the database. So we're going to get the account ID. And this account ID comes all the way up top here when we're first creating the accounts. So we want to just, basically we created the account here but we're also passing in all fake info into business information. That's pretty much it.

And this is for our clients who are getting onboarded into Corina AI. Remember that. So at the bottom here, here's what we're gonna do. We're first gonna say const saved account equal client. So await client.user.update where the clerk ID is like this, and we're going to set their StripeID, which is basically the connect ID, to the account.id.

And then after that, right here, we're going to say if the save account ID was successful, then we're going to create a payment. It's not a payment intent, it's basically, I guess it's a link that helps you send the user back to the integrations page. So we're going to pass in the account, which is the account ID. So this is the account we're trying to connect and then we're going to say refresh URL and we're just gonna pass stripe slash refresh and then the return URL is gonna be this localhost 3000 callback stripe slash success and then here I'm just gonna say account onboarding and collection options I'm just gonna set fields to currently do and then finally I'm just gonna return this here so I'm gonna return the URL itself. And that's pretty much it.

And finally, I'm just going to print an error in here. Nice! And this looks like callback hell, not going to lie. It's just because it's creating this weird pyramid structure and it is very difficult to maintain. So maybe you could use some sort of promise chaining or literally whatever you want.

I'm just doing it right now just to make it easier to follow. So now here I'm gonna also print out an error if anything happened and we're set with this endpoint. So let's go back now and now we're going to go back into our use billing hook and now this will make some sense now. So the process here is we're going to essentially first finish everything, right? Which is create the account, create the mock information, all that kind of stuff, and there itself we already get the account ID that we created because it's a test account ID, right?

And then we're storing it in the database. Now once this process is done, next we make sure that's successful, and then we're going to set all the state's defaults, all that kind of stuff. And then we're going to refresh the browser. This will take the user to the onboarding flow. And just to show you the other method, which is actually something that I would like, this 1 is a little more straightforward.

It's not that fancy. This is probably a little more realistic. So what you would want to do is if you have the Stripe Guide, you can click on that link, it'll take you to this page or you can just look up the Connect Settings page and then in here you're going to find OAuth. If you scroll down you see we set this up for Plura, right? So what you would have to do is you would have to get this application ID first and the app, it's a whole different setup though but you're going to use that application ID to basically wire up Stripe Connect first and then this right here is going to be the refresh, the redirect URLs.

So once the user is done being verified, or once they have onboarded, then Stripe themselves will send the user to your page. They'll send them back to this specific page, and then you can do whatever you want in here, whether it's extracting the values from here, or like you know, it's gonna give a bunch of URL parameters. You can extract that such as the code, the state, all that kind of stuff, and then you can store it in the database, and then you can proceed. So this is just another way, and it's nicer I guess in a way, but this is just sort of like a hack around. The only difference in ours is that we're saving the process before we go into the Stripe onboarding flow so that we can just get out of it.

But if you don't want to get out of it and you want to sign up and put all the information and all that kind of stuff, then when you get into that onboarding flow, you would have to actually sit and type every single thing out. So now because of this, you can escape that. Alright, that's pretty much it. So just to see how this goes, let's give this a shot. So if I click on this connect right here and click on connect to stripe, it loads something.

Alright so something looks like it did not work so let's take a look. So I'm taking a look at the database and I already see the stripe ID. So It looks like something worked, right? The issue is in the refresh. So we're going to try to see if we can fix this.

I think if we try to reconnect, it's not going to work. It has to give us a new ID. So let's just see. So there you go. It's saying connected.

So if I try to click on it, this button is going to be inactive. Right? So let's go ahead and try to disconnect that. So I'm going to go in here and just remove this and just save this change and then I'm going to go back and guys if you don't know how to open the database just do bunx prisma studio. Prisma Studio will show this table for you so you can interact with the database.

If I go in here and refresh the page, it should show connect and let's actually see what's going on. So first let me just see the console. So I'm going to quit the terminal. I'm not quit the terminal, I'm just going to clear the terminal here. Connect to Stripe.

So nothing happens here. So this looks successful. I just don't see a 200 response here, but maybe inside this I can probably see something in here. Let me go to Network. So I'm seeing something in here.

A 500 response. And inside the network tab, I actually don't see anything here, but here I'm seeing something. Let me just figure this out. Let's see what's going on. So it's saying you must update your Connect branding settings with icons.

Oh, So there's nothing wrong except for this problem here, which is you have to do this here, which is to basically create an account. You need to actually change the branding settings. So let's go ahead and do that. So looking at this error, see this is why it's so important to read the errors, right? It showed a bunch of stuff but they also said where you can do it and I was trying to look for it but in here they're giving you the link so click on this and it's saying you have to set an icon to create an account.

So let me go ahead and click on this it's gonna take me in here and inside this essentially I have to customize it so Let me go ahead and click on this. It's going to take me in here. And inside this, essentially, I have to customize it. So let me go ahead and click on Customize. And I'm going to change this name to Corinna AI, Corinna AI like this, and set some icon.

So I put some logo in there and there's some other logos in here as well, but that's fine. It doesn't really matter. And I think we can hit save. Let's see what this does. We have a logo, we have an icon, and maybe we can try again.

And I think it probably did create the data in the database. Let's see. Under user, we have a user right here. But where is their Stripe ID? So I see a domain in here and Stripe ID is under the domain.

Sorry, is under the user. Guys, Am I blind? Right here. Oh my god. It is giving us the data back.

That's because we're creating everything without the help of the onboarding flow. But let's let's try to give it a shot. So I deleted it. So I'm going to go back here, refresh, hit connect, connect to. Let me also do this.

So quit the terminal. Sorry, not quit, I'm going to hit command K and it's going to clear it for me. And then I'm going to hit connect to Stripe and it will take about 500 hours. And after about 500 hours, it's going to send you to a page. It literally took so long.

But I think it's because it was trying to enter all the information right that's why it took so long but that's good we're good to go and I think we can so for now I'm just going to bypass this because trust me if you were not able to bypass this you would have to enter so much information or you would have to have a Stripe account that's verified and all that kind of unnecessary stuff. So I just put some phone number in here, let's see what happens. I'm going to hit continue, it takes me here, great, it's trying to send me something but I'm trying to escape, how do I get out of this flow? I think we can just go back guys, this is fine. So just go back for now but as you see I explained the different methods of doing Stripe Connect.

This is just a way to bypass everything. Alright now let's also cross-check and make sure the user's Stripe ID isn't here. So I'm under the users table and inside this, I see Stripe ID, there we go, great job. So this user is successfully connected. So we can now make charges on behalf of this account and we can also send them money and all that kind of stuff.

Alright guys, the next thing we're going to do is at the bottom, right here, right under bot training, we want to give the business owner the ability to sell products within Corina AI. And the way to do that is of course, We're going to use a payment intent to sell all their products that they are selling on the platform as 1 single payment product. So how do we do that? Very straightforward. So you're going to go into your settings page under the domain, domain right here, under that you're going to go into page.tsx.

You're going to scroll to the bottom here and right after the bot training form you're gonna create the product, like this product table, and inside this you're gonna pass in the ID, which is gonna be domain.domains at zero.id. And I'm gonna change this here as well. Now let's go ahead and create this component. So go ahead, open up your components folder right here. Let me shrink everything actually.

And we're going to go into app, dashboard, sorry, app, components. And inside this you're going to create another folder, you're going to call it products, and then inside that you want to create an index.tsx. And inside this go ahead and return a component and then change the title. So this is going to need an ID for the prop, so Let's go ahead and provide that. And let's also go back and import the product table component.

Let's go back into this component. So now we can see the product table right at the bottom. Great job. So now remove this div and we're going to create a div inside of this and inside that create an H2 and we're going to set the following class names. We're going to say Font Bold and Text 2L and in here I'm going to say Products just like this.

There you go. After this we're going to have AP tags. I'm going to create a paragraph tag that says add products to your store and set them live to accept payments from your customers. And the next thing we're gonna create here is a bunch of tab menus. We want to give the user the ability to tab between products that they have live, deactivate, all that kind of stuff.

So It's just fancy stuff, it's just for UI, but you guys can improve on functionality and things like that. So in here, we're going to have tabs menu, we're going to go ahead and import this component. And inside here, we're going to have the following class names, we're going to set the triggers on this as well, which is going to be all the products, and live, and deactivated. So you guys can have states and improve on this in the future. For now, you don't need to.

Just wanted to show you that you can expand on it. And then in here, what we're going to do is we're going to have a button here that's called Add a product. So the button is going to use the side sheet, which is another component that we need to create. So let's go ahead and create that component. So open up your folder structure, go into components right here, and create a folder called sheet.

And inside that we're going to create an index.tsx. And inside that I'm just going to paste this, It's a very simple component from Chatsy and UI. It's going to have the following props which is trigger, title, description, children and class name and we're going to destructure them in here and we're just going to pass them in here. So the trigger is going to be right here. We have the header, which is the title, the description, and all the children components inside it.

So let's go back and let's quickly import that component as well. Alright, we're going back to the products page and I'm going to import the side sheet. Nice. And now here we have a plus icon, so let's bring the plus icon from Lucid React. And then we have add products.

And what else? Alright, so this 1 is a create product form, so let's go ahead and create this as well. So open up your folder structure and you're going to create another component inside this products and you're going to call this product form.tsx and inside this we're going to do the following. So we're going to essentially import a couple components guys, just give me 1 second. I'm just going to remove this so it's easier to explain and in here first thing we're going to do is we're going to use a new hook.

And this hook is going to help us create a new product. But before that, we have a form, we have the magical form generator component, and that's going to give us a way to enter the name of the product. And then in here, right, we're going to have a label with an input field, and we're going to have an upload icon, which I can import right here. And then we're going to have an upload, so this is the upload care button. And then after that, we're going to have the error messages that we can show at the bottom.

And then we're going to have another form generator here for the price of the product. And then finally a button at the bottom to submit the form and create this component. And when it's created, when we're hitting that button, we're going to fire this function here. So let's go ahead and build out this Use Products hook. And before that, I also want to import this component real quick.

Nice, passing the ID. Awesome. And let's go ahead and build this hook right here. So go ahead, open up your folder structure, scroll all the way to hooks at the bottom. You want to go into Settings, click on Use Settings, scroll to the bottom again, and you're going to do the following.

So we're going to say Const Use Products. We need the domain ID right here, and then we're going to say Const Toast. We're going to use Use Toast, and then we're going to create a state called Loading and Set Loading, and then we're going to do the same form thing again. Literally the same thing. So let me go ahead and grab our form types and our props.

So this props right here, my, my, may have some quick access right here. So I'm going to go into the Settings props right here which is the Settings.schema.typescript and I'm just going to paste the Add Product props which is named ImagePrice. And we also need this schema for this so let's go ahead and grab the schema as well. And this schema is going to be right here so scroll all the way to the bottom and we're gonna say add product schema just like this. I think we already did this.

It looks like we already have this guys so we could just delete it from here and let's go back and let's import that schema. So First let's import the props and let's import the schema. Nice. And then all we're doing here is we're creating that onCreateProduct handler. So first we're uploading the file, right, to upload care.

And then after that we're going to get the product and we're going to create the product itself. So go into your server actions folder right up top, click on the actions here, go into settings, index.typescript, you're going to scroll all the way to the bottom right here, and then you're going to do the following. So we're going to say onCreatedNewDomainProduct is an async function, it needs the ID, name, image, and price, and we're going to say client.domain.update for this ID. We're going to update the products, and we're going to create a new product just like this, with the name, image, and the price. And we're also using parseInt, and we're passing the price into that.

And then finally, just return product successfully created with the 200 status. And let's go back and let's import the server action. And in here, we're just going to pass in all the values it needs. And then we're going to say if this is successful, reset and show a toast message. And also set loading to false, of course.

So that's it for this function now. So let's go back and let's use this. I saw 1 error in our products index.typescript, sorry, TSX page. This was having a red squiggly. That's because I did not do not destructure anything.

So make sure you destructure. And now we're going to go back in to create product form and let's go ahead and import the use products hook. And in here we're going to say form and actually we already did this component right we just had to import this. So let's see what this looks like. Alright there we go We have a very weird message at the bottom, so I'm going to remove this.

I actually forgot to remove that because this is going to be the table itself, right? So I'm just going to say table or products like this so we can see products here. And so now you can see it has a button here called the Add Product button. And I'm actually going to change this color. I don't like this color a lot.

I'm going to change this to Text-White. You can change the class name here too to Text.White. Alright, so now it looks a little better I guess. Alright, nice. And now you see that we have tabs in here, right?

But our All Products tab is the only thing we're working on, it's the most important part. Everything else is just filtering, right? So what do we do here? Let's go ahead and create that component. Oh, and before we create that component, I want to show you what the add product form can actually do.

So let's go ahead and expand this a little bit more so you can see everything. If you click on this button, a really really cool sliding animation shows up with a modal on the right side, which we I think they call sheet component. Alright? And that's pretty much it. So you can upload an image, you can name the product and put a price.

So I'm gonna go ahead and do that, just give me 1 second. Alright, there you go. I just created my product right here and I put an image as well and I put the price of Prodigy's University, which is actually not the price right now, it's actually 67 right now if you guys are wondering, but 2 weeks from now we're going to increase the price because we're bringing some really, really cool value. How to start your agency for literally 0 dollars. You can start for 0 dollars and you can make that subscription payment for each website and actually passive income per month.

That is the only way to make passive income, right? So we're trying to create some newer things for you guys so you can actually start making money rather than just waste your time watching tutorials over and over again when you can actually go out there and do something for yourself, right? Create something for yourself, all right? So yes, it's actually 67 for now, but this is the price in the next 2 weeks, so make sure you join, click the link in the description, and I'll see you in there. So my product was created successfully, but of course it's not going to render out here because I have a message here that shows products.

So let's go ahead and build out that component. So the first thing I'm going to do is I'm going to go into my settings, domain, page.tsx, and in here I'm going to make sure I also get the products back in the response. So I'm going to go into my GetCurrentDomainInfo I think if you copy pasted this you should be fine, if you didn't then you have to add a new property in here. So under the select right here, you're gonna say products and set it to true. And now let's go back in here.

So now this is going to have all the products. And in here, we're just going to link this. So we're gonna go finally into this and say products like this and we're going to set a type for it. So for now I'm just going to set it to an array, an object like this just for now. I'm going to go back in here and I'm going to say products like this is equal to domain.products.

Sorry guys, it's domain.domains at 0. So we're getting that specific 1 or you can actually get, oh actually we're getting it from this 1 right here. So I'm going to say domains.find where domain or D.ID, so I'm just going to put a variable in here. D.ID is equal to params.domain. So this is going to give me the ID in here.

And now this is going to look like something else, of course. So let's go ahead and change the prop types. So the prop types for the products is going to look like this, which is ID, name, price, image, created at, and the domain. And also don't forget to destructure from here. So I'm just going to get the products, and now if you scroll down here, we're going to add a new component.

Yes, I added it without you seeing, I'm very sorry, but this is what the component does. So it's a tabs content, right? We have this tabs content on top here, and inside that we're going to have a data table. And this data table is going to have a header, we're going to say featured, image, name, pricing, and created at. And then here we're gonna see if there's anything in products.

And since it is already gonna be an array, you might want to check length, or actually you don't even need to check, you can just render out the products itself. So we made a small error here. You need to go back into settings domain page.tsx and in here we're finding something where d.id equal params.domain but we have to get the products from it, right? So make sure you have that in there or you can render out an empty array but it still says undefined and that's the only thing that is really really bugging me so I'm going to try to see what's going on in here just give me 1 second guys so the problem here is that this is always going to be the first domain, right? So I'm just going to change this to the following and put an empty array and this should fix it.

Alright, there we go. Awesome. So go ahead, knock yourself out, create 50 products if you like, enjoy yourself. Alright, but that's pretty much it and this is the way to create products and you're set now You want to go into the portal domain ID and now you're going to go into the payments folder and you're going to create another folder in here and you're gonna call this customer ID like this and inside that go ahead and create a page.tsx and this page.tsx is going to look very similar to the appointments page.tsx so I'm just going to go ahead and paste this and let's just break this down real quick. So the first thing we're going to need is the domain ID and the customer ID, right?

And we get all of that information from here. And then in here we're going to first get the questions, so on domain customer response, which is params.customerID, and we have to pass it in there and that's going to give us all of this data. Okay, and then we're also going to get the products itself. Now this is going to be another server action, so let's go ahead and create the server action. So in your folder structure, scroll all the way up top and you want to look for the payment, sorry the actions folder, create another folder in here called payments and inside that create the index.typescript file.

And in here first thing is set this to use server and then after that we're going to do the following. So we're going to say get domain products and connected account ID equal to async function with the ID which is the parameter. And in here we're going to first create a try-catch block and we're going to essentially a client.domain.findUnique for this user and we're going to get their Stripe ID. And then here we're going to also get all of their products. So we're going to get for the specific domain, We're going to get their price, name and image for each product.

And you can see here it's going to return an array of them. And if the products were successful, then we're going to say total amount equal to products.reduce. So we're reducing it to a price and We're reducing it to a number essentially, and we're returning the current plus next price. If you don't know this stuff guys, this is just basic JavaScript. Look it up, just make a search, you'll find all the answers.

Everything is already free on the internet. You'll get the answer, I promise you. Reduce is very simple. And you're just going to reduce this to this value, so it's going to append and then eventually just reduce this to a single number. And then here we're going to return the products, the amount, and the Stripe Connect ID.

And going back to this page, which is the customer ID page, I'm going to go ahead and import the server action and I'm going to pass in the params.domain ID. And now this should pretty much handle every single thing. The only thing that we did not set up is actually the payment form, right? So we have to go in here and set up the payment form for this process. And as we have this, you can see we have a work in progress flag, so I'm going to go ahead and remove that, and I'm going to uncomment this and I'm going to show it right here.

So go ahead and open up your folder structure and inside this folder right here, you're going to create something called product-checkout.tsx, and you're going to return a component like this and we're going to rename it. And also go back and just quickly import this component and now we can go back into this component so we can set all the props. So the props for this is as follows. We have on back the products itself, the amount, on next, and the Stripe ID And go ahead and destructure everything from here. And after that, we're going to install 2 more libraries from Stripe.

This is going to help us build those custom UI components. So go ahead, quit your terminal, and you're going to install the following packages. So the first 1 we need is Stripe.js so you're gonna say bun add at stripe slash Stripe.js go ahead and install that and the next 1 we need is bun add at stripe slash react react dash stripe dash js. Go ahead and install that as well. And the first thing we're going to do in here is we're going to create the Stripe Promise.

So for this, we have to insert, we have to import load stripe from Stripe JS. So let's go up top and say load Stripe from at Stripes dash slash Stripe dash JS. Oh, God, I can't speak. And in here, we're going to create we're going to do this. Actually, this has to be OK.

This can be here. This is fine. And now we need to create another hook. So for creating a hook right here, this has to be a client component. So I'm going to go up top and change this to use client, just like this.

And now let's go ahead and create this hook. So inside hooks, you're going to search for the billings page and click on the use billing. You're going to scroll all the way to the bottom and you're going to say the following. So we're going to say const useStripeCustomer equal amount and StripeID. We're going to say const StripeSecret and setStripeSecret and we're going to create a state out of it.

And then we're going to say Load Form and Set Form. This is another state. And then here we're going to say Get Customer Intent. This is very important. So let's go ahead and create this server action as well.

So go to your Actions folder all the way up top and go into Payments. And then actually I think we can go into probably not payments guys. So we just create another folder in here. Oops sorry about this. Create another folder right inside the actions.

And we're going to call this Stripe. And inside this you can create a file called index.typescript. And in here I'm going to change this to use server, of course, and the first action is the onCreateCustomer paymentIntenseSecret. So go ahead and say this is equal to an async function and it needs the amount and the stripe ID, and we're going to say paymentIntense.create, and we're going to pass in the amount that we get times 100 and then we're going to say automatic payment methods enabled true and we're going to pass the stripe ID. This is the connect ID and then finally if this is successful we're going to return the payment secret and then we can do whatever we want on the front end.

Alright? So scroll up top so we can get this instance here. We're going to import Stripe from Stripe and let's go ahead and create a new instance just like this and make sure to pass in your Stripe secret and then you can copy all the other stuff. And then if you scroll down here, the end, we're also sending, just printing an error message if something happens wrong. And now let's go back into Hooks, Billing, Use Billing.Typescript and in here I'm going to import this server action.

So after this payment secret is done we're gonna get an intent. We're gonna check if we have the intent, if we do we're gonna set the loading form to false and we're gonna set the stripe secret and we're gonna pass in the intent secret. And then finally we're just gonna print any error that happened. And right here I'm going to create a use effect, and this use effect is going to help spin this up. And finally we have to return the secret and load information, sorry, the loading form info, right?

So let's go ahead and put that at the bottom as well. Now go back to portal under the components folder and go into product checkout and now you can use this beautiful hook that we just created. And in here first thing I'm going to do is I'm going to remove this component and I'm going to render out a Loader component, and that comes from Components Loader, and inside this we're going to do the following. So I'm going to say div right here, and this div is going to have the following class names, and we're going to create an H2 tag called payment. And inside this we're going to create another div, so right after this, alright, not inside this div, right after this, we're going to create another div with the following class names and a div inside that with the h2 which is the amount, and then we're going to say products if it exists, then products.map and we're going to render out a card component and that's going to have an image and this image is the image of the product itself so we can get this from upload care and just pass in the ID, right?

And then after that here we're rendering a div here with the product name and the price. And then here we're basically rendering out all these Stripe elements. So we're saying if the Stripe secret and the Stripe promise exist, then we're going to pass in all these variables into the specific element component. And this is just part of the API, you have to do it. So let's go ahead and import this elements component, so scroll all the way up top, we're going to say import elements from stripe slash react dash stripe dot js, and then at the bottom here, we also need this form here.

So let's go ahead and create this form. So open up your folder structure and inside the portal you're going to create a payment-form.tsx and in here I'm just going to do the following. So in here I'm going to say, let's remove this so we can import this when we need to. So it's a client component that's going to have onNext and we're going to use another hook in here which is use complete customer payment and in here we're going to have a button to submit the form and we're going to have the payment element. This comes from Stripe.

Alright and that's pretty much it for this And then we also have the pay button. So if they click here on this button, it's going to pay and the loader will just put the loading spinner. So let's go ahead and create this hook now. So go ahead, open up your folder structure, and you want to go into the hooks folder and go back into use billing folder. And you're going to scroll to the bottom here and we're going to say the following.

So we're going to say use complete customer payment is going to need a callback function essentially as a parameter and we're going to create a state called processing and here we need use toast. We also need the use stripe hook. Oh we need to actually create this hook. So let me go ahead. Oh, actually, I think we have this somewhere.

I think this comes from Stripe, guys. Give me 1 second. It comes from Stripe. So I'm just going to go up top and I'm going to say import useElements and I'm going to import useStripe as useStripe hook from Stripe React Stripe JS and let's go back down and after this we're going to also use the use elements from Stripe. We're going to get the elements in here and then we're going to say onMakePayment which is a function.

We're going to say e.preventDefault so it doesn't refresh the whole page. We're going to say if there's no stripe and no elements return null, but if that's successful then here we're going to create a try catch block, set processing to true first, And then we're going to say stripe.confirm payment right here. And this is basically the elements that we need to pass into this. And we're also going to get a payment intent from this. And we can check the status of this payment intent.

So and here we have a return URL. So if something was successful, if a payment was successful, maybe you want to send the user to a different page, probably not the settings page, but I just put the settings page for now, so it's easier for me. But for the website visitor, definitely you can't send them into this page, right? So maybe you can send them to, I don't know, some thank you page or whatever you really want. So, and then what we're going to do here is we're going to say redirect if required, and then we're going to put a console message in case some error took place.

And if the payment intent was successful, then we're going to show a toast and we're going to go to the next page. Alright and here we're going to say set processing defaults. Now let's go back to our component and let's import this new hook that we just created and in here all we're doing is we're rendering out the payment elements, right, and the button. That's literally it. So let's go back now and let's import this new component as well.

And if you don't know where we're going back to, this is the product checkout page. And yeah, I think we have set this up as well. So let's just quickly take a look. Hi guys. So I was sending some messages across through the chatbot just to see if it can give me the correct link.

And the link works, but there is a small error that we made and for that reason you might have seen a 404 page. So if you look in here under the portal, which is app portal domain ID, we had an appointment route and the payment route. Now this payment route had a customer ID page and this page.tsx was spelt as pages.tsx and for that reason it could not find the component. All right, so just please rename it to page.tsx and that should fix that bug. And if everything worked as expected, if we hit the next button right here, it should render out the payment form along with the payments itself, the payment amount, and the image of the product, all that kind of stuff.

All right, so let's go ahead and test this out. So fingers crossed. Also let's expand this a little bit so we can see. We hit next. Boom.

All right, there we go. So our payment forms have been integrated as well. This is absolutely amazing because you have come so far and we still have so many more super cool features to go. So Let's move on to the next now. All right guys, there you go.

As you can see, the email has showed up in my mailbox and also most importantly, the credits have also decreased. So if I refresh this, it shows right here. And the other good thing is you can also check whoever, You can also check the answers of different customers here, and accordingly, you can add people to the campaign if you want to, and you can keep sending this as much as you like. Alright? So, yep, there we go.

Email marketing is done. Let's also quickly wire up the other things that we need to do, and we should be done with this project. Alright guys, now we're going to go into the billing settings, which is the settings right here. So click on that, it's going to take you into this page and now we can set up Stripe for our entire platform itself. So Corina AI also gets to charge some subscription fees, right?

So that's what we're going to wire up. So scroll down here inside the Billing Settings component. If you don't know where that is, it's inside the Settings component. So under Components, under Settings right here. Components, Settings, Billing Settings.

And inside this, we have a hook in here, right, that's going to do a bunch of stuff. So everything is happening behind the scenes, but there's 1 thing we don't have, which is if you click this, we have to show a modal on the screen and actually show the subscription form, right? So let's go ahead and do that. So after this line, after line 28, I'm just gonna hit enter and I'm gonna create a modal. So I'm gonna import our modal component and I'm gonna move all of this card stuff into this modal component.

Oh sorry guys, I don't want to move it into this. I'm actually going to take this out and I'm going to put this card inside the trigger. So first thing I'm going to do is I'm going to say trigger equal to and I'm going to pass in the component into that and then I'm also going to need a title and a description. So I'm going to say title is choose a plan, the description is tell us about yourself. What do you do?

Let's tailor your experience so it best suits you, right? And then at the bottom here, inside this modal, we're going to create our subscription form. So let's go ahead and say subscription form and we're going to pass in our plan as well. So let's go ahead and build this out. So inside this settings component right here, or actually this would be better to put inside the forms, right?

So go into forms and inside this you have settings right here. We're going to create another 1, call it subscription-form.tsx and inside this first thing I'm going to do is change this to a use client component. And I'm also going to return a component in here and I'm going to change the title real quick. And first thing is I need to provide the props. So the props here is just the plan, which is standard, pro, and ultimate, which is still weird because it's not really ultimate.

It's more like unlimited. Well, that's okay. And now we're going to create another hook here. So this hook is called use subscriptions. All right, so let's go ahead and build that out.

So open up your folder structure, go all the way down into your hooks folder and you see billing there should be something billing Right here use billing and inside this we're gonna build that hook so scroll down and we're gonna do the following I'm just going to paste this for now, and I'm gonna explain it in just a second so export const use subscriptions Maybe we already have this Oh we already have it guys. Sorry about that. Let me just undo that real quick. Let me go back to our component and I'm just going to go ahead and import that hook. And this plan is going to come in from the props.

I'm going to go ahead and destructure that from here and I'm going to remove this component that's being returned in here and I'm going to return another component. And this is the Loader component from our own folder. And then in here we're going to have a subscription card which is a new component that we have to create. So let's go ahead and create that component. So open up your folder structure and inside your components folder, which is in here, you see this.

In here, we're going to create that component. So go ahead and say subscription, sorry, I spelled that wrong, subscription dash card like this dot tsx. And in here, I'm going to return a component and change the title. And this is going to need a bunch of props. And the props are the title, description, price, on payment, which is a function, the payment itself, which is a string, and the ID.

And then I'm also going to go ahead and destructure right here. So I'm going to say title just like this description price on payment payment and the ID and then let's remove everything in here and we're going to return a label component and I'm also going to import this real quick from our UI folder and I see some errors here for the subscription form. So let's go ahead, go into, first let's go in here and import the subscription card and then let's go back 1 more layer and then import the subscription form itself and let's go back in here and now we can fix these errors. So inside this label component guys, I'm just going to render out this stuff which is a card and that's going to have the following class name so let's go ahead and import that and we're going to have the card content and this card content in here will have the card title, which is the price, the title, the description, basically each and every single price. That's literally it.

Nothing else crazy. And why is this not importing? UI card? I think it's just TypeScript. And it's the title here, so I'm just going to import that.

ChatCN makes everything look super, super complex just because every single thing is a component, right? It's sort of like atomic design and atomic architecture, right? And with atomic design, everything is broken down to the molecules, elements, like super, super watered down as much as possible. So that's why all these components look super complex but in reality it's just title, description, price. That's it, right?

So don't get overwhelmed if you see so many things on the page. It's just a div, nothing else. That's literally it. Alright, so after the card content we have inside this part we have a div the card the price title description and after this we have another div in here with an input box right here so I'm going to input import this as well And this is going to have a radio option so you get to choose which payment you want. And that's pretty much it for this.

I'm going to go back here and I see some errors here. So we have to render out the stripe element as well, right? So let's Go ahead and get that. So inside the settings folder, which is not inside the forms, but inside the components settings in here, I'm going to create Stripe-Elements.tsx and inside that I'm going to do the following. So I'm going to first set this to use client up top, and then after this I'm going to paste all of this in here, which is pretty straightforward.

I'm just going to break it down. Don't worry about it. So the first thing is the payment, which is standard, pro, and ultimate. And then in here we have the stripe elements, and this is the component itself. And then we're going to destructure the payment right here.

And let me also just shrink this here so you can see much more clearly. That is so much better. And now we need a hook in here. This hook is called the Use Stripe Element Hook. Alright, so let's go ahead and build that out.

So this will be inside the billings file in here, so hooks, use billing, and some error here. What is the error? Oh, we didn't actually complete this. Oh, that's messed up. Sorry about that guys.

Alright, let's finish this first. I totally forgot about it. I'm going to import use router real quick, just like this from use navigation. And this on update subscription, we need to also go ahead and create this 1. So this is going to be inside our actions folder.

So go into the, let's see, payments index. This should be the place to put it. Or maybe settings, right? Settings is probably more appropriate, right? Or because it's subscriptions, maybe Stripe.

Oh God, I'm just going to put it in Stripe. So in here, I'm going to do the following. So I'm going to say export const this function. It's going to be equal to an arrow function right here. And first thing is we need a param right here, a call plans, which is standard pro or ultimate.

Let's go ahead and create a try catch block. And inside the try catch block, first thing I'm going to do is I'm going to await the current user, just like this. And after that, I'm going to also say this right here, which is await client user.update. And also I need to first import this, so let me go ahead and do that first. Change this to async as well.

Alright nice. And this is client. Let's go ahead and import that from Prisma. And then we're going to say onst user like this. And if not we're going to return.

And then here we're going to say update client.user.update for this clerk ID. We're going to update their subscription. And for what we're going to update is the plan. And we're going to pass in the plan in here. And their credits are going to be upgraded as well.

So if it's pro plan then 50 whatever just changing the numbers Literally nothing else and then we're also gonna select a subscription and in that we're gonna get the plan itself then finally Yep, nothing else So you can just print the message here if you'd like and let's go back here and let's also import that 1. So this is back into the use billing hook. I'm going to go ahead and import the on update subscription hook right here. Sorry, server action and what seems to be the issue here. So this is not returning anything, because I have to return, I didn't do anything, right?

I didn't return anything in here, I thought this was returning, my bad. So after this update, I'm going to hit enter here, and I'm going to say if update exist, return to 100 and a message and say update subscription plan. And then maybe you can just console log a message in here in case something went wrong, just like this, and let's go back. And so if there was a response, we're going to set as loading to false, we're going to show a toast saying success, and then we're going to do router.refresh. And then we can also print an error message if we need to.

And now we can continue with our useStripeElements hook which is inside the same folder right here, useBilling. So I'm going to scroll all the way down and I'm going to do the following. So I'm going to say const useStripeElements which is going to need a param called payment which is standard pro or ultimate and then in here I'm going to create a state first called StripeSecret and the loading form, right? So the loading state of the form, sorry. And then here we're going to say onBilling, onGetBillingIntent, which is a helper function.

And this is basically going to do the following. So we're going to create a try-catch. We're going to first set loading form to true. And then in here, we're going to essentially get the secret and oh I thought we already created this I think that's for the other secret maybe we could have made that reusable but anyway let's go back in here and we're gonna go into stripe and at the bottom so we're gonna say on Get Stripe Client Secret and this is going to need the item which is basically the plan. And then here we're going to say Set Plan Amount and Set Plan Amount is just a helper function up top which is going to take the item which is the plan itself and based on it it's going to return something in here.

And then here, down here, we're basically going to set the plan amount to that item, and after invoking, sorry, we're going to pass in the item, and then we're going to get that amount in here, and then we're going to take the amount itself, and we're going to pass it as the payment intent. So Stripe.paymentintents.create the amount and then we're just going to pass this. So also know that we were charging a different amount in the landing page, I think $97, right? So you can charge that if you want in here, But let's scroll down here real quick. And then if the payment intent exists, we're going to return a secret called payment intent dot client sequence.

So we're just destructuring it right here. And that's pretty much it. So let's go back here and also import this 1. Awesome. And that should be it for subscriptions.

So let me go back and make sure we have everything. Oh, nevermind, just kidding. We have to import. We have to do 1 more thing. So go ahead, import this hook right here.

And then we have to go ahead and print out the form. So let's go ahead and do that as well. So the form in here is going to be inside the components settings. So open this and in here going to say payment-form.tsx and in here I'm going to return the following component. And this component is very straightforward but it also has 1 more hook that we have to create.

So let's go ahead and do that as well. So open the folder structure. I'm going to go all the way down to use billing. And in here, I'm going to scroll down and I'm going to say the following. So I'm going to say use complete payment and these are the plans, right?

And we're going to create some states here, so processing and set processing. We need router toast, we need the useStripe hook and the elements. So very similar to what we did before, right? And then we're going to create an onMakePayment handler. And this handler right here is an async function and it's we're going to just prevent default here so it doesn't refresh anything.

And if the elements don't exist, we're going to return null. And in here we're going to first set processing to true. And then we're going to say stripe.confirmPayment, pass in the elements, we're going to pass in the Confirm Params, which means where we have to return to once everything is done. And in here, I'm just going to say Settings Page, and then Redirective Required. And then finally, down here, I'm going to say if the payment intent is successful, then we're going to basically say on update subscription payment, and we're going to pass in the payment in here.

And then finally, if this is successful as well, we're just going to show a success message, and we're going to do router.refresh and just print out a message in the console. And now let's go back here so we can import this hook real quick. All right, that's it. And after this, in here I'm just rendering a form and in this we're going to have an on submit and we have an H2 tag right here. We're going to have a description and then we're going to have the payment element itself which comes from Stripe and then we're going to have a button to submit the form.

I think that should be it for this. We might have to import the payment form. All right, there we go. Import the payment form and let's see what else we missed out. I see something wrong here which is inside the subscriptions itself.

So go into Settings, the subscription form, and we have to import these Stripe elements, and we have to import the button element, and I think that should be it. So let's give it a shot. So upgrade your plan. Boom, there you go. So you're on standard plan right now, so we don't need the stripe elements, so we're not going to show it, but if you hit Pro, it's going to render something, and there you go.

Take a look at that guys. This component looks so good. I prefer this over that ugly stripe hosted page, and I know so many content creators are doing that. Please stop, please take this code. I don't care.

This is how you should create forms. It's so much better. All right. And we have ultimate as well. So it'll just change between them if it needs to.

All right. So I'm gonna just go ahead and go for the ultimate plan because I want the ultimate plan. And I'm just gonna set 424242 for the credit card. For expiration, just set something else. So I'm gonna set a date like this, put 424 here as well.

Oh sorry about this, 2024 and just change this to 4242 as well. And go ahead and hit pay and let's see what happens. Success. Boom. Alright.

There we go. And now we see something really weird in here and I have to actually go ahead and fix this so just give me 1 second. Error that I made in here And basically in this area right here, we were essentially just rendering out a component in here. We were rendering out something. And the issue is, remember the name of the ultimate plan, right?

It was actually unlimited, but it was called Ultimate in here. So all I did was I went into the pricing cards and I changed this to Ultimate, then I went back in here and then I just scrolled down here and I made a quick change. So the first thing I did is I changed this to, if plan exists and plan is equal to standard then I'm going to render out the regular component, right? The card component. And if not, I'm going to render out an image component like this and this image component is this really cool credit card looking component.

Okay? Great job so far. Alright guys, now go ahead and click on the dashboard right here and as you can see there's literally nothing in here right and this is not returning a component but inside the dashboard you're supposed to have a page.tsx like this and because it's not returning a component it's showing an error. So let's go ahead and build this out. So the first thing I'm gonna do here is I'm gonna just return a component in here and the first 1 is to get the clients.

So the dashboard page is a very very important feature to have. It's gonna show the client their pipeline value, how many sales they made, where they made the sale, and also it's going to show a bunch of other metrics that are really going to help them, right? And from a marketing standpoint, it's great. So make sure you build this part out. So first thing we're going to do is we're going to get the client's information.

So let's go ahead and do that. So you want to go into your actions folder, you want to create a dashboard route like this and inside it, not a route guys, sorry it's a folder, and inside that you want to create an index.typescript file and inside this first thing I'm going to do is set this to use server up top like this and then inside I'm going to do the following. So I'm gonna say get user clients. First we're gonna make sure the user is authenticated and then after that I'm going to go into the database and say client.customer.count where the domain we're gonna get the user is like this right And then if we found the clients we're going to return it and it's basically the number of clients. Alright so let's go back real quick and let's import this server action.

Nice So now we have all the clients and I'm also going to refresh this. Okay there we go. And the next 1 is the sales. So we have to get the balance, right? And what they made essentially.

So let's go ahead and get some metrics for that as well. So for this 1, go back into the dashboard page and I'm gonna say the following. So we have to do some Stripe based stuff as well, okay? So we might have to import that in here but basically we're gonna wait for the user, make sure they're authenticated and then we're gonna say client.user.findunique for this specific LERC ID. We're gonna get their Stripe ID, okay?

Then we're gonna get all their transactions and we're gonna say stripe.balance.retrieve for this specific Stripe account. We're gonna get everything in here. So let's go ahead and import Stripe. So scroll all the way up top and you want to say import Stripe from Stripe and you also have to create an instance of that Stripe so I'm going to just say new Stripe and pass in the process dot env dot Stripe secret and let's go back down here and after we get all the transactions If the transactions exist then the sales are equal to the transactions.pending.reduce and we're just going to reduce it to a specific number right so we're reducing it to a number here we're just going to return the total plus the next amount all right and then finally return sales divided by 100 and let's go back and also import this real quick. And now we have the balance, so which is the sales.

Next we have to get all their appointments, so all their bookings. So let's go ahead and do that as well. So this 1 is going to be inside the appointment section. So go into index.typescript. You want to scroll all the way down and you want to put this in here.

Maybe you might want to move this inside the dashboard page. That's fine. It doesn't really matter. But in here, first thing I'm going to do is make sure the user is authenticated and then I'm going to say bookings.count where the customer has this domain and the user is set to the specific clerk ID. Okay, and if the bookings exist, we're going to return that.

So let's go back and also import this 1. And here's a small challenge for you. Okay, we have to create another server action that's going to help get the user's plan information. Okay, that means what plan they're on. So go ahead, pause this video and try to give this a shot.

Okay, I've showed you how to build probably more than a hundred server actions right now. So try to create a server action that's going to give us the user's plan details. Alright, awesome. Hopefully you got it correct. If not, no problem.

This is exactly what you need to do. So I'm going to go into the dashboard action file and at the bottom I'm going to say the following. So I'm going to say get user plan info. We're going to wait for the user to be authenticated. And then here we're going to say client.user.findunique for this specific LRK ID.

We're going to count their domains, okay, and we're going to count and get their domains. And then in here we're going to say the subscription we want to select the plan and the credits. So that way we can render that data also on the page. And then finally we're going to return their plan, the credits, and the domains in here. Okay, so let's go back real quick and let's also import this.

And the next 1 is some transactional data, so let's go ahead and get this as well. So I'm going to go back into the dashboard actions page and at the bottom I'm going to do the following. So wait for the user. We're going to say product.findMany for the specific clerk ID. And then we're going to select the price.

And then in here we're just going to reduce that price to a small number and then we're going to return that. Sorry, not small number, it's a single number, right? We're reducing it to 1 number and then we're returning it so we can go back and also import this. So we have, I think we have about 1, maybe 1 more server action. Okay, something is wrong here guys.

Let me go ahead and take a look. Okay, so I accidentally used the wrong server action. Let me see what I did. Right, sorry about that guys. This is the next 1 which is a total product prices.

So combining all of that together. It's fine, this can be in here. Nope, not a problem. But we have to create the other 1, right? Sorry about that.

So this 1 is get user transactions. We're just going to say user.findunique for this clerk ID. We're going to get the Stripe ID. After we get that, we're going to go and fetch all their transactions from Stripe and we're going to get that from charges list. Okay?

And then here we're going to return all those transactions if they exist. And let's go ahead and import this server action. And since I already did the products 1, I'm also going to get that 1 as well. Just import this like that. All right, nice.

And then in here we're going to return... What's the issue here? Okay, there's no problem. So just return a React fragment and inside this I'm going to return the info bar first, just like this. And the first thing we need is a div, so go ahead and create a div with the following class names.

And inside that we're going to have another div container, and this div is going to have the following class names as well. And inside this we're going to create another component and this component is called dashboard card. So for now what I'm going to do is I'm going to open, maybe I can just build it out right here, so I'm just going to create this. It's called dashboard card just like this and we have to pass in the person icon. So let me just say person icon like this nice and for the dashboard card, this is what we're gonna do.

We're gonna open up our folder structure. We're gonna go down to components and we're gonna search for dashboard. If you don't have that we might have to create it. Okay, so go ahead and create a folder in here called Dashboard. And inside that, we're going to create a cards.tsx.

And in here, I'm just going to return a component and we're going to change that to dashboard card. And this is going to need a bunch of props, right? So let's go ahead and import the props and also import the component here so it doesn't keep yelling at us. I can go back in here, all right? And I'm going to quickly destructure all of these props just like that.

Nice, awesome. And now we just have to return something in here. It's a very simple component, which is a div with the following class names, a div to hold this, which is the icon and the title, and a div to hold this, which is the sales and the value. All right, so whatever they want to pass in there. So I'm going to go back here and now we can reuse this information.

There you go. You see it shows the potential client on the dashboard and the user can take a look at that. Maybe I might change this color around. Just give me 1 second. Okay, I think this 1 looks better guys.

So first thing I did was I set border 1 pixel, border border, and background of cream. Okay this looks a little better but this is only on light mode so make sure you put a flag in here. I think it's called, let me see, I think you can do something actually I think this would be default and on dark mode we can make it background of muted, right? Something like this. And the next metric we need here is called dashboard for the pipeline value.

So let's go ahead and create this and pass in the dollar sign icon. All right, awesome. There you go. So you can see that this is the estimated pipeline value of the customer, right? So how much they essentially sold, I guess.

Or not sold, but how much they can potentially sell. You guys can do whatever you want, like change it up, put some better metrics if you'd like. I'm just showing you how to create something for yourself, right? And here we have appointments, so I'm going to set the email icon. I think that one's a good 1 here.

Actually, this is bad. I think the calendar icon would be better, so let's go ahead and pass the calendar icon. Okay, the calendar icon looks so much better. And after that, in here, we're going to have 1 more metric. So let's go ahead and bring that in as well.

And this 1 is total sales. So I'm just going to bring in the dollar sign icon for this. Okay, and I want to change 1 more thing, guys. So if you see this on the, you know, I think this is tablet view. So when it goes into the medium device setting, that time we have to actually change this.

So here's what I'm going to do. So for medium devices, MD, I'm going to set width to fit. And you know, by default, it's going to be width of full. So I think this should extend now. Okay there you go so this looks a little better right and yeah once you go to you know above medium devices it's going to fit the content.

And now inside our dashboard guys right here we're gonna hit enter after this div and inside this we're going to do the following. So we're going to say a div right here, put a div with the following class names and 2 containers, so div div and inside this 1 we're going to have an h2 tag called plan usage and then here we're going to pass an a detailed overview of your metrics, you know, something. We're just going to show some data in here, right? And then for this 1, we have to create a custom component. So open up your folder structure and inside the components folder, inside dashboard, we have to create the plan-usage.typescript file, TSX file.

So inside the plan usage component, we're just going to have the plan, the credits, domain, and the clients, and just destructure those here, you guys know. And then we're going to have a div, like a container for all of them, and we're going to pass in 3 progress bars. Okay? This is for the email credits, this is for the total domains, and this is for the total contacts. So this can show the user how much they have remaining from their current plan.

Okay, this is super super effective and you can of course, you know, tweak this, do whatever you want. I just want to show you an example. So for the progress bar, we also have to create a custom component, right? So let's go ahead and build that component out. So inside the components folder, go ahead and create a progress folder.

And inside that you want to create an index.tsx file. And inside this component, we're going to do the following. So we're going to say first bar props and this is going to have label and credits like this. Let's destructure these values. We're going to create a div here and this div is going to have the following class names.

We're going to put the label here, right? Whatever was passed in and inside that a div with the credits and the end. And then here a progress component that just basically does some math to, you know, set the value. All right, let's go back and import the progress bar. Okay, this looks good.

We have to import the plan usage. So import plan usage component. Alright, all set. Nice. And now we have to also create 1 more component right here.

But in here we're gonna show the transactions and all that kind of stuff. So let's go ahead and import the transactions icon. And this transaction icon component basically comes from our icon folder, so that should be good. And then we have the recent transactions here and we just have something called cmore. But yeah, you can probably expand this using like an accordion.

And here I'm going to set a separator component which comes from our folder. And let's go ahead and kind of return all the transactions being made. Okay, so 1 more thing I want to change is it actually doesn't look... This doesn't look good. I forgot about it, right?

Basically, when you expand it, this part doesn't look good. So I'm going to go in here and just remove this. This is inside the... Let's see. So sidebar, under Components, Sidebar, domain menu.

And if you scroll down to where we're rendering all the domains out, here I'm just going to remove that and this looks so much better now. So we just made some quick fixes, so please just follow through with me. So the first thing is right here. So when we were rendering out the bookings for today, we were looking at the timestamp and the timestamp is never going to be the same as today, right? But the date is what we need to look for.

So first thing you want to do is you want to also set this to return. Previously we just had this as a statement. So what you could do is you could just remove all of this if you'd like and just have this directly in here. And that will also return it. Okay so you have to change this from get time or whatever that was to get date and this 1 to get date as well.

And then you'll see the appointments that are due for today. All right, so that's the first fix. The second 1 is for the payments. So for some weird reason in my dashboard, I was not able to see any of the recent transactions that happened on the account. And what was happening is at checkout, the user's credit card was being accepted, but I was getting a 400 when I was trying to submit the response.

When I was trying to basically pay with a credit card. So what's the fix for that? So essentially, I don't know what there's no real fix. What I did was I just went to the payment section. So let me see if I can show you.

So go into API. You want to go into the Stripe Connect route and in here I had it as Canada. Okay and I think maybe the some countries are restricted to make payments. So maybe it may not work for you. So all I did here was I just changed it to some mock info.

So change the country and if you change the country, make sure you change the zip code. Make sure you change the city. Okay? So just scroll through, you'll find some info, just tweak it to make it look like, you know, it's your country and where you're from, I guess. That's the best way I can think about it.

And then after that, I just refreshed everything and you know, the payment intents went through and I was able to, you know, make a sale on my payment page. So let me see if I can show you a quick demo. So imagine this was the link that I just clicked on from the bot. It took me into the payment intent page, and in here, all I'm going to do is put in the fake credit card. So just put in whatever you want.

And I'm just going to change this to 0625 and put just 4242 everywhere. Okay, so I'm going to do this here as well. And now if I hit pay and if everything worked correctly, I should see the thank you page and it should also show in my dashboard. So let's go ahead and give it a shot. All right, boom, there we go.

Amazing, great job so far. And let's also make sure we can see this inside our dashboard, right? So let's go to the dashboard. Let's just quickly refresh and you should see another 1 made from thebestcookie.com. Sorry, the website right here, okay?

And this, if you're wondering where this comes from, this is from the mock data, okay? So if you want, you can take more information, like just tweak around with it, okay? Mess around with it, see how we can provide some more info. Another quick thing that I found, which I think is a good opportunity for you to figure out how to debug is I just passed in the wrong variable in here and that's why we're showing 500 out of 500 email credits but in reality I do have 500 email credits. Let's go to our email marketing right in here.

I do have 500 email credits but remember once you consume some credits it has to deduct. So that available credits is what we have to show in here. So maybe this might just be the other way around. I'm not entirely sure because if you think about it you have 500 credits and you can show how much you're using, right? So let's say we use 7 credits, then this will reduce.

I just forgot what I was building. Guys, it's been a very long time, right? It's literally 2 months in the making. So yeah, you can just go ahead and mess with this. It's just whatever number you put in here is what the progress bar is going to fill in, right?

And I also went ahead and created some mock domains just to test out this and as you can see it shows I have 4 domains created 1234 perfect and I also have 4 contacts in my contact list, right? And I can also see the total sales here, which is amazing. And I think this is minus a stripe fee or something like that. I think there's something in there. And I see 5 appointments, totally booked.

And I also see my pipeline value, which means how many customers went to the checkout page but didn't actually purchase, right? And then I also have potential clients which means the contacts basically, alright? Great job guys. So we have 1 more very important thing. So let's go ahead and wire that up.

So here's what you're going to do. You're going to open up your terminal and you're going to quit the terminal right now, okay? Because we are going to set up real-time, you know, real-time data so that way both the chat bots and the business owner can actually communicate together, okay? At the same time. So let's go ahead and set that up.

So make sure you quit your terminal first. Alright guys, so there's going to be a link in the description. Click on that link. It's going to take you to this page. We are going to be using Pusher, okay?

So click on that link. It's going to take you in here and I think we can use the channels itself and just create an app in here. So first of all, click on the channels, right? It should take you in here but click on the channels and then you have to click on create app and then it's gonna give you some app name right here. I'm just gonna call this Corinna-AI and then this is okay.

Just I think what is this front end? Okay so for front end we're gonna set it to react right here just like this React and then here the back end it's asking us for something. So let me see, okay just put Node.js for now and go ahead and hit create app And then it's going to take you into a page that looks like this, right? Go ahead and click on App Keys and in here you're going to find a bunch of variables. So go ahead and copy the App ID first and then here you have Pusher App ID.

I'm just going to paste it in here and then we have the key itself. So I'm going to copy this key and you see we have the public pusher app key. So I'm going to paste the app key in here and then we have the secret. So go ahead and just copy over these variables. Okay copy everything and also the clusters.

I'm going to copy this too and let me put it in here and then we should be set on this and now we can go ahead and kind of set up things for ourselves. So once you're done populating the environment variables go ahead and go to your actions, bot and index.typescript and in here you're gonna find this, just go ahead and uncomment this and you can remove this work in progress flag. And I think we already have this function right here. So we have this function, nice. And we'll go ahead and also set this up, so just give me 1 second.

So go into your, I think that is the Libs folder, right? So go into Lib, go into utils, alright there we go. And all we have to do is uncomment all of this. So I'm going to uncomment it, hit backspace on this and remove the object. So we can now assign this pusher server.

And also for this 1, I'm going to remove this work in progress flag remove this 1 as well and let's go ahead and uncomment this 1 and bring it on to the first line and then remove this all right nice and make sure you have your terminal turned off okay don't turn it on for now I'll tell you when to turn it on. But for now just put this in here and then let's go back to our file which is the, I think if you can click on this it's going to take into the conversations index dot typescript, go into the on real time chat function And now this should import without any issue. And let's also set it up everywhere else. Okay, the next 1 is inside our chatbot real time. So in here we have this hook that we were trying to import.

So go ahead, first remove this, and now we're gonna import the useRealTime hook. So let me go ahead and import that. Okay I can't import it because we didn't actually, I mean we have it commented somewhere else. So this is inside, let's see, our chatbot use chatbot hook and it's all commented out here so I'm gonna go ahead and just uncomment all of this. Alright nice and all we're doing is we're just listening to pusher right we're subscribing to the pusher client and then based on that we're doing something so let me Also make sure we don't have any work in progress flags here.

Alright, I see there's a work in progress flag all the way up top. So I think I can remove this, right? We have everything else set up. Okay, yeah, so let's go up here and let's remove this work in progress flag. I'm going to go back to my component and now import this and if you don't know where this is, this is under components real-time.

Alright so import the use real-time hook here and then the next 1 is inside the conversations use conversations dot typescript. If you scroll down to line 138 or somewhere around the bottom you're gonna find another Work in Progress Set Pusher. Okay, Setup Pusher. So I'm going to go ahead and uncomment this 1 as well, right here. All right, nice.

And after that, I'm going to find 1 more down here. So let me remove this 1 and I'm going to uncomment this on real-time chat. All right, and now I think we actually have it set up everywhere else. So let me go back into my component. And let me just say bunrun dev.

Let me just test it out, guys. Give me 1 second. All right, guys. So there you go. I just started spamming it so I said I want to talk to your manager and it tried to get my email right.

It needs my email first. So the AI did a great job by forcing itself to get the email first and after that I kept pushing. I said I want to speak to your manager and it said, hey, how can I assist you? I'm here to assist you and help you with any concerns. And I said, no, please stop.

And then boom, it switched to real time. And now I'm going to go into my dashboard. I'm just going to refresh this because it's going to come in here. And if I go to webprodigies.com, In here I see the PJ at gmail.com and if I click here now I can see the conversation. Right?

So let's see if this works. So I'm gonna say, hey what's up? And hit enter. Okay a message was sent and on this end I don't see anything in here so let me try something. Hey okay so real time is not working.

I think there might be some error. So let me go ahead and try to fix that. Alright guys, give me a second. Alright guys, I think I might have found the issue. So my cluster had a different ID, alright?

So if you go into the environment file, you'll see my cluster here is something else, completely different. But what I did in here was I accidentally hard-coded the value. So if you see, let me just look up cluster like this. And in here, I'm using something else. You see I'm using MT1.

So what I'm gonna do here is I'm going to remove this and say process.env and I'm gonna paste the cluster app right here and I'm gonna say as string and I'm gonna copy the same thing here as well and I'm gonna put it for this 1 too right here. Okay so sorry about that I think this should work now. Guys so I caught 2 bugs and I found the solution for it okay. It was a little annoying but this is what's going on. So when the user uploads an image the image actually I mean it comes into this function right this is the on submit basically.

So in the chatbot this is inside the chatbot right here, components, chatbot, useChatbotHook. In here, when the user uploads an image, because this reset is all the way up top, for some reason files get reset. The form states for files get reset. Now I think This is literally a bug with the library. I don't think it should work this way because all the other values don't get reset.

So that's just really weird to me. But all you have to do is first move the reset all the way after this right here. So inside, actually not even in this, you can probably put it outside this. Let's see where we could put this. Let me copy this here and I'm just gonna put it after this 1 right here.

Okay so now you can actually upload an image through this so since we did not test that let's go ahead and give it a shot. So here I'm just saying hi I want to learn web development. I'm going to go ahead and submit the form. And now it sends a response and I think they should ask for email. So I'm just going to pass in an email for now and then hit enter.

And now inside this chat bot, you can see the conversation, right? So I'm also going inside the conversations tab and I clicked on that specific user and I'm just checking their data. Now let's go back here and I'm just going to say my name is Perrin, like this. Awesome. And now let's try to upload an image.

Alright, so go ahead and hit submit and this should send an image. Alright, there you go. And now of course the chatbot's going to get a little confused, and it might try to set it up as real-time. But I think because I did not refresh this, this won't be in real-time mode right now. But Let's also go back and see here.

So we have this chatbot. Let's turn on real-time mode, okay? Alright guys, so here's the bug. Inside the conversations tab, right? If the business owner is in real-time mode with a customer and they send a message right here, for example, they just send in something like hi like this.

You see it sends it twice. Why is this happening? Well, I want you to actually try to guess. So go ahead pause this video and just see if you can navigate the bug. Okay and if you can't I'll show you exactly how to do it.

Okay, hopefully you found it. If not, this is what you need to do. Okay, I'm going to give you a little bit of a challenge too. So the first thing is when you submit here, right, something is firing a submit handler. And based on the submit handler, some whatever is happening in here, right?

So where is that happening? Well, we have a hook, remember? And we have an onHandleSendMessage handleSubmit function. This handleSubmit function is essentially setting the state of the chats again to what's in the previous state with a new message. So basically what's happening here is when you send a message in here, it's gonna go in here, it's gonna save this message, right?

And after that we're also saving it in here again. So that's causing this weird bug, okay? So if I uncomment this and we go back into our dashboard and we just send a message here. So I'm just going to say I need help. Send this real quick and there you go.

It only sends it once. So here's your challenge. Inside the chatbot, I'm just going to go ahead and establish a connection. You see for the customer end, they are going to see 2 messages. So again, I said, hey, how are you?

And I sent this message across. As you can see, it's sending 2 messages. So the exact same bug is happening even on the customer end. Okay? So here's your challenge.

You have to do this. I'm not gonna give you the answer because I just did. Figure out why is this happening for the chatbot on the website visitor end as well. Okay? Awesome.

Alright guys, finally we are done. Oh my god I am so tired. We've been working on this project for hours literally. I mean in your end you only see a couple hours but we've been working on this for weeks right. So I'd like for you to take a few minutes to kind of reflect on this entire project and I'd also like to give you some word of advice.

Web development is 1 of the easiest fields to get into. Anyone can become a web developer. Now this is a good thing and can also be a very bad thing. The reason is because it becomes saturated. That's why it is very difficult now to get a job in this field because there are more developers out there than available jobs in the market.

So listen to me carefully, I'm going to give you some word of advice. This is going to transform your entire life. The most important skill to know to become successful is sales. Because think about this right, if you know how to sell, you will have money in the bank. Even if you don't know everything about the tool or the software or the technology, whatever you're trying to do, by just knowing what you have to offer.

That is, what are your services? Just understand that. Even if you don't know how to deliver results, you can figure everything else out later. This is how people learn. So you need to figure out a way to actually sell first, then provide.

This is the secret to sales. And by the way, always make sure that the offer you have is valuable and it can genuinely provide some value and solve a problem that a business owner faces. So I have spent years in sales And I've created a framework, a complete framework from start to finish that shows you exactly how to run a sales call. And I'm going to give you that right away, right now, in just 1 single sentence. This is all you need guys.

This is it. Nothing else. But before that, I would like for you to think. Do some thinking. In your mind, what is sales?

Pause this video and take 2 minutes to just guess and hopefully you have a good answer. Hopefully you did not say sales is trying to convince someone to buy your product or you know, talking about the product or something like that. That is not sales. Sales is amplifying a client's problem over a call and making them talk about it over and over and over again to a point where they end up selling to themselves. And if you want to look at a full walkthrough of exactly what a sales call could look like and you want to see the entire framework in great detail, including the different phases, the steps, every single thing, I've uploaded a course inside Prodigy's University.

This is all of my experience closing over $200, 000 in sales and hopefully you can do the exact same thing for yourself. So just a little bit of training there. I hope you genuinely take this advice and go out there, learn some new skills, get your tools together, and get out into the real world. Great job, Prodigies. If you have come so far in today's video, I am super proud of you.

And I'm sure you want more value just like this. If you subscribe, then hopefully that will show up on your search feed, okay? Because we might never meet again. But that's all, Prodigies, and I'll see you in the next video.