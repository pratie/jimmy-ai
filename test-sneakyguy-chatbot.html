<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SneakyGuy.com - Chatbot Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1001;
        }
        .chatbot-notice {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .chatbot-notice h3 {
            color: #1976d2;
            margin-top: 0;
        }
    </style>

    <!-- Corinna AI Chatbot Embed Code for sneakyguy.com -->
    <script>
        const iframe = document.createElement("iframe");

        const iframeStyles = (styleString) => {
            const style = document.createElement('style');
            style.textContent = styleString;
            document.head.append(style);
        }

        iframeStyles(`
            .chat-frame {
                position: fixed;
                bottom: 50px;
                right: 50px;
                border: none;
                z-index: 1000;
                border-radius: 12px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
            }
            .chat-frame:hover {
                box-shadow: 0 12px 40px rgba(0,0,0,0.3);
            }
        `)

        iframe.src = "http://localhost:3000/chatbot"
        iframe.classList.add('chat-frame')

        // Add loading state
        iframe.style.opacity = '0';
        iframe.style.transform = 'scale(0.8)';

        iframe.onload = function() {
            console.log('✅ Chatbot iframe loaded successfully');
            iframe.style.opacity = '1';
            iframe.style.transform = 'scale(1)';
        };

        iframe.onerror = function() {
            console.error('❌ Failed to load chatbot iframe');
        };

        document.body.appendChild(iframe)

        window.addEventListener("message", (e) => {
            console.log('📨 Received message:', e.data, 'from:', e.origin);

            if(e.origin !== "http://localhost:3000") return null

            try {
                let dimensions = JSON.parse(e.data)
                console.log('📏 Setting chatbot dimensions:', dimensions);
                iframe.width = dimensions.width
                iframe.height = dimensions.height

                // Send the real domain ID for sneakyguy.com
                iframe.contentWindow.postMessage("38418718-bf2e-41a3-a7a2-119ca454bbcb", "http://localhost:3000/")
                console.log('🚀 Sent domain ID to chatbot');
            } catch (error) {
                console.log('📨 Non-JSON message received:', e.data);
            }
        })

        // Debug logging
        console.log('🔧 Chatbot embed script loaded for sneakyguy.com');
        console.log('🌐 Chatbot URL:', iframe.src);
        console.log('🔑 Domain ID: 7cb6e2ba-76ff-4850-8e4e-b6331e29d2ac');
    </script>
</head>
<body>
    <div class="status-indicator">🤖 Chatbot Active</div>

    <div class="container">
        <h1>🕵️ SneakyGuy.com</h1>

        <div class="hero">
            <h2>Welcome to SneakyGuy.com</h2>
            <p>Your trusted source for all things sneaky and awesome!</p>
        </div>

        <div class="chatbot-notice">
            <h3>🤖 AI Assistant Available</h3>
            <p>Look for the chatbot icon in the bottom-right corner. Click it to start a conversation with our AI assistant!</p>
            <ul>
                <li>✅ Real-time AI responses</li>
                <li>✅ Helpful customer support</li>
                <li>✅ Product recommendations</li>
                <li>✅ 24/7 availability</li>
            </ul>
        </div>

        <div class="feature-grid">
            <div class="feature-card">
                <h3>🎯 Precision Tools</h3>
                <p>Professional-grade tools for all your sneaky operations. Quality guaranteed.</p>
            </div>

            <div class="feature-card">
                <h3>🔒 Secure Operations</h3>
                <p>All transactions are encrypted and your privacy is our top priority.</p>
            </div>

            <div class="feature-card">
                <h3>🚀 Fast Delivery</h3>
                <p>Same-day delivery for all stealth equipment within the metropolitan area.</p>
            </div>

            <div class="feature-card">
                <h3>💬 Expert Support</h3>
                <p>Our AI assistant can help you choose the right tools for your mission.</p>
            </div>
        </div>

        <section>
            <h2>📋 How to Test the Chatbot</h2>
            <ol>
                <li><strong>Look for the chatbot icon</strong> in the bottom-right corner</li>
                <li><strong>Click the icon</strong> to open the chat window</li>
                <li><strong>Type a message</strong> and press Enter</li>
                <li><strong>Wait for AI response</strong> from Corinna AI</li>
                <li><strong>Check the browser console</strong> for debug logs</li>
            </ol>
        </section>

        <section>
            <h2>🔧 Technical Details</h2>
            <ul>
                <li><strong>Domain:</strong> sneakyguy.com</li>
                <li><strong>Domain ID:</strong> 38418718-bf2e-41a3-a7a2-119ca454bbcb</li>
                <li><strong>Chatbot Server:</strong> http://localhost:3000</li>
                <li><strong>AI Model:</strong> OpenAI GPT-4</li>
            </ul>
        </section>
    </div>

    <script>
        // Additional debug info
        window.addEventListener('load', function() {
            console.log('🎉 Page fully loaded, chatbot should be initializing...');

            // Check if iframe is created
            setTimeout(() => {
                const chatFrame = document.querySelector('.chat-frame');
                if (chatFrame) {
                    console.log('✅ Chat frame found in DOM');
                } else {
                    console.error('❌ Chat frame not found in DOM');
                }
            }, 1000);
        });
    </script>
</body>
</html>